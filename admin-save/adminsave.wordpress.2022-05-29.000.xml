<?xml version="1.0" encoding="UTF-8"?>
<!--
 This is a WordPress eXtended RSS file generated by WordPress as an export of your site.
 It contains information about your site's posts, pages, comments, categories, and other content.
 You may use this file to transfer that content from one site to another.
 This file is not intended to serve as a complete backup of your site.

 To import this information into a WordPress site follow these steps:
 1. Log in to that site as an administrator.
 2. Go to Tools: Import in the WordPress admin panel.
 3. Install the "WordPress" importer from the list.
 4. Activate & Run Importer.
 5. Upload this file using the form provided on that page.
 6. You will first be asked to map the authors in this export file to users
    on the site. For each author, you may choose to map to an
    existing user on the site or to create a new user.
 7. WordPress will then import each of the posts, pages, comments, categories, etc.
    contained in this file into your site.
-->
<!-- generator="WordPress.com" created="2022-05-29 07:22"-->
<rss version="2.0" xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:wfw="http://wellformedweb.org/CommentAPI/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:wp="http://wordpress.org/export/1.2/">
  <channel>
<title>Adminsave</title>
<link>https://adminsave.wordpress.com</link>
<description>A Look Into Service Provider's Core Network Technologies</description>
<pubDate>Sun, 29 May 2022 07:22:02 +0000</pubDate>
<language>en</language>
<wp:wxr_version>1.2</wp:wxr_version>
<wp:base_site_url>http://wordpress.com/</wp:base_site_url>
<wp:base_blog_url>https://adminsave.wordpress.com</wp:base_blog_url>
<wp:author>
  <wp:author_id>134984991</wp:author_id>
  <wp:author_login>adminsave</wp:author_login>
  <wp:author_email>teenoko@gmail.com</wp:author_email>
  <wp:author_display_name><![CDATA[Hugo Tinoco]]></wp:author_display_name>
  <wp:author_first_name><![CDATA[Hugo]]></wp:author_first_name>
  <wp:author_last_name><![CDATA[Tinoco]]></wp:author_last_name>
</wp:author>
<wp:category>
  <wp:term_id>1</wp:term_id>
  <wp:category_nicename>uncategorized</wp:category_nicename>
  <wp:category_parent/>
  <wp:cat_name><![CDATA[Uncategorized]]></wp:cat_name>
</wp:category>
<wp:tag>
  <wp:term_id>44070</wp:term_id>
  <wp:tag_slug>automation</wp:tag_slug>
  <wp:tag_name><![CDATA[automation]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>4852065</wp:term_id>
  <wp:tag_slug>devnet</wp:tag_slug>
  <wp:tag_name><![CDATA[devnet]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>72721</wp:term_id>
  <wp:tag_slug>json</wp:tag_slug>
  <wp:tag_name><![CDATA[json]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>56136333</wp:term_id>
  <wp:tag_slug>netconf</wp:tag_slug>
  <wp:tag_name><![CDATA[netconf]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>1383012</wp:term_id>
  <wp:tag_slug>network-automation</wp:tag_slug>
  <wp:tag_name><![CDATA[network automation]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>16575089</wp:term_id>
  <wp:tag_slug>nornir</wp:tag_slug>
  <wp:tag_name><![CDATA[nornir]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>271299</wp:term_id>
  <wp:tag_slug>sdn</wp:tag_slug>
  <wp:tag_name><![CDATA[SDN]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>69800</wp:term_id>
  <wp:tag_slug>service-provider</wp:tag_slug>
  <wp:tag_name><![CDATA[service-provider]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>73018705</wp:term_id>
  <wp:tag_slug>spauto</wp:tag_slug>
  <wp:tag_name><![CDATA[spauto]]></wp:tag_name>
</wp:tag>
<wp:tag>
  <wp:term_id>6852</wp:term_id>
  <wp:tag_slug>xml</wp:tag_slug>
  <wp:tag_name><![CDATA[xml]]></wp:tag_name>
</wp:tag>
<wp:term>
  <wp:term_id>1358</wp:term_id>
  <wp:term_taxonomy>nav_menu</wp:term_taxonomy>
  <wp:term_slug>links</wp:term_slug>
  <wp:term_name><![CDATA[Links]]></wp:term_name>
</wp:term>
<wp:term>
  <wp:term_id>1357</wp:term_id>
  <wp:term_taxonomy>nav_menu</wp:term_taxonomy>
  <wp:term_slug>primary</wp:term_slug>
  <wp:term_name><![CDATA[Primary]]></wp:term_name>
</wp:term>
<generator>http://wordpress.com/</generator>

<image>
	<url>https://adminsave.files.wordpress.com/2019/01/cropped-capture-1.png?w=32</url>
	<title>Adminsave</title>
	<link>https://adminsave.wordpress.com</link>
	<width>32</width>
	<height>32</height>
</image> 
<item>
  <title><![CDATA[Contact]]></title>
  <link>https://adminsave.wordpress.com/contact/</link>
  <pubDate>Tue, 13 Feb 2018 08:10:14 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?page_id=2</guid>
  <description/>
  <content:encoded><![CDATA[[contact-form][contact-field label="Name" type="name" required="1"/][contact-field label="Email" type="email" required="1"/][contact-field label="Comment" type="textarea" required="1"/][/contact-form]]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>2</wp:post_id>
  <wp:post_date>2018-02-13 08:10:14</wp:post_date>
  <wp:post_date_gmt>2018-02-13 08:10:14</wp:post_date_gmt>
  <wp:post_modified>2018-02-13 08:15:14</wp:post_modified>
  <wp:post_modified_gmt>2018-02-13 08:15:14</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>contact</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>3</wp:menu_order>
  <wp:post_type>page</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_headstart_post</wp:meta_key>
    <wp:meta_value><![CDATA[_hs_contact_page]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>sharing_disabled</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;i:0;}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>switch_like_status</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;i:0;}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wpas_skip_all_services</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_checklist_post_type</wp:meta_key>
    <wp:meta_value><![CDATA[_hs_contact_page]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_thumbnail_id</wp:meta_key>
    <wp:meta_value><![CDATA[8]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_g_feedback_shortcode</wp:meta_key>
    <wp:meta_value><![CDATA[[contact-field label="Name" type="name" required="1"/][contact-field label="Email" type="email" required="1"/][contact-field label="Comment" type="textarea" required="1"/]]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_g_feedback_shortcode_d19880efda6c951cf284409705cf9fd7503e0938</wp:meta_key>
    <wp:meta_value><![CDATA[[contact-field label="Name" type="name" required="1"/][contact-field label="Email" type="email" required="1"/][contact-field label="Comment" type="textarea" required="1"/]]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_g_feedback_shortcode_atts_d19880efda6c951cf284409705cf9fd7503e0938</wp:meta_key>
    <wp:meta_value><![CDATA[a:11:{s:2:"to";s:17:"teenoko@gmail.com";s:7:"subject";s:19:"[Adminsave] Contact";s:12:"show_subject";s:2:"no";s:6:"widget";i:0;s:2:"id";i:2;s:18:"submit_button_text";s:6:"Submit";s:14:"customThankyou";s:0:"";s:21:"customThankyouHeading";s:12:"Message Sent";s:21:"customThankyouMessage";s:30:"Thank you for your submission!";s:22:"customThankyouRedirect";s:0:"";s:10:"jetpackCRM";b:1;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Home]]></title>
  <link>https://adminsave.wordpress.com/2018/02/13/home/</link>
  <pubDate>Tue, 13 Feb 2018 08:15:14 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/2018/02/13/home/</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>6</wp:post_id>
  <wp:post_date>2018-02-13 08:15:14</wp:post_date>
  <wp:post_date_gmt>2018-02-13 08:15:14</wp:post_date_gmt>
  <wp:post_modified>2019-09-26 06:24:54</wp:post_modified>
  <wp:post_modified_gmt>2019-09-26 06:24:54</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>home</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>2</wp:menu_order>
  <wp:post_type>nav_menu_item</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="nav_menu" nicename="primary"><![CDATA[Primary]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_type</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_menu_item_parent</wp:meta_key>
    <wp:meta_value><![CDATA[0]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object_id</wp:meta_key>
    <wp:meta_value><![CDATA[6]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_target</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_classes</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;s:0:"";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_xfn</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_url</wp:meta_key>
    <wp:meta_value><![CDATA[/]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[]]></title>
  <link>https://adminsave.wordpress.com/2018/02/13/7/</link>
  <pubDate>Tue, 13 Feb 2018 08:15:14 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/2018/02/13/7/</guid>
  <description/>
  <content:encoded><![CDATA[ ]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>7</wp:post_id>
  <wp:post_date>2018-02-13 08:15:14</wp:post_date>
  <wp:post_date_gmt>2018-02-13 08:15:14</wp:post_date_gmt>
  <wp:post_modified>2019-09-26 06:24:55</wp:post_modified>
  <wp:post_modified_gmt>2019-09-26 06:24:55</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>7</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>3</wp:menu_order>
  <wp:post_type>nav_menu_item</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="nav_menu" nicename="primary"><![CDATA[Primary]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_type</wp:meta_key>
    <wp:meta_value><![CDATA[post_type]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_menu_item_parent</wp:meta_key>
    <wp:meta_value><![CDATA[0]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object_id</wp:meta_key>
    <wp:meta_value><![CDATA[2]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object</wp:meta_key>
    <wp:meta_value><![CDATA[page]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_target</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_classes</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;s:0:"";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_xfn</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_url</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Placeholder Image]]></title>
  <link>https://adminsave.wordpress.com/contact/placeholder-image/</link>
  <pubDate>Tue, 13 Feb 2018 08:15:15 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2018/02/person-smartphone-office-table.jpeg</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>8</wp:post_id>
  <wp:post_date>2018-02-13 08:15:15</wp:post_date>
  <wp:post_date_gmt>2018-02-13 08:15:15</wp:post_date_gmt>
  <wp:post_modified>2018-02-13 08:15:15</wp:post_modified>
  <wp:post_modified_gmt>2018-02-13 08:15:15</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>placeholder-image</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>2</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2018/02/person-smartphone-office-table.jpeg</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2018/02/person-smartphone-office-table.jpeg]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:900;s:6:"height";i:600;s:4:"file";s:108:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2018/02/person-smartphone-office-table.jpeg";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:24715;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Site-to-Site IPSec over MPLS VPN]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/</link>
  <pubDate>Mon, 14 Jan 2019 04:02:54 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=9</guid>
  <description/>
  <content:encoded><![CDATA[I want to start by saying I've over complicated everything because, well, it's my lab and it's fun for me. Depending on customer needs, a simple MPLS L2 VRF and an IPSEC tunnel on top would be sufficient, unless the sites also require internet service by the Service Provider delivering the VRF. In a simple MPLS VPN where the service simply connects sites to sites, the IP addresses are not advertised and could be a lot more secure than over the internet. Another advantage of utilizing an MPLS VPN is the ease of troubleshooting for the customer - the service traverses only one provider - not through the internet.

Lets take a deep dive at what an IPSEC tunnel looks like from an Enterprise perspective over a service provider MPLS L2/L3 VPN, not only from the CustomerSites but what actually happens inside the ServiceProvider network? In this case, we'll be going from a statically configured site, which is Site-A on the left (Topology A below). The configuration is a Static L3 MPLS VRF provisioned with a Nokia Routed-VPLS utilizing a VRRP for Router-Redundancy (R2/R3). This is a common configuration provided by Service Providers to customers.
The MPLS VRF goes across the MPLS Core Network and terminates on R6 and R5. Both of these sites are participating in the same VRF (VPRN 100) and have an eBGP session set up to the CustomerSiteB on the right side.

<strong><em>A few key notes:</em></strong>
I've set up an AS-Path prepend from the Customer Router at Site B facing the eBGP session on R5 at 175.175.1.1.
The Customer Site B router is currently load balancing across both eBGP neighbors to take full advantage of the dual-homed configuation.

<img class="  wp-image-10 aligncenter" src="https://adminsave.files.wordpress.com/2019/01/site-to-siteipsecovermpls.png" alt="site-to-siteipsecovermpls" width="841" height="517" />

<em>Topology A.</em>

<strong><em>MPLS Security?</em></strong>

An MPLS VPN (L2 or L3) Is secure to a certain degree. MPLS VPNs do not encrypt packets across the network, which makes it susceptible to eavesdropping by intruders.

Here is a wireshark capture without IPSEC between CustomerSiteA and R1. The traffic shows icmp request from CustomerSiteB to the Lo0 of CustomerSiteA.  As you can see, there is no encryption by the Service Provider and the service being delivered could easily be sniffed. How much do you trust your Service Provider?

<!--more-->

<img class="alignnone size-full wp-image-12" src="https://adminsave.files.wordpress.com/2019/01/wireshark-noencr.png" alt="wireshark-noencr.PNG" width="2281" height="891" />

Here is the Service Provider configuration for the VPRN on R2 for more context:

<!--more-->

<img class="alignnone size-full wp-image-15" src="https://adminsave.files.wordpress.com/2019/01/configr2.png" alt="configR2.PNG" width="989" height="1377" />

Nothing else too exciting on the other side. Here is a configuration snippet from R6. The same applies to R5, but substitue the correct subnets.

<img class="alignnone size-full wp-image-16" src="https://adminsave.files.wordpress.com/2019/01/r6vprn.png" alt="R6vprn.PNG" width="1263" height="1287" />

&nbsp;

<strong><em>Lets build the IPSEC Site-to-Site tunnel from CustomerSiteA to CustomerSiteB.</em></strong>

The interesting traffic from CustomerSiteA will be the LAN subnet 192.168.1.0/24 - The interesting traffic from CustomerSiteB will be the LAN subnet 172.16.1.0/24. We'll throw in the loopbacks as well.

<em>NOTE: Perhaps I'll go back and experiment with a DM-VPN as there are two public facing GW's on the customer routers. Will this work as a DMVPN? I'll find out later.</em>

For now, we'll build an IPSEC tunnel to one GW on CustomerSiteB. Technically, this is not utilizing the full redundancy of dual homed BGP sessions, which is just one of the many obstacles NE's have to deal with and what makes this so fun.<strong><em> We will use the 172.172.1.1/24  - R6 - connection for our IPSEC tunnel due to the current </em></strong>configuartion<strong> <em>(AS-PathPrepend).</em></strong>

PHASE 1 :: Isakamp Policy.

This is the bidriectional ISAKMP negotation of our tunnel. This policy must match on both customer routers, except for the Lifetime.
<ol>
	<li>Hash Algorithm</li>
	<li>Authentication</li>
	<li>Diffie-Hellman Group #</li>
	<li>Lifetime.</li>
	<li>Encryption Algorithm.</li>
</ol>
&nbsp;

<strong>Config snippet of our ISAKAMP policy. This is also applied to Site-B-GW-Router.
</strong>

---------------------------------------------------------------------------
Site-A-GW-Router#show run | se crypto

---------------------------------------------------------------------------
crypto isakmp policy 10
encr aes
hash sha256
authentication pre-share
group 5
Site-A-GW-Router#

<hr />

<strong>Next, the simple ISAKMP </strong>Peer / key<strong> to </strong>establish<strong> the tunnel. This should wrap up PHASE 1 - Configuration.</strong>

crypto isakmp key WowWhatAPassword! address 172.172.1.2

<strong>PHASE </strong>2 :<strong> Here we will establish the </strong>unidrectional<strong> channels between our IPSEC SA's - (Peers).  <em>This </em>is reminds<em> me of an MPLS LSP? Ring a Bell? </em></strong>Unidrection<em><strong> tunnels? ;)</strong> </em>

The transform set will match on both sides, here is the configuration:

crypto ipsec transform-set TSET esp-aes 256 esp-sha512-hmac
mode tunnel
<ul>
	<li>- Remember that a IPSec mode can be  set to two modes.
<ul>
	<li>Mode Tunnel
<ul>
	<li>Only the Packet Payload is encrypted across the tunnel.</li>
</ul>
</li>
	<li>Mode Tunnel
<ul>
	<li>The IPHeader and Payload are encrypted. Basically, the entire packet and this is the most secure AND default.</li>
</ul>
</li>
</ul>
</li>
</ul>
We're ready to move on and define our 'interesting' traffic. Lets create our access list to specify what traffic should trigger the IPSec tunnel. Remember, the local subnet first, heading to the remote subnet. <strong><em>DON'T FORGET THIS REQUIRES WILDCARD BITs. This got me a few times.</em></strong>

Take note of the name of the Access List. We'll need this for our crypto map to apply to our outbound interface.

Site-A-GW-Router#show run | se access-list
ip access-list extended VPN-TRAFFIC
permit ip 192.168.1.0 0.0.0.255 172.16.1.0 0.0.0.255
Site-A-GW-Router#

<em>Now, reverse this on the other side...</em>
Site-B-GW_Router#show run | se access-list
ip access-list extended VPN-TRAFFIC
permit ip 172.16.1.0 0.0.0.255 192.168.1.0 0.0.0.255

<strong>Almost there!</strong> Lets create our Crypto Map and apply this to our outbound interface. This will include the peer (Neighbor far-end public facing IP of CustomerSite-B), the Transform Set name from earlier (TSET) and we will identify the 'interesting' traffic to trigger the IPSEC tunnel, which we named VPN-TRAFFIC.

Again, this would match on the other side, but the peer address would be substituted for the Public Facing IP of CustomerSite-A.
Site-A-GW-Router#show run | se crypto map
crypto map VPN-MAP 100 ipsec-isakmp
set peer 172.172.1.2
set transform-set TSET
match address VPN-TRAFFIC
Site-A-GW-Router#

<strong>After thinking further on my earlier thought, would this require a DMVPN? I think we could simply add another crypto map and have a separate peer.</strong>

We are ALMOST DONE! - The final step: Adding the 'VPN-MAP' to the outbound interface on our CustomerRouters.

However, here is something I want to show you about MPLS VPN's without encryption which makes for a significant vulnerability regardings eavesdropping. Of course, we saw the snippet of the wireshark capture at the PE - to the CE. This is a vulnerable point, but what about inside the core? Although the Service Provider has a responsibility, there could be people who are using packet captures and are able to capture sensative traffic without an issue (Employees in general). MPLS makes dropping packet captures in the network VERY easy, which is great for troubleshooting! Traffic can be replicated in a number of ways -

I've built a packet capture on R1 which will replicate any traffic that is coming from the SAP/port facing the customer on R6. If you're interested in learning more on how to build mirror services on the Nokia platform, check out this video I've made a few months back.

https://www.youtube.com/watch?v=tIkdeghAUBo

Here is a snippet of the wireshark capture, mirroring traffic thats  still unencrypted. Remember, we haven't applied out VPN crypto map.

<img class="alignnone size-full wp-image-19" src="https://adminsave.files.wordpress.com/2019/01/vpnmirror.png" alt="vpnmirror.PNG" width="2091" height="819" />

I'll post a quick configuration of the Mirror service and debug config.

On R1 I plugged a Kali Linux box to port 1/1/3.

*A:R1&gt;config&gt;mirror&gt;mirror-dest# info
----------------------------------------------
remote-source
far-end 10.10.10.6
exit
sap 1/1/3 create
exit
no shutdown
<ul>
	<li>The far-end command specifies the System IP address of R6. This is specifing the remote source for the capture.</li>
</ul>
On R6:

*A:R6&gt;config&gt;mirror&gt;mirror-dest# info
----------------------------------------------
spoke-sdp 61:200 create
no shutdown
exit
no shutdown

Here, the mirror service simply specifies a SPOKE with a VC-ID attached to it, as any other service. This is directing all the mirrored traffic to R1 via this service (200).

Finally, our debug - this specifies the SOURCE port or SAP to mirror. Again, this could be either ingress or egress or both.

*A:R6# show debug
debug
mirror-source 200
port 1/1/1 egress ingress
no shutdown
exit
exit
*A:R6#

- Lets go back and apply our crypto map to our outbound interfaces and compare the mirror service traffic thats being replicated to our sniffer box.

On CustomerSite-B and Site-A I've applied 'crypto map VPN-MAP'

interface GigabitEthernet0/1
ip address 172.172.1.2 255.255.255.0
duplex auto
speed auto
media-type rj45
<strong>crypto map VPN-MAP</strong>
end

Now we can see our Phase 1  -

Site-B-GW_Router#show crypto ipsec sa

interface: GigabitEthernet0/1
Crypto map tag: VPN-MAP, local addr 172.172.1.2

protected vrf: (none)
<strong>local ident (addr/mask/prot/port): (172.16.1.0/255.255.255.0/0/0)</strong>
<strong>remote ident (addr/mask/prot/port): (192.168.1.0/255.255.255.0/0/0)</strong>
current_peer 77.77.77.28 port 500
PERMIT, flags={origin_is_acl,}
#pkts encaps: 0, #pkts encrypt: 0, #pkts digest: 0
#pkts decaps: 0, #pkts decrypt: 0, #pkts verify: 0
#pkts compressed: 0, #pkts decompressed: 0
#pkts not compressed: 0, #pkts compr. failed: 0
#pkts not decompressed: 0, #pkts decompress failed: 0
#send errors 0, #recv errors 0

<strong>local crypto endpt.: 172.172.1.2, remote crypto endpt.: 77.77.77.28</strong>
plaintext mtu 1500, path mtu 1500, ip mtu 1500, ip mtu idb GigabitEthernet0/1
current outbound spi: 0x0(0)
PFS (Y/N): N, DH group: none

Lets not forget to add static routes pointing where to send the interesting traffic.

<strong>Site-B-GW_Router(config)#ip route 192.168.1.0 255.255.255.0 77.77.77.28</strong>

I will do the same on the other side.

Now, the momemnt of truth. I've configured a device hanging off the CustomerSite-B Router with an ip address that's inside the local lan of 172.16.1.x, which should trigger the IPSEC tunnel.

The device has a default route going to the GW Router. Here is a snippet of the same mirror service showing traffic encapsulated from the customers internal network to the remote destination THROUGH the service provider.

<img class="alignnone size-full wp-image-20" src="https://adminsave.files.wordpress.com/2019/01/espencvrf.png" alt="espencvrf" width="2073" height="929" />

Remember, the Site-to-Site IPSec tunnel that we built only identifies specific traffic.

Make sure to correctly craft the access lists to tunnel your traffic. So, there ya have it. The IPSEC security going over the MPLS VPN.

This was a fun lab for me. I've been putting myself a lot in the shoes of the customer - from an enterprise perspective as I take a deep dive into my CCNA Security studies. It's made me think aboout a lot of different scenarios and I hope to create more labs and blog post alike.

&nbsp;

Thanks,

&nbsp;

Hugo Tinoco

&nbsp;]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>9</wp:post_id>
  <wp:post_date>2019-01-14 04:02:54</wp:post_date>
  <wp:post_date_gmt>2019-01-14 04:02:54</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 04:05:31</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 04:05:31</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>site-to-site-ipsec-over-mpls-vpn</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[26506778680]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1547438717]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[site-to-siteipsecovermpls]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/site-to-siteipsecovermpls/</link>
  <pubDate>Sun, 13 Jan 2019 23:38:14 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/site-to-siteipsecovermpls.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>10</wp:post_id>
  <wp:post_date>2019-01-13 23:38:14</wp:post_date>
  <wp:post_date_gmt>2019-01-13 23:38:14</wp:post_date_gmt>
  <wp:post_modified>2019-01-13 23:38:14</wp:post_modified>
  <wp:post_modified_gmt>2019-01-13 23:38:14</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>site-to-siteipsecovermpls</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/site-to-siteipsecovermpls.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/site-to-siteipsecovermpls.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2393;s:6:"height";i:1473;s:4:"file";s:102:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/site-to-siteipsecovermpls.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:242770;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[wireshark-noencr]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/wireshark-noencr/</link>
  <pubDate>Mon, 14 Jan 2019 00:07:31 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/wireshark-noencr.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>12</wp:post_id>
  <wp:post_date>2019-01-14 00:07:31</wp:post_date>
  <wp:post_date_gmt>2019-01-14 00:07:31</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 00:07:31</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 00:07:31</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>wireshark-noencr</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/wireshark-noencr.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/wireshark-noencr.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2281;s:6:"height";i:891;s:4:"file";s:93:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/wireshark-noencr.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:85108;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[configr2]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/configr2/</link>
  <pubDate>Mon, 14 Jan 2019 00:12:54 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/configr2.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>15</wp:post_id>
  <wp:post_date>2019-01-14 00:12:54</wp:post_date>
  <wp:post_date_gmt>2019-01-14 00:12:54</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 00:12:54</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 00:12:54</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>configr2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/configr2.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/configr2.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:989;s:6:"height";i:1377;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/configr2.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:62676;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[r6vprn]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/r6vprn/</link>
  <pubDate>Mon, 14 Jan 2019 00:22:38 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/r6vprn.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>16</wp:post_id>
  <wp:post_date>2019-01-14 00:22:38</wp:post_date>
  <wp:post_date_gmt>2019-01-14 00:22:38</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 00:22:38</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 00:22:38</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>r6vprn</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/r6vprn.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/r6vprn.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1263;s:6:"height";i:1287;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/r6vprn.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:49691;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[vpnmirror]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/vpnmirror/</link>
  <pubDate>Mon, 14 Jan 2019 03:05:28 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/vpnmirror.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>19</wp:post_id>
  <wp:post_date>2019-01-14 03:05:28</wp:post_date>
  <wp:post_date_gmt>2019-01-14 03:05:28</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 03:05:28</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 03:05:28</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>vpnmirror</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/vpnmirror.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/vpnmirror.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2091;s:6:"height";i:819;s:4:"file";s:86:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/vpnmirror.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:172687;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[espencvrf]]></title>
  <link>https://adminsave.wordpress.com/2019/01/14/site-to-site-ipsec-over-mpls-vpn/espencvrf/</link>
  <pubDate>Mon, 14 Jan 2019 03:59:01 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/espencvrf.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>20</wp:post_id>
  <wp:post_date>2019-01-14 03:59:01</wp:post_date>
  <wp:post_date_gmt>2019-01-14 03:59:01</wp:post_date_gmt>
  <wp:post_modified>2019-01-14 03:59:01</wp:post_modified>
  <wp:post_modified_gmt>2019-01-14 03:59:01</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>espencvrf</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>9</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/espencvrf.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/espencvrf.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2073;s:6:"height";i:929;s:4:"file";s:86:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/espencvrf.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:152251;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Nokia: Service Router - Default Originate Replica (Cisco BGP Command)]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/</link>
  <pubDate>Mon, 28 Jan 2019 14:56:48 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=24</guid>
  <description/>
  <content:encoded><![CDATA[A simple overview on how to re-create the Cisco BGP 'default-originate' command for a default route advertisement from a Nokia Service Provider perspective (IPv4/IPv6.)

There are several ways to advertise a default route in the Cisco environment - here is a quick summary:
<ol>
	<li>The first option is what we will attempt to replicate from a Nokia Service Router perspective. Advertising a default route PER BGP Peer instance. This is a more controlled way of advertising.
'neighbor X.Y.X.Y default-originate' Again, this doesn't require an active default route to be present or redistributed. This will generate and propagate to the specified neighbor only.</li>
	<li>Adding a "network 0.0.0.0" command under the address family for your BGP routing instance to advertise to ALL neighbors. Remember: This requires an present /0 route in the FIB.</li>
	<li>Redistribution - from a currently active default route in the routing table of an IGP. Hence, redistribute - (Almost the same as option 2)</li>
	<li>"Default-information originate" - This command will GENERATE a default route to ALL BGP neighbors under the family. An active default route is NOT required to be present under another routing instance in order to propagate the new default route to all BGP peers</li>
</ol>
-----------------------------

The topology will be a Cisco edge device dual-homed to a Nokia PE devices from ISP XYZ. NOTE: There is currently no route map prepending the AS, but we are load balancing.

&nbsp;

The topology will be a Cisco edge device dual-homed to a Nokia PE devices from ISP XYZ. NOTE: There is currently no route map prepending the AS, but we are load balancing.

<img class="alignnone  wp-image-26" src="https://adminsave.files.wordpress.com/2019/01/topology-1.png" alt="topology" width="430" height="378" />

Here is the configuration from the Cisco Edge Device (CustomerSiteB):

<img class="alignnone  wp-image-27" src="https://adminsave.files.wordpress.com/2019/01/capture.png" alt="Capture.PNG" width="436" height="233" />

<em>Not much in configuration. Standard BGP session to an ISP (without authentication)  - <strong>Note</strong> the <strong>BFD</strong> configuration for the peers for </em>a fast<em> failover. Will do a blog post about this in the upcoming weeks, which I will demonstrate the<strong> fast-external-</strong></em>fallover<em> command as well.</em>

Currently, we are not learning any BGP routes from our ISP.  Here is the configuration from the Nokia PE devices R5/R6.  (Only showing one side, as they are extremely similar, with only varying subnets)

<img class="alignnone  wp-image-28" src="https://adminsave.files.wordpress.com/2019/01/vprn.png" alt="vprn" width="422" height="345" />

Creating a <strong>Prefix-List:</strong>

Lets begin the process to simulate the default-route advertisement.

<em><strong>Note: add </strong></em>prefix :<em><strong>:/0 exact for IPv6 &amp; family ipv6 under the policy statement.</strong></em>

We'll start by configuring a prefix list on our PE devices (R5/R6):<strong><img class="alignnone  wp-image-29" src="https://adminsave.files.wordpress.com/2019/01/pflist.png" alt="pflist.PNG" width="420" height="74" /></strong>

Next, we create a <strong>Policy Statement:</strong>

<img class="alignnone  wp-image-30" src="https://adminsave.files.wordpress.com/2019/01/default.png" alt="default.PNG" width="415" height="215" />

<strong><em>Make sure to COMMIT the changes!</em> </strong>

<strong>Adding the policy statement under the BGP configuration inside the VRFs.</strong>

/configure service vprn 100 <span style="color:#ff0000;"># Example VRF</span>
<ul>
	<li><span style="color:#ff0000;"> #Create a Black Hole/ Null Route to discard any unwanted/un-routable traffic.</span>
<strong>static-route ::/0 black-hole</strong>
<strong>static-route 0.0.0.0/0 black-hole</strong></li>
</ul>
Add the new "<strong>Default Originate" policy statement we created earlier to the the BGP Group of your customer as an export statement. </strong>

<img class="alignnone  wp-image-31" src="https://adminsave.files.wordpress.com/2019/01/export.png" alt="export.PNG" width="412" height="273" />

At this point we should be advertising ONLY a default route to our BGP neighbor.

From our PE device, a quick "show router 100 bgp neighbor 175.175.1.2 advertised-route" will display the following:

<img class="alignnone  wp-image-32" src="https://adminsave.files.wordpress.com/2019/01/advertised.png" alt="advertised.PNG" width="442" height="111" />

I will go ahead and replicate this policy statement on both VPRN's on R5/R6 - Our Nokia PE devices for the Dual-Homed BGP Customer and apply the export statement to the BGP peer.

A look at "show ip route bgp" on the CustomerSiteB Cisco edge device shows us the two paths (thanks to the the load balancing, 'maximum-paths 2' configuration):

<img class="alignnone  wp-image-33" src="https://adminsave.files.wordpress.com/2019/01/ecmp.png" alt="ecmp.PNG" width="508" height="59" />

Now we are learning a default route from both uplinks to our dual-homed ISP connection. Failover should be seamless at this point, although having two default routes is prob not what you want - this is a simple example of how to accomplish a default-originate command, which doesn't exist on the Nokia environment.]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>24</wp:post_id>
  <wp:post_date>2019-01-28 14:56:48</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:56:48</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 15:16:32</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 15:16:32</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>nokia-service-router-default-originate-replica-cisco-bgp-command</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1548687412]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[27019335735]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[topology]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/topology/</link>
  <pubDate>Mon, 28 Jan 2019 14:24:22 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/topology.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>25</wp:post_id>
  <wp:post_date>2019-01-28 14:24:22</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:24:22</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:24:22</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:24:22</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>topology</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/topology.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/topology.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:733;s:6:"height";i:669;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/topology.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:44343;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[topology]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/topology-2/</link>
  <pubDate>Mon, 28 Jan 2019 14:26:13 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/topology-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>26</wp:post_id>
  <wp:post_date>2019-01-28 14:26:13</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:26:13</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:26:13</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:26:13</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>topology-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/topology-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/topology-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:663;s:6:"height";i:583;s:4:"file";s:87:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/topology-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:40660;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[capture]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/capture/</link>
  <pubDate>Mon, 28 Jan 2019 14:26:58 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/capture.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>27</wp:post_id>
  <wp:post_date>2019-01-28 14:26:58</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:26:58</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:26:58</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:26:58</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>capture</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/capture.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/capture.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:915;s:6:"height";i:489;s:4:"file";s:84:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/capture.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:54805;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[vprn]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/vprn/</link>
  <pubDate>Mon, 28 Jan 2019 14:33:56 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/vprn.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>28</wp:post_id>
  <wp:post_date>2019-01-28 14:33:56</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:33:56</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:33:56</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:33:56</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>vprn</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/vprn.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/vprn.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:859;s:6:"height";i:703;s:4:"file";s:81:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/vprn.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:53680;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[pflist]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/pflist/</link>
  <pubDate>Mon, 28 Jan 2019 14:36:52 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/pflist.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>29</wp:post_id>
  <wp:post_date>2019-01-28 14:36:52</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:36:52</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:36:52</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:36:52</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>pflist</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/pflist.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/pflist.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:801;s:6:"height";i:141;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/pflist.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:5846;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[default]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/default/</link>
  <pubDate>Mon, 28 Jan 2019 14:38:09 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/default.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>30</wp:post_id>
  <wp:post_date>2019-01-28 14:38:09</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:38:09</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:38:09</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:38:09</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>default</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/default.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/default.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:815;s:6:"height";i:421;s:4:"file";s:84:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/default.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:31332;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[export]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/export/</link>
  <pubDate>Mon, 28 Jan 2019 14:48:07 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/export.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>31</wp:post_id>
  <wp:post_date>2019-01-28 14:48:07</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:48:07</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:48:07</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:48:07</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>export</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/export.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/export.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:889;s:6:"height";i:589;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/export.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:44247;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[advertised]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/advertised/</link>
  <pubDate>Mon, 28 Jan 2019 14:49:22 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/advertised.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>32</wp:post_id>
  <wp:post_date>2019-01-28 14:49:22</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:49:22</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:49:22</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:49:22</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>advertised</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/advertised.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/advertised.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1299;s:6:"height";i:327;s:4:"file";s:87:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/advertised.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:27629;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[ecmp]]></title>
  <link>https://adminsave.wordpress.com/2019/01/28/nokia-service-router-default-originate-replica-cisco-bgp-command/ecmp/</link>
  <pubDate>Mon, 28 Jan 2019 14:52:43 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/ecmp.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>33</wp:post_id>
  <wp:post_date>2019-01-28 14:52:43</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:52:43</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:52:43</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:52:43</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>ecmp</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>24</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/ecmp.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/ecmp.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:853;s:6:"height";i:99;s:4:"file";s:81:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/ecmp.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:9901;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[capture]]></title>
  <link>https://adminsave.wordpress.com/capture-2/</link>
  <pubDate>Mon, 28 Jan 2019 14:58:48 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/capture-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>37</wp:post_id>
  <wp:post_date>2019-01-28 14:58:48</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:58:48</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:58:48</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:58:48</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>capture-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/capture-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/capture-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:122;s:6:"height";i:165;s:4:"file";s:86:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/capture-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:3745;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[cropped-capture-1]]></title>
  <link>https://adminsave.wordpress.com/cropped-capture-1/</link>
  <pubDate>Mon, 28 Jan 2019 14:58:58 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/01/cropped-capture-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>38</wp:post_id>
  <wp:post_date>2019-01-28 14:58:58</wp:post_date>
  <wp:post_date_gmt>2019-01-28 14:58:58</wp:post_date_gmt>
  <wp:post_modified>2019-01-28 14:58:58</wp:post_modified>
  <wp:post_modified_gmt>2019-01-28 14:58:58</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>cropped-capture-1</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/01/cropped-capture-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/cropped-capture-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:122;s:6:"height";i:122;s:4:"file";s:94:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/01/cropped-capture-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:3313;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[DDoS Mitigation - RTBH - Blackhole Community]]></title>
  <link>https://adminsave.wordpress.com/2019/04/01/ddos-mitigation-rtbh-blackhole-community/</link>
  <pubDate>Mon, 01 Apr 2019 04:38:18 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=41</guid>
  <description/>
  <content:encoded><![CDATA[I'm working on a mini-series of videos to demonstrate a common practice with Service Provider networks in regards to DDoS Mitigation. A quick google search and you can find PDF documents from ISP's all over the world with detailed BGP communities they accept and how they manipulate traffic through their particular AS.

A BGP community string is simply a way to control policy routing through your upstream provider network. The community string in which I've been concentrating on is the common "Blackhole" community. This community is advertised to upstream providers to instruct the ISP to discard all traffic to the destination prefix before it is routed to the customer. It is common practice to allow this community. Inquire with your provider for the BGP community document to better understand the way in which you can manipulate  upstream traffic to your advantage.

This lab was mostly rooted from personal projects I'm undergoing but also a great excuse to start pushing the limits of my new EVE-NG server.  I'm really enjoying the interface and the ease-of-use.

Here is the part 1 of the video series. More to come, stay tuned..!

https://youtu.be/ot4QUqgunBc]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>41</wp:post_id>
  <wp:post_date>2019-04-01 04:38:18</wp:post_date>
  <wp:post_date_gmt>2019-04-01 04:38:18</wp:post_date_gmt>
  <wp:post_modified>2019-04-01 04:38:18</wp:post_modified>
  <wp:post_modified_gmt>2019-04-01 04:38:18</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>ddos-mitigation-rtbh-blackhole-community</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[29260981960]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1554093504]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[P router]]></title>
  <link>https://adminsave.wordpress.com/p-router/</link>
  <pubDate>Fri, 19 Apr 2019 03:14:28 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/04/p-router.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>44</wp:post_id>
  <wp:post_date>2019-04-19 03:14:28</wp:post_date>
  <wp:post_date_gmt>2019-04-19 03:14:28</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 03:14:28</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 03:14:28</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>p-router</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/04/p-router.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/p-router.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:129;s:6:"height";i:123;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/p-router.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:2894;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[LinkedIn]]></title>
  <link>https://adminsave.wordpress.com/linkedin/</link>
  <pubDate>Fri, 19 Apr 2019 03:23:53 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?page_id=45</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>45</wp:post_id>
  <wp:post_date>2019-04-19 03:23:53</wp:post_date>
  <wp:post_date_gmt>2019-04-19 03:23:53</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 03:23:53</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 03:23:53</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>linkedin</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>page</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_customize_changeset_uuid</wp:meta_key>
    <wp:meta_value><![CDATA[7b0ca278-b539-47e3-a6ce-c32611c80005]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/48/</link>
  <pubDate>Fri, 19 Apr 2019 03:23:55 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/2019/04/19/48/</guid>
  <description/>
  <content:encoded><![CDATA[ ]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>48</wp:post_id>
  <wp:post_date>2019-04-19 03:23:55</wp:post_date>
  <wp:post_date_gmt>2019-04-19 03:23:55</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 03:23:55</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 03:23:55</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>48</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>nav_menu_item</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="nav_menu" nicename="links"><![CDATA[Links]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_type</wp:meta_key>
    <wp:meta_value><![CDATA[post_type]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_menu_item_parent</wp:meta_key>
    <wp:meta_value><![CDATA[0]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object_id</wp:meta_key>
    <wp:meta_value><![CDATA[45]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object</wp:meta_key>
    <wp:meta_value><![CDATA[page]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_target</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_classes</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;s:0:"";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_xfn</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_url</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[LinkedIn]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/linkedin/</link>
  <pubDate>Fri, 19 Apr 2019 03:24:00 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/2019/04/19/linkedin/</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>50</wp:post_id>
  <wp:post_date>2019-04-19 03:24:00</wp:post_date>
  <wp:post_date_gmt>2019-04-19 03:24:00</wp:post_date_gmt>
  <wp:post_modified>2019-09-26 06:24:56</wp:post_modified>
  <wp:post_modified_gmt>2019-09-26 06:24:56</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>linkedin</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>4</wp:menu_order>
  <wp:post_type>nav_menu_item</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="nav_menu" nicename="primary"><![CDATA[Primary]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_type</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_menu_item_parent</wp:meta_key>
    <wp:meta_value><![CDATA[0]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object_id</wp:meta_key>
    <wp:meta_value><![CDATA[50]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_target</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_classes</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;s:0:"";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_xfn</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_url</wp:meta_key>
    <wp:meta_value><![CDATA[https://www.linkedin.com/in/hugo-tinoco]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[DDoS - RTBH Part 2.]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/ddos-rtbh-part-2/</link>
  <pubDate>Fri, 19 Apr 2019 03:30:26 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=53</guid>
  <description/>
  <content:encoded><![CDATA[This video goes over the configuration for the service provider 7750 SR down to the customer's Cisco IOS router utilizing Route-Maps with attached communities to send upstream to the service provider.

https://www.youtube.com/watch?v=ExYAvRzpQ0E]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>53</wp:post_id>
  <wp:post_date>2019-04-19 03:30:26</wp:post_date>
  <wp:post_date_gmt>2019-04-19 03:30:26</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 03:30:26</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 03:30:26</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>ddos-rtbh-part-2</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1555644629]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[29919973781]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Software Defined - BGP (ExaBGP, Postman, FLASK, Python3)]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/software-defined-bgp-exabgp-postman-flask-python3/</link>
  <pubDate>Fri, 19 Apr 2019 04:54:25 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=55</guid>
  <description/>
  <content:encoded><![CDATA[Hello,

I am currently studying for the BGP exam of the Nokia SRA certification path - while doing so, I have found an interesting way to manipulate my BGP routes - I gotta give credit to ThePacketGeek for all their information which made this possible for me.

I'm utilizing several different tools to quickly advertise routes into my EVE-NG Lab topology, which are the following:
<ol>
	<li>Exa-BGP : <a href="https://github.com/Exa-Networks/exabgp" target="_blank" rel="noopener">Exa-Networks GitHub</a></li>
	<li>PostMan : <a href="https://www.getpostman.com/" target="_blank" rel="noopener">PostMan</a></li>
	<li>RSUB to quickly edit text from through ssh tunel on a remote server : <a href="https://stackoverflow.com/questions/37458814/how-to-open-remote-files-in-sublime-text-3" target="_blank" rel="noopener">Rsub</a></li>
	<li>Python3</li>
	<li>Ubuntu VM</li>
	<li>FLASK</li>
</ol>
I've installed UbuntuVM which is on the same network as my EVE-NG topology. Assuming you have a general understanding of the architecture, I'm going to dive right in. I've got a Nokia 7750 SR - VPRN with a dot1q sap facing a switch which allows a TCP connection to establish across the link to my VM hosting ExaBGP - All of this is hosted on the same physical server.
<ul>
	<li>ExaBGP
<ul>
	<li>Install ExaBGP with PIP3.</li>
	<li>Create a configuration file for  ExaBGP to connect to your router.
<ul>
	<li>sudo vi /etc/exabgp/conf.ini</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>--------------------------------------------------------------------------------------------------------------------------------
<p style="text-align:justify;">process announce-routes {
run /usr/bin/python3.6m /home/htinoco/exampl.py;
encoder json;
}
process http-api {
run /usr/bin/python3.6m /home/htinoco/exabg-flask/http_api.py;
encoder json;
}</p>
neighbor 10.0.0.200 { # Remote Peer
router-id 10.0.0.25; # Local router-id
local-address 10.0.0.25; # Local update-source
local-as 65001; # local AS
peer-as 65000; # Peer's AS

api {
processes [announce-routes, http-api]; #Running multiple processes, python3 script and HTTP API(FLASK)

}</blockquote>

<hr />

&nbsp;

Here is the python script I'm calling under the 'announce-routes' process, which is ponting to /home/htinoco/exampl.py;
<blockquote>#!/usr/bin/env python3
#Change this to the correct python version you're using.

from __future__ import print_function

from sys import stdout
from time import sleep

#Static routes I want to always announce when I start ExaBGP
messages = [
'announce route 250.10.0.0/24 next-hop self',
'announce route 120.20.0.0/24 next-hop self',
'announce route 110.20.0.0/24 next-hop self',
'announce route 150.20.0.1/24 next-hop self',
'announce route 100.10.1.0/24 next-hop self',
]

sleep(5)

#Iterate through messages
for message in messages:
stdout.write(message + '\n')
stdout.flush()
sleep(1)

#Loop endlessly to allow ExaBGP to continue running
while True:
sleep(1)</blockquote>
Now, there is also another process I'm calling, which is my FLASK app.

Here is my flask app:
<blockquote>from flask import Flask, request
from sys import stdout

app = Flask(__name__)

# Setup a command route to listen for prefix advertisements
@app.route('/', methods=['POST'])
def command():
command = request.form['command']
stdout.write('%s\n' % command)
stdout.flush()
return '%s\n' % command

@app.route('/shutdown', methods=['POST'])
def shutdown():
shutdown_server()
return 'Server shutting down...'

#The param localhost is applied so we can reach the api remotely -

if __name__ == '__main__':
app.run(host="localhost", port=7000, debug=True)

#Example POSTS using postman / (BODY/KEY:COMMAND/VALUE=)
#announce route 100.10.0.0/16 next-hop 172.16.2.202 med 500
#announce route 100.20.0.0/16 next-hop 172.16.2.202 origin incomplete as-path [100 200 400]
#announce route 100.30.0.0/16 next-hop 172.16.2.202 med 200 origin egp
#announce route 100.40.0.0/16 next-hop 172.16.1.2/32 community [65000:666]</blockquote>
&nbsp;

We are ready to roll! - navigate to /etc/exabgp and lets launch exabgp using the conf.ini file we created -

htinoco@ubuntu-server:/etc/exabgp$ <strong>exabgp conf.ini</strong>

&nbsp;
<blockquote>Here is the output after starting exabgp:

<strong>: * Serving Flask app "http_api" ( lazy loading )</strong>
<strong>* Running on http://0:7000/ (Press CTRL+C to quit)</strong>
<strong>* Restarting with stat</strong>
<strong>* Debugger is active!</strong>
<strong>* Debugger PIN: 157-288-415</strong>
04:35:45 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 100.10.0.0/24 next-hop self
04:35:46 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 200.20.0.0/24 next-hop self
04:35:47 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 210.20.0.0/24 next-hop self
04:35:48 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 220.20.0.1/24 next-hop self
04:35:49 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 240.20.1.1/24 next-hop self</blockquote>
We see the static routes advertisted to our BGP neighbor, from our python script.

We can now open up Postman and POST new routes as we please.

<img class="alignnone size-full wp-image-56" src="https://adminsave.files.wordpress.com/2019/04/postman.png" alt="postman" width="2459" height="745" />

In this example, I'm using "POST" and KEY "command" (review the flask-app code)

to annoucne the route : announce route 44.44.24.4/32 next-hop self community [65000:666]

The out put from exabg tail process:
<blockquote>04:40:10 | 2699 | api | route added to neighbor 10.0.0.200 local-ip 10.0.0.25 local-as 65001 peer-as 65000 router-id 10.0.0.25 family-allowed in-open : 44.44.23.4/32 next-hop self community 65000:666</blockquote>
Now lets verify that I am seeing this route on my 7750 SR router that has the BGP session established with ExaBGP.
<blockquote><img class="alignnone size-full wp-image-57" src="https://adminsave.files.wordpress.com/2019/04/32.png" alt="32.PNG" width="1599" height="1250" /></blockquote>
There they are! The static routes from our python script and the freshly announced /32 route utilizing the API POST method.

Now we have a SUPER EASY! way to pump routes into our lab environemnt (Or production) in order to test policies, verify proper traffic patterns, correct route installment, etc. The possibilities are endless! I am going to use this to for many other tests, such as applying MED, route manipulation with communities and just more general policy based routing.]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>55</wp:post_id>
  <wp:post_date>2019-04-19 04:54:25</wp:post_date>
  <wp:post_date_gmt>2019-04-19 04:54:25</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 04:54:25</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 04:54:25</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>software-defined-bgp-exabgp-postman-flask-python3</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1555649668]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[29921785106]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[postman]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/software-defined-bgp-exabgp-postman-flask-python3/postman/</link>
  <pubDate>Fri, 19 Apr 2019 04:40:50 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/04/postman.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>56</wp:post_id>
  <wp:post_date>2019-04-19 04:40:50</wp:post_date>
  <wp:post_date_gmt>2019-04-19 04:40:50</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 04:40:50</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 04:40:50</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>postman</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>55</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/04/postman.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/postman.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2459;s:6:"height";i:745;s:4:"file";s:84:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/postman.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:79822;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[32]]></title>
  <link>https://adminsave.wordpress.com/2019/04/19/software-defined-bgp-exabgp-postman-flask-python3/attachment/32/</link>
  <pubDate>Fri, 19 Apr 2019 04:45:38 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/04/32.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>57</wp:post_id>
  <wp:post_date>2019-04-19 04:45:38</wp:post_date>
  <wp:post_date_gmt>2019-04-19 04:45:38</wp:post_date_gmt>
  <wp:post_modified>2019-04-19 04:45:38</wp:post_modified>
  <wp:post_modified_gmt>2019-04-19 04:45:38</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>32</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>55</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/04/32.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/32.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1599;s:6:"height";i:1250;s:4:"file";s:79:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/04/32.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:105780;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Dual ISPs BGP - Palo Alto Networks]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/</link>
  <pubDate>Sun, 09 Jun 2019 10:13:30 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=59</guid>
  <description/>
  <content:encoded><![CDATA[&nbsp;

[caption id="attachment_61" align="alignnone" width="2061"]<img class="alignnone size-full wp-image-61" src="https://adminsave.files.wordpress.com/2019/06/topology-1.png" alt="Topology" width="2061" height="997" /> Network Topology[/caption]

&nbsp;

First things first! I passed the BGP Exam for the Nokia SRA Certification. I am now planning to deviate a bit and obtain my Sec+ and see where that takes me.. Anyways..

I've been very interested in Palo Alto Networks lately and I'm low-key starting to think about the certification path for PA.  I want to take some time and go over a Dual ISP connection utilizing a PA at the edge. I'm hoping to provide some insight from both a Service Provider  and Enterprise standpoint. The goal is to have a highly redundant WAN connection utilizing the PA.

Something I want to start keeping in mind:
<table id="table-as-numbers-2" class="sortable" style="height:113px;" width="565">
<tbody>
<tr>
<td align="center">64496 - 64511</td>
<td>16 bit</td>
<td>Reserved for use in documenation &amp; sample code.</td>
<td>[<a href="http://www.iana.org/go/rfc5398">RFC5398</a>]</td>
</tr>
</tbody>
</table>
Topology:

ISP 1 ( AS 64511 ) will be adveritising a default-route via 172.16.65.0/31 interconnect with the PA on eth1/4.

ISP 2 ( AS 64496 ) will be adveritising a default-route via 172.16.64.0/31 interconnect with the PA on eth1/1.

The Enterprise LAN will be peering with the PA via iBGP on Gi0/0 and eth1/7 on the PA from Autonomous System 64500

----------------------------------------------------------------------------------------------------------------------------------------------------------------

From ISP 1 - a VPRN (VRF) 100 is configured, advertising a default-route.

From ISP 2 - a VPRN (VRF) 200 is configured, advertising a default-route.

Here is a snippet from the Nokia VRF that's providing internet service connection to the Palo Alto. A similar configuration exisist on the ISP 1 router.

<img class="alignnone  wp-image-65" src="https://adminsave.files.wordpress.com/2019/06/nokiabgp.png" alt="nokiabgp.PNG" width="393" height="368" />
<p style="text-align:justify;">----------------------------------------------------------------------------------------------------------------------------------------------------------------</p>
From the Palo Alto - The initial steps to take are the following:

1. Create an "Untrust" zone. This zone will be facing the Internet (ISP1 &amp; ISP2).

<span style="color:#008080;">Normally, I would suggest micro-segmenting these zones, but this requires a bit more policy creation. </span>Example<span style="color:#008080;"> would be, 1 zone for ISP 1 and a different zone for ISP 2 for an absolute zero-trust architecture.</span>

2. Create a Management Profile which simply allows ICMP (pings) for troubleshooting and verification purposes.

Here is what the Layer 3 Interfaces look like:

<img class="alignnone size-full wp-image-62" src="https://adminsave.files.wordpress.com/2019/06/interfaces-pa.png" alt="interfaces-PA" width="2782" height="389" />

We should have IP connectivity between our Palo-Alto and both of our ISP's! We're officially connected to the internet... sort of.

Now for the fun stuff, BGP connections!

Lets start with the Palo-Altos.
<ol>
	<li>Select the  "Virtual Routers' setion under the Network tab.</li>
	<li>Select the "BGP" tab.</li>
	<li>ENABLE the BGP protocol by checking the box.</li>
	<li>Assign a Router ID. This can be one of the two IP's on the interfaces facing our WAN services or a loopback (preffered).</li>
	<li>Input your local AS Number.</li>
	<li><strong>Make sure to UN-CHECK "Reject Default Route" </strong>
<ol>
	<li>Both ISP's will be advertising us Default-Routes. We'll select one with BGP techniqures as a primary.</li>
</ol>
</li>
	<li><strong>Make sure to CHECK "Install Route"</strong>
<ol>
	<li>This is necessary if we want to install routes from BGP / Local FIB into the Global Routing Table on the Palo Alto.</li>
</ol>
</li>
	<li>Depending on what model Palo-Alto you have, I would suggest creating a BFD profile and enabling this on your WAN connection for a fast-fail over detection to minimize downtime for your internal users.
<ol>
	<li>To create a BFD Profile:
<ol>
	<li>Network &gt; Network Profiles &gt; BFD Profile.</li>
</ol>
</li>
</ol>
</li>
	<li>This should be enough for the "General" Tab.</li>
</ol>
<strong>let's move over to the "Peer Group"</strong>
<ol>
	<li>Add a new Peer Group, lets call this ISP 1 - Re-create the steps for ISP 2.
<ol>
	<li>Name: ISP 1</li>
	<li>Type: EBGP</li>
</ol>
</li>
	<li>Add a new peer.
<ol>
	<li>Name: WAN-ISP-1</li>
	<li>Peer-AS: 64511</li>
	<li>Select the appropriate Interface / IP Address</li>
	<li>Input the appropriate /31 peer IP of the WAN connection.</li>
	<li>Under Advanced, make sure the Inherit Protocol's Global BFD Porifle is selected.</li>
	<li>Select OK and commit.</li>
</ol>
</li>
</ol>
Here is what the BGP Peer Group section should look like at this point:

<img class="alignnone size-full wp-image-63" src="https://adminsave.files.wordpress.com/2019/06/bgp.png" alt="bgp.PNG" width="2283" height="701" />

Now, verify our BFD sessions..

<img class="alignnone size-full wp-image-63" src="https://adminsave.files.wordpress.com/2019/06/bgp.png" alt="bgp" width="2283" height="701" />

All looks good!  Lets verify we're seeing a default-route from both peers:

<img class="alignnone size-full wp-image-64" src="https://adminsave.files.wordpress.com/2019/06/def.png" alt="def" width="2291" height="613" />

From the Local-RIB (And the Route Table) under the "More Runtime Stats" we are installing the default-route from our peer at ISP 1 - 172.16.65.0.

What if that peer is a 1G connection, but our Peer at ISP 2 should be our Primary WAN interface, as it's a 10G interface? Let's play with BGP now.

First, lets make sure all our outgoing traffic is going out or preffered exit path ( ISP 2) - let's change our Local Pref on routes from ISP 2 to be more prefferd over ISP 1.

Navigate to BGP &gt; Import and Add a new policy.
<ol>
	<li>Create a new rule that's used by ISP-2.</li>
	<li>Under the Match tab, select the "From Peer' - "WAN-ISP-2."</li>
	<li>Unde the Action tab, up the Local Preference to 200 and select OK .</li>
	<li>Repeat the steps above and hard set the LP to 100 on WAN-ISP-1.</li>
	<li>Commit and let's compare the route-table from our previous snippet.</li>
</ol>
Here is the Local-RIB, selecting the default-route from ISP-2.

<img class="alignnone size-full wp-image-68" src="https://adminsave.files.wordpress.com/2019/06/newrib-1.png" alt="newrib.PNG" width="2276" height="594" />

And verifying the Global Route Table as our preffered exit point:

<img class="alignnone size-full wp-image-69" src="https://adminsave.files.wordpress.com/2019/06/rt-pref-1.png" alt="rt-pref" width="2277" height="886" />

Looks good! All traffic is now routing out 172.16.64.0, which is our preffered 10G WAN interface to ISP-2.

Now how do we influence traffic to come into our AS via ISP 2 in hopes of avoiding asymmetrical routing? Well.. we can prepend if we're advertising routes or advertise a more specific route to the prefferred neighbor and aggregate the routes advertised to the less preffered neighbor. The MED values are not helpful in this case, as we are peering with two separate providers.

We won't worry about this for now, as we are not adveritisng any public routes to our providers, we simply need internet for our business.

Lets go ahead and redestribute the default route to our Enterprise core router.

But first.. lets peer with it.

I established a peering session with our Enterprise router and set it inside the "Trust" zone.
<ul>
	<li>This is just an example design. Depending on the business, a Router will be at the edge and the firewall will sit behind it which is not true in this scenario.</li>
</ul>
The BGP session has been established with our Enterprise Cisco Router.

<strong>A new Peer Group should be created with a peer defined as the internal router.</strong>

<img class="alignnone size-full wp-image-71" src="https://adminsave.files.wordpress.com/2019/06/ibgp.png" alt="ibgp.PNG" width="2264" height="794" />
<blockquote>ENT-ROUTER#show ip bgp summary
BGP router identifier 192.168.1.2, local AS number 64500
BGP table version is 1, main routing table version 1
1 network entries using 144 bytes of memory
1 path entries using 80 bytes of memory
1/0 BGP path/bestpath attribute entries using 152 bytes of memory
1 BGP AS-PATH entries using 24 bytes of memory
0 BGP route-map cache entries using 0 bytes of memory
0 BGP filter-list cache entries using 0 bytes of memory
BGP using 400 total bytes of memory
BGP activity 1/0 prefixes, 1/0 paths, scan interval 60 secs

Neighbor V AS MsgRcvd MsgSent TblVer InQ OutQ Up/Down State/PfxRcd
192.168.1.1 4 64500 4 4 1 0 0 00:00:21 1</blockquote>
<ul>
	<li><em><strong>An internal BGP session isn't necessary, as a static default route would be plenty. However, for lab purposes lets continue with more BGP FUN.</strong></em></li>
</ul>
We can create static routes that point the two /31 interconnects to our directly connected interface from our Cisco to the Palo. This way, the default route that's re-advertised by default is actually installed into our routing table.
<blockquote><strong>Network Next Hop Metric LocPrf Weight Path</strong>
<strong>* i 0.0.0.0 172.16.64.0 200 0 64496 ?</strong>

<strong>Total number of prefixes 1 </strong>
<strong>ENT-ROUTER#</strong></blockquote>
Again, we're not installing this route, because our local router has no idea where 172.16.64.0 lives.

Create the two static routes for 172.16.64.0/31 and 172.16.65.0/31 and the magic happens:

<img class="alignnone size-full wp-image-72" src="https://adminsave.files.wordpress.com/2019/06/cisco.png" alt="cisco" width="1043" height="1042" />

&nbsp;

Our Enterprise router now has a way out to the world! Don't forget to create the inter-zone policy to allow traffic from the Trust to Untrust zone. Also, in a real deployment - there will be a NAT rule out to the inter-webz on the PA, but that's out of scope for this lab, as I wanted to focus attention to the WAN facing configuration on the Palo Alto.

<a href="https://docs.paloaltonetworks.com/pan-os/7-1/pan-os-admin/networking/nat-configuration-examples#https://docs.paloaltonetworks.com/pan-os/7-1/pan-os-admin/networking/nat-configuration-examples#">Palo Alto Documentation on NAT</a>

&nbsp;]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>59</wp:post_id>
  <wp:post_date>2019-06-09 10:13:30</wp:post_date>
  <wp:post_date_gmt>2019-06-09 10:13:30</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 18:12:53</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 18:12:53</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>dual-isps-bgp-palo-alto-networks</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_old_date</wp:meta_key>
    <wp:meta_value><![CDATA[2019-06-11]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1560075851]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[31646445233]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Topology]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/topology-3/</link>
  <pubDate>Sun, 09 Jun 2019 03:32:05 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/topology.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>60</wp:post_id>
  <wp:post_date>2019-06-09 03:32:05</wp:post_date>
  <wp:post_date_gmt>2019-06-09 03:32:05</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 03:32:05</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 03:32:05</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>topology-3</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/topology.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/topology.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2060;s:6:"height";i:1059;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/topology.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:159405;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Topology]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/topology-4/</link>
  <pubDate>Sun, 09 Jun 2019 03:50:47 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/topology-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>61</wp:post_id>
  <wp:post_date>2019-06-09 03:50:47</wp:post_date>
  <wp:post_date_gmt>2019-06-09 03:50:47</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 03:50:47</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 03:50:47</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>topology-4</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/topology-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/topology-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2061;s:6:"height";i:997;s:4:"file";s:87:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/topology-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:139823;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[interfaces-PA]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/interfaces-pa/</link>
  <pubDate>Sun, 09 Jun 2019 07:13:08 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/interfaces-pa.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>62</wp:post_id>
  <wp:post_date>2019-06-09 07:13:08</wp:post_date>
  <wp:post_date_gmt>2019-06-09 07:13:08</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 07:13:08</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 07:13:08</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>interfaces-pa</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/interfaces-pa.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/interfaces-pa.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2782;s:6:"height";i:389;s:4:"file";s:90:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/interfaces-pa.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:82673;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[bgp]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/bgp/</link>
  <pubDate>Sun, 09 Jun 2019 07:47:57 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/bgp.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>63</wp:post_id>
  <wp:post_date>2019-06-09 07:47:57</wp:post_date>
  <wp:post_date_gmt>2019-06-09 07:47:57</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 07:47:57</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 07:47:57</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>bgp</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/bgp.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/bgp.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2283;s:6:"height";i:701;s:4:"file";s:80:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/bgp.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:116194;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[def]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/def/</link>
  <pubDate>Sun, 09 Jun 2019 07:56:13 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/def.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>64</wp:post_id>
  <wp:post_date>2019-06-09 07:56:13</wp:post_date>
  <wp:post_date_gmt>2019-06-09 07:56:13</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 07:56:13</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 07:56:13</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>def</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/def.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/def.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2291;s:6:"height";i:613;s:4:"file";s:80:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/def.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:86435;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[nokiabgp]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/nokiabgp/</link>
  <pubDate>Sun, 09 Jun 2019 08:00:24 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/nokiabgp.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>65</wp:post_id>
  <wp:post_date>2019-06-09 08:00:24</wp:post_date>
  <wp:post_date_gmt>2019-06-09 08:00:24</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 08:00:24</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 08:00:24</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>nokiabgp</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/nokiabgp.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/nokiabgp.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:614;s:6:"height";i:575;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/nokiabgp.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:24513;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[newrib]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/newrib/</link>
  <pubDate>Sun, 09 Jun 2019 08:11:12 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/newrib.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>66</wp:post_id>
  <wp:post_date>2019-06-09 08:11:12</wp:post_date>
  <wp:post_date_gmt>2019-06-09 08:11:12</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 08:11:12</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 08:11:12</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>newrib</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/newrib.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/newrib.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2276;s:6:"height";i:594;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/newrib.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:85402;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[rt-pref]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/rt-pref/</link>
  <pubDate>Sun, 09 Jun 2019 08:11:14 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/rt-pref.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>67</wp:post_id>
  <wp:post_date>2019-06-09 08:11:14</wp:post_date>
  <wp:post_date_gmt>2019-06-09 08:11:14</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 08:11:14</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 08:11:14</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>rt-pref</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/rt-pref.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/rt-pref.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2277;s:6:"height";i:886;s:4:"file";s:84:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/rt-pref.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:119125;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[newrib]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/newrib-2/</link>
  <pubDate>Sun, 09 Jun 2019 08:11:32 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/newrib-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>68</wp:post_id>
  <wp:post_date>2019-06-09 08:11:32</wp:post_date>
  <wp:post_date_gmt>2019-06-09 08:11:32</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 08:11:32</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 08:11:32</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>newrib-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/newrib-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/newrib-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2276;s:6:"height";i:594;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/newrib-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:85402;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[rt-pref]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/rt-pref-2/</link>
  <pubDate>Sun, 09 Jun 2019 08:12:01 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/rt-pref-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>69</wp:post_id>
  <wp:post_date>2019-06-09 08:12:01</wp:post_date>
  <wp:post_date_gmt>2019-06-09 08:12:01</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 08:12:01</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 08:12:01</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>rt-pref-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/rt-pref-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/rt-pref-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2277;s:6:"height";i:886;s:4:"file";s:86:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/rt-pref-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:119125;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[ibgp]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/ibgp/</link>
  <pubDate>Sun, 09 Jun 2019 09:35:52 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/ibgp.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>71</wp:post_id>
  <wp:post_date>2019-06-09 09:35:52</wp:post_date>
  <wp:post_date_gmt>2019-06-09 09:35:52</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 09:35:52</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 09:35:52</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>ibgp</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/ibgp.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/ibgp.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2264;s:6:"height";i:794;s:4:"file";s:81:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/ibgp.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:133328;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[cisco]]></title>
  <link>https://adminsave.wordpress.com/2019/06/09/dual-isps-bgp-palo-alto-networks/cisco/</link>
  <pubDate>Sun, 09 Jun 2019 10:19:49 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/06/cisco.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>72</wp:post_id>
  <wp:post_date>2019-06-09 10:19:49</wp:post_date>
  <wp:post_date_gmt>2019-06-09 10:19:49</wp:post_date_gmt>
  <wp:post_modified>2019-06-09 10:19:49</wp:post_modified>
  <wp:post_modified_gmt>2019-06-09 10:19:49</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>cisco</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>59</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/06/cisco.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/cisco.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1043;s:6:"height";i:1042;s:4:"file";s:82:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/06/cisco.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:115581;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[BGP Conditional Advertisement - Palo-Alto NGFW]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/</link>
  <pubDate>Fri, 05 Jul 2019 13:10:54 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://admin-save.com/?p=81</guid>
  <description/>
  <content:encoded><![CDATA[<h1 style="text-align:center;">Conditional Advertisement</h1>
<a href="https://docs.paloaltonetworks.com/pan-os/8-1/pan-os-web-interface-help/network/network-virtual-routers/bgp/bgp-conditional-adv-tab" target="_blank" rel="noopener">Palo Alto BGP Condi Adv Documentation</a>

This article will outline how to configure conditional advertisements when utilizing multiple up-links from a Palo-Alto acting as an edge device on your network. Conditional Advertisement is an advanced routing feature, which is introduced at a Cisco's CCIE level. I will be re-using the LAB topology from my previous post, as it works perfectly with this scenario.

What is Conditional Advertisement ?
<blockquote>The Border Gateway Protocol (BGP) conditional advertisement feature provides additional control of route advertisement, depending on the existence of other prefixes in the BGP table.

- https://www.cisco.com/c/en/us/support/docs/ip/border-gateway-protocol-bgp/16137-cond-adv.html</blockquote>
A defined prefix must exist in the FIB in order to <strong><em>suppress </em> </strong>the condition, therefore <strong>not</strong> advertising the desired routes to the <em>less preferred</em> neighbor. This is useful when you want full and definite control of ingress and egress traffic to your network when multi-homing to different ISPs. <strong>Both BGP sessions will be up simultaneously,</strong> however until the monitored prefix is no longer found in the route-table, the condition will be suppressed (Not Advertised). Once the prefix is not in the route-table, the condition will be met and the advertisement will be propagated to the secondary, less preferred neighbor.

<img class="alignnone size-full wp-image-61" src="https://adminsave.files.wordpress.com/2019/06/topology-1.png" alt="Topology" width="2061" height="997" />

<strong>ISP 1 = Most Preferred <span style="color:#ff0000;"><em>(Monitor received prefix 192.168.100.1/32 from ISP-1-B)</em></span></strong>

<strong>ISP 2 = Less Preferred</strong>

ISP 1 will be advertising a loop-back in which the Palo-Alto will monitor (utilizing ping checks). Contact your upstream provider and explain to one of their engineers what you'd like to do and the reason for your request. A simple RFC 1918 loopback /32 can be coordinated between your ISP and your organization to be advertised.  <em>PA's do not allow a default-route to be monitored as part of the BGP Conditional advertisement. From a service-providers standpoint, this should not be a difficult request although it may take some work, as BOGONS are filtered in and out of global route tables. </em>You don't have to depend on your service provider advertising a specific route though... feel free to get creative. After all, BGP only looks at the local-fib - you can monitor <em>any</em> route coming from any where (BGP,OSPF,ISIS).

<hr />

Lets get to business! - Here is the advertisement routes from ISP-1 Router - (preferred ISP) - We somehow managed to get the ISP to advertise 192.168.100.1/32 and we will monitor this prefix under our cond-adv tab/bgp process on our edge PA.

<img class="alignnone size-full wp-image-82" src="https://adminsave.files.wordpress.com/2019/07/adv-routes.png" alt="adv-routes" width="2267" height="1210" />

Now, lets verify our <strong>IMPORT</strong> statement on our Palo-Alto. We are <em>only allowing a default-route and prefix 192.168.100.1/32.</em>

<img class="alignnone size-full wp-image-83" src="https://adminsave.files.wordpress.com/2019/07/import-statement.png" alt="import-statement.PNG" width="1823" height="513" />

<hr />

Lets talk about the EXPORT side. Create export statements specifying the Public IP of your public facing servers, etc. Even though we are advertising to both peers, the conditional advertisement SUPPRESSES the advertisement. At this point, since the condition hasn't been configured, normal BGP behavior will send the routes to both peers.

Also, create a DENY policy to prevent any other routes from advertising (expected BGP behavior to re-advertise to other eBGP peers). Pay close attention to the 'Used By' section.

I'm selecting both PEERS to advertise the public route 2.2.2.2/32 and the DENY action for the 'no-routes' This is a common practice and the beauty of BGP; the full control. Put your security hat on and think of these export policies as actual firewall security policies. They are read from top to bottom in this case.

<img class="alignnone size-full wp-image-84" src="https://adminsave.files.wordpress.com/2019/07/no-routes.png" alt="no-routes" width="2248" height="535" />
<ol>
	<li>Create an interface <strong>LOOPBACK, if the IP is a /32.</strong> Otherwise, create a secondary subnet on a L3 Interface. This is important as the default behavior of the PA will affect our advertisement.</li>
	<li>Create a re-distribution and specify either a profile or simply input the prefix.
<ol>
	<li>Redistribution is required as we're literally bringing in a directly connected interface (Loopback) or a IP from an interface into BGP.</li>
</ol>
</li>
</ol>

<hr />

<span style="text-decoration:underline;"><span style="color:#ff0000;"><strong>Lets select the "Conditional ADV" tab now.</strong></span></span>

<strong>It's very important to specify the "USED BY" as the SECONDARY, LESS PREFERRED peer.</strong> Otherwise, this won't work. As you can see, I have selected "ISP-2" as it's my secondary peer. The "Non Exist Filters" specifies the IP Prefix that I am monitoring from ISP-1. If that peer session were to drop, the prefix 192.168.100.1/32 would disappear from my routing table, therefore the <em>condition would be triggered and the route would be advertised to the Secondary-Peer, "ISP-2".</em>

<img class="alignnone size-full wp-image-85" src="https://adminsave.files.wordpress.com/2019/07/cond-1.png" alt="cond-1" width="2193" height="771" />

Below, is the "Advertise Filters" tab. Here you will input the Public Server IP that you want to control advertisement of.  What this says, "Used By" - The peer that the prefix will be advertised to, once the 'Non Exist Filters" prefix is non-existent in the routing table. <img class="alignnone size-full wp-image-86" src="https://adminsave.files.wordpress.com/2019/07/cond-2.png" alt="cond-2" width="2193" height="638" />

This out put displays the condition being SUPPRESSED, since the prefix 192.168.100.1/32 is PRESENT in the routing table.
<blockquote><span style="color:#ff0000;">admin@PA-VM&gt; show routing protocol bgp loc-rib</span>
VIRTUAL ROUTER: default (id 1)
==========
Prefix Nexthop Peer Weight LocPrf Org MED flap AS-Path
0.0.0.0/0 172.16.65.0 WAN-ISP-1 0 100 i/c 0 0 64511
<strong><span style="color:#ff0000;">*192.168.100.1/32 172.16.65.0 WAN-ISP-1 0 100 i/c 0 0 64511</span></strong>
*0.0.0.0/0 172.16.64.0 WAN-ISP-2 0 200 i/c 0 0 64496
*192.168.1.0/24 192.168.1.2 Core-Router 0 100 igp 0 0
*2.2.2.2/32 Local 0 100 i/c 0 0

total routes shown: 5

<strong><span style="color:#ff0000;">admin@PA-VM&gt; show routing protocol bgp policy cond-adv</span></strong>
VIRTUAL ROUTER: default (id 1)
==========
Peer/Group: WAN-ISP-2
<strong><span style="color:#ff0000;">Suppress condition met: yes</span></strong>
Suppress condition (Non-exist filter):
name: Loop-to-monitor
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 192.168.100.1
hit count: 17
Route filter (Advertise filter):
name: Routes-To-Advertise
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 2.2.2.2
hit count: 3
----------
Peer/Group: ISP-2
Suppress condition met: yes
Suppress condition (Non-exist filter):
name: Loop-to-monitor
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 192.168.100.1
hit count: 17
Route filter (Advertise filter):
name: Routes-To-Advertise
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 2.2.2.2
hit count: 3
----------</blockquote>
Now, I will shut down the Peering Session from the BGP edge router at ISP-1. This will pull the prefix 192.168.100.1/32 from the Routing Table on the Palo Alto and will meet the condition, therefore advertising the public server IP out the Secondary-Peering session, ISP-2.
<blockquote><strong><span style="color:#ff0000;">admin@PA-VM&gt; show routing protocol bgp loc-rib</span></strong>
VIRTUAL ROUTER: default (id 1)
==========
Prefix Nexthop Peer Weight LocPrf Org MED flap AS-Path
*0.0.0.0/0 172.16.64.0 WAN-ISP-2 0 200 i/c 0 0 64496
*192.168.1.0/24 192.168.1.2 Core-Router 0 100 igp 0 0
*2.2.2.2/32 Local 0 100 i/c 0 0

total routes shown: 3

admin@PA-VM&gt; show routing protocol bgp policy cond-adv
VIRTUAL ROUTER: default (id 1)
==========
Peer/Group: WAN-ISP-2
<strong><span style="color:#ff0000;">Suppress condition met: no</span></strong>
Suppress condition (Non-exist filter):
name: Loop-to-monitor
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 192.168.100.1
hit count: 19
Route filter (Advertise filter):
name: Routes-To-Advertise
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 2.2.2.2
hit count: 3
----------
Peer/Group: ISP-2
Suppress condition met: no
Suppress condition (Non-exist filter):
name: Loop-to-monitor
AFI: bgpAfiIpv4
SAFI: unicast
Destination: 192.168.100.1
hit count: 19
Route filter (Advertise filter):
<strong><span style="color:#ff0000;">name: Routes-To-Advertise</span></strong>
<strong><span style="color:#ff0000;">AFI: bgpAfiIpv4</span></strong>
<strong><span style="color:#ff0000;">SAFI: unicast</span></strong>
<strong><span style="color:#ff0000;">Destination: 2.2.2.2</span></strong>
hit count: 3
----------</blockquote>
Keep in mind that BGP offers many knobs to traffic-engineer IN-bound and OUT-bound traffic. Utilizing MED is a way to steer traffic inbound, although - this will work only when dual-homing to the same ISP AND must be enabled/allowed by the upstream ISP.

When the MED option isn't viable, utilizing pre-pend will utilize AS-PATH as a way to discourage upstream routers from selecting the less-desired route.

Also, keep in mind that most providers will have BGP communities they will share with their customers. Make sure to review this with your upstream provider and find out what is the best option for you. Finally, never forgot about old-faithful for outbound-exiting traffic.: Local-pref.]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>81</wp:post_id>
  <wp:post_date>2019-07-05 13:10:54</wp:post_date>
  <wp:post_date_gmt>2019-07-05 13:10:54</wp:post_date_gmt>
  <wp:post_modified>2019-07-05 13:10:54</wp:post_modified>
  <wp:post_modified_gmt>2019-07-05 13:10:54</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>bgp-conditional-advertisement-palo-alto-ngfw</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1562332257]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[32517451905]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[adv-routes]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/adv-routes/</link>
  <pubDate>Thu, 04 Jul 2019 04:34:09 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/07/adv-routes.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>82</wp:post_id>
  <wp:post_date>2019-07-04 04:34:09</wp:post_date>
  <wp:post_date_gmt>2019-07-04 04:34:09</wp:post_date_gmt>
  <wp:post_modified>2019-07-04 04:34:09</wp:post_modified>
  <wp:post_modified_gmt>2019-07-04 04:34:09</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>adv-routes</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>81</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/07/adv-routes.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2267;s:6:"height";i:1210;s:4:"file";s:87:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/adv-routes.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:175616;}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/adv-routes.png]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[import-statement]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/import-statement/</link>
  <pubDate>Thu, 04 Jul 2019 04:36:50 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/07/import-statement.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>83</wp:post_id>
  <wp:post_date>2019-07-04 04:36:50</wp:post_date>
  <wp:post_date_gmt>2019-07-04 04:36:50</wp:post_date_gmt>
  <wp:post_modified>2019-07-04 04:36:50</wp:post_modified>
  <wp:post_modified_gmt>2019-07-04 04:36:50</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>import-statement</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>81</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/07/import-statement.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/import-statement.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1823;s:6:"height";i:513;s:4:"file";s:93:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/import-statement.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:71517;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[no-routes]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/no-routes/</link>
  <pubDate>Thu, 04 Jul 2019 05:42:13 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/07/no-routes.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>84</wp:post_id>
  <wp:post_date>2019-07-04 05:42:13</wp:post_date>
  <wp:post_date_gmt>2019-07-04 05:42:13</wp:post_date_gmt>
  <wp:post_modified>2019-07-04 05:42:13</wp:post_modified>
  <wp:post_modified_gmt>2019-07-04 05:42:13</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>no-routes</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>81</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/07/no-routes.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/no-routes.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2248;s:6:"height";i:535;s:4:"file";s:86:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/no-routes.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:79645;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[cond-1]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/cond-1/</link>
  <pubDate>Thu, 04 Jul 2019 05:46:43 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/07/cond-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>85</wp:post_id>
  <wp:post_date>2019-07-04 05:46:43</wp:post_date>
  <wp:post_date_gmt>2019-07-04 05:46:43</wp:post_date_gmt>
  <wp:post_modified>2019-07-04 05:46:43</wp:post_modified>
  <wp:post_modified_gmt>2019-07-04 05:46:43</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>cond-1</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>81</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/07/cond-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/cond-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2193;s:6:"height";i:771;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/cond-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:87919;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[cond-2]]></title>
  <link>https://adminsave.wordpress.com/2019/07/05/bgp-conditional-advertisement-palo-alto-ngfw/cond-2/</link>
  <pubDate>Thu, 04 Jul 2019 05:46:44 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/07/cond-2.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>86</wp:post_id>
  <wp:post_date>2019-07-04 05:46:44</wp:post_date>
  <wp:post_date_gmt>2019-07-04 05:46:44</wp:post_date_gmt>
  <wp:post_modified>2019-07-04 05:46:44</wp:post_modified>
  <wp:post_modified_gmt>2019-07-04 05:46:44</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>cond-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>81</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/07/cond-2.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/cond-2.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:2193;s:6:"height";i:638;s:4:"file";s:83:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/07/cond-2.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:86810;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Admin-Save YouTube Labs]]></title>
  <link>https://adminsave.wordpress.com/2019/09/26/admin-save-youtube-labs/</link>
  <pubDate>Thu, 26 Sep 2019 06:24:56 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/2019/09/26/admin-save-youtube-labs/</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>93</wp:post_id>
  <wp:post_date>2019-09-26 06:24:56</wp:post_date>
  <wp:post_date_gmt>2019-09-26 06:24:56</wp:post_date_gmt>
  <wp:post_modified>2019-09-26 06:24:56</wp:post_modified>
  <wp:post_modified_gmt>2019-09-26 06:24:56</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>admin-save-youtube-labs</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>1</wp:menu_order>
  <wp:post_type>nav_menu_item</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="nav_menu" nicename="primary"><![CDATA[Primary]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_type</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_menu_item_parent</wp:meta_key>
    <wp:meta_value><![CDATA[0]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object_id</wp:meta_key>
    <wp:meta_value><![CDATA[93]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_object</wp:meta_key>
    <wp:meta_value><![CDATA[custom]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_target</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_classes</wp:meta_key>
    <wp:meta_value><![CDATA[a:1:{i:0;s:0:"";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_xfn</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_menu_item_url</wp:meta_key>
    <wp:meta_value><![CDATA[https://www.youtube.com/channel/UCe2-ZSkn7letAKD6zE3r0oA]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Securing SSH with MFA(Google Auth) on Ubuntu]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/</link>
  <pubDate>Sat, 12 Oct 2019 16:25:29 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://admin-save.com/?p=94</guid>
  <description/>
  <content:encoded><![CDATA[<img class="alignnone size-full wp-image-96" src="https://adminsave.files.wordpress.com/2019/10/barcode.png" alt="barcode" width="652" height="459" />

This short article will go over how I'm practicing defense in depth to secure my Linux SSH access for critical infrastructure. We will install Google-Auth on a Ubuntu Server-19 and store the Scratch Codes in our LastPass Vault.  LastPass is utilizing my YubiKey which FIDO2, FIDO U2F, one-time password (OTP), OpenPGP and smart card, choice of form factors for desktop or laptop as a form of MFA to authenticate to the cloud service.  For my AuthCodes I will also be using LastPass Authenticator, even though I am installing Google Auth on the Ubuntu instance.  Finally, for those who use SecureCRT, there is one configuration change to make to your saved sessions for ease of use and compatibility.

Last Pass has a free option available and you can find Google Authenticator on your device's App Store/Play Store. Yubikey is a paid hardware device.

<strong>What is MFA?</strong>

Multi-factor authentication combines two or more independent credentials: what the user knows (<a href="https://searchsecurity.techtarget.com/definition/password">password</a>), what the user has (<a href="https://searchsecurity.techtarget.com/definition/security-token">security token</a>) and what the user is (<a href="https://searchsecurity.techtarget.com/definition/biometric-verification">biometric verification</a>). The goal of MFA is to create a layered defense and make it more difficult for an unauthorized person to access a target such as a physical location, computing device, network or database. If one factor is compromised or broken, the attacker still has at least one more barrier to breach before successfully breaking into the target.

Source: <a href="https://searchsecurity.techtarget.com/definition/multifactor-authentication-MFA">TechTarget</a>

<strong>What is Defense in Depth?</strong>

<span class="ILfuVd"><span class="e24Kjd"><b>Defense in Depth</b> (DiD) is an approach to cybersecurity in which a series of <b>defensive</b> mechanisms are layered in order to protect valuable data and information.
</span></span>

Source: <a href="https://www.forcepoint.com/cyber-edu/defense-depth">ForcePoint</a>

Lets get started by SSH'ing into your Ubuntu machine. I am performing these steps on a Ubuntu Server 19. There are some additional steps in securing cloud instances, such as Digital Ocean headless droplets. I will not be covering such configuration.

Step 1:  Install G-Auth - The tools for MFA.
<blockquote>htinoco@pi-hole:~$ sudo apt install libpam-google-authenticator</blockquote>
Step 2: Setup MFA on local user account.
<blockquote>htinoco@pi-hole:~$ google-authenticator</blockquote>
At this point, carefully read through the prompts and select the options that make more sense to you. Open your Authenticator App of choice and scan the MFA QR Code that is on your screen.

Now, lets concentrate on properly storing the following information before finishing the configuration.
<blockquote>Your new secret key is: 2445XXXXJ5L6MQ575PXXXXXX
Your verification code is XX29XX
Your emergency scratch codes are:
8659XXXX
7X0672XX
5608XXXX
268233XX
1X890XXX</blockquote>
Store these scratch codes somewhere safe - Do not save these on the same local device, in case of lose or theft. I will save these to my LastPass Vault.

First, lets authenticate to LastPass using YubiKey. This is where the DiD comes in to play - Maybe I'm stretching the DiD definition here, but simply writing these codes down and throwing them in a drawer is not a good backup plan.

Insert the YubiKey to your local machine - Pictured is John Wick, ensuring no dogs are harmed during this blog.

<img class="alignnone size-full wp-image-98" src="https://adminsave.files.wordpress.com/2019/10/20191012_153753250_ios.jpg?w=8064" alt="20191012_153753250_iOS.jpg" width="4032" height="3024" />

Now lets authenticate to LastPass  - I have previously setup my YubiKey to work as an MFA device under my LastPass account settings. See documentation on LastPass website for a quick how-to.

<img class="alignnone size-full wp-image-99" src="https://adminsave.files.wordpress.com/2019/10/lpmfa.png" alt="lpmfa.PNG" width="1657" height="762" />

Once fully authenticated, lets store the scratch keys somewhere safe. I personally created a 'Home Network' folder inside the 'SSH KEYS" section labeled "SCRATCH CODES", sorted by machine host name.

<em>Make sure to put some thought into how want to organize your LastPass Vault.</em>

Okay, lets get back to the nuts n bolts of the MFA configuration for SSH on the Ubuntu server.
<h2><strong>Lets edit the SSHd config file and change the default <span style="text-decoration:underline;">"ChallengeResponseAuthentication"</span> to Yes.</strong></h2>
<blockquote>htinoco@pi-hole:~$ sudo nano /etc/ssh/sshd_config

# Change to yes to enable challenge-response passwords (beware issues with
# some PAM modules and threads)
ChallengeResponseAuthentication yes      # Change this default from no to yes!

# Kerberos options
#KerberosAuthentication no
#KerberosOrLocalPasswd yes
#KerberosTicketCleanup yes
#KerberosGetAFSToken no</blockquote>
Next, simply restart the SSH service:
<blockquote>sudo systemctl restart ssh</blockquote>
Now lets edit the PAM file - The <span class="ILfuVd"><span class="e24Kjd"><b>Linux</b>-<b>PAM</b> (short for Pluggable Authentication Modules which evolved from the Unix-<b>PAM</b> architecture) is a powerful suite of shared libraries used to dynamically authenticate a user to applications (or services) in a <b>Linux</b> system.</span></span>
<blockquote>sudo vi /etc/pam.d/sshd

<strong>#At the very bottom of the file, add the following line:</strong>
<p style="text-align:justify;">auth required pam_google_authenticator.so</p>
</blockquote>
That's it! You can test this feature by simply running 'ssh localhost' and you should see the following after authenticating with your password:
<blockquote>htinoco@pi-hole:~$ ssh localhost
Password:
Verification code:                                #&lt;&lt;&lt;&lt;&lt; Very COOL!</blockquote>
Now, as I said, if you're like me and have hundreds of sessions saved on your SecureCRT application - here is what you'll need to do to ensure a smooth login with MFA:

&nbsp;

<img class="alignnone size-full wp-image-102" src="https://adminsave.files.wordpress.com/2019/10/ssh.png" alt="ssh.PNG" width="1061" height="629" />
<ol>
	<li>Right click on your saved session for the Ubuntu Server with MFA.</li>
	<li>Select Properties</li>
	<li>Category: SSH2</li>
	<li>Category: Authentication
<ol>
	<li>Select Keyboard Interactive</li>
	<li>Select OK.</li>
</ol>
</li>
</ol>
This will allow for SecureCRT to handle the Verification Code prompt:

<img class="alignnone size-full wp-image-103" src="https://adminsave.files.wordpress.com/2019/10/mfa2.png" alt="mfa2.PNG" width="871" height="275" />

There ya have it! you should be logged in now utilizing MFA.

If you ever lose your cell phone with the authenticator app, you can always retrieve the scratch codes from your LastPass Vault that's encrypted on a cloud service - So it will always be available to you.. make sure you don't lose your YubiKey the same night..

Always make sure to have a backup!

Thanks for reading,

Hugo Tinoco

&nbsp;

&nbsp;]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>94</wp:post_id>
  <wp:post_date>2019-10-12 16:25:29</wp:post_date>
  <wp:post_date_gmt>2019-10-12 16:25:29</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 16:25:29</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 16:25:29</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>securing-ssh-with-mfagoogle-auth-on-ubuntu</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[36273268782]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1570897534]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[barcode]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/barcode/</link>
  <pubDate>Sat, 12 Oct 2019 14:08:23 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/10/barcode.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>96</wp:post_id>
  <wp:post_date>2019-10-12 14:08:23</wp:post_date>
  <wp:post_date_gmt>2019-10-12 14:08:23</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 14:08:23</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 14:08:23</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>barcode</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>94</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/10/barcode.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:652;s:6:"height";i:459;s:4:"file";s:84:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/barcode.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:50582;}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/barcode.png]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[20191012_153753250_iOS]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/20191012_153753250_ios/</link>
  <pubDate>Sat, 12 Oct 2019 15:38:26 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/10/20191012_153753250_ios.jpg</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>98</wp:post_id>
  <wp:post_date>2019-10-12 15:38:26</wp:post_date>
  <wp:post_date_gmt>2019-10-12 15:38:26</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 15:38:26</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 15:38:26</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>20191012_153753250_ios</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>94</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/10/20191012_153753250_ios.jpg</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/20191012_153753250_ios.jpg]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:3024;s:6:"height";i:4032;s:4:"file";s:99:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/20191012_153753250_ios.jpg";s:5:"sizes";a:0:{}s:10:"image_meta";a:14:{s:8:"aperture";s:3:"1.8";s:6:"credit";s:0:"";s:6:"camera";s:17:"iPhone 11 Pro Max";s:7:"caption";s:0:"";s:17:"created_timestamp";s:10:"1570869473";s:9:"copyright";s:0:"";s:12:"focal_length";s:4:"4.25";s:3:"iso";s:3:"640";s:13:"shutter_speed";s:17:"0.033333333333333";s:5:"title";s:0:"";s:11:"orientation";s:1:"1";s:8:"keywords";a:0:{}s:8:"latitude";d:45.535738888888886;s:9:"longitude";d:-122.55381666666666;}s:8:"filesize";i:4219347;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[lpmfa]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/lpmfa/</link>
  <pubDate>Sat, 12 Oct 2019 15:43:03 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/10/lpmfa.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>99</wp:post_id>
  <wp:post_date>2019-10-12 15:43:03</wp:post_date>
  <wp:post_date_gmt>2019-10-12 15:43:03</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 15:43:03</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 15:43:03</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>lpmfa</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>94</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/10/lpmfa.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/lpmfa.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1657;s:6:"height";i:762;s:4:"file";s:82:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/lpmfa.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:178761;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[ssh]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/ssh/</link>
  <pubDate>Sat, 12 Oct 2019 16:08:09 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/10/ssh.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>102</wp:post_id>
  <wp:post_date>2019-10-12 16:08:09</wp:post_date>
  <wp:post_date_gmt>2019-10-12 16:08:09</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 16:08:09</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 16:08:09</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>ssh</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>94</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/10/ssh.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/ssh.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1061;s:6:"height";i:629;s:4:"file";s:80:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/ssh.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:129314;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[mfa2]]></title>
  <link>https://adminsave.wordpress.com/2019/10/12/securing-ssh-with-mfagoogle-auth-on-ubuntu/mfa2/</link>
  <pubDate>Sat, 12 Oct 2019 16:09:29 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/10/mfa2.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>103</wp:post_id>
  <wp:post_date>2019-10-12 16:09:29</wp:post_date>
  <wp:post_date_gmt>2019-10-12 16:09:29</wp:post_date_gmt>
  <wp:post_modified>2019-10-12 16:09:29</wp:post_modified>
  <wp:post_modified_gmt>2019-10-12 16:09:29</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>mfa2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>94</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/10/mfa2.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/mfa2.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:871;s:6:"height";i:275;s:4:"file";s:81:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/10/mfa2.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:35616;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Are you using rMate?]]></title>
  <link>https://adminsave.wordpress.com/2019/12/12/are-you-using-rmate/</link>
  <pubDate>Thu, 12 Dec 2019 05:58:51 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://admin-save.com/?p=108</guid>
  <description/>
  <content:encoded><![CDATA[A good friend of mine, Randall, would always joke with me about using Nano and rMate instead of vi. He's an awesome programmer and incredibly smart - So, I've always listened to every piece of advice he's given me - but, I simply couldn't let go of using rMate instead of nano or vi.

rMate is a way to edit remote files via a reverse SSH tunnel on your local machine via SublimeText.

This is WAY easier to navigate long scripts or text files, instead of using a terminal. Besides, you can keep the file open in a sublime text tab and any and all changes save and transfer to your remote server via the secure tunnel.
<h2>Clone rMate on remote server:</h2>
<h5><em>- I personally cloned the aurora rmate. There are a few out there.</em></h5>
<a href="https://github.com/aurora/rmate" target="_blank" rel="noopener">https://github.com/aurora/rmate</a>
<pre>sudo wget -O /usr/local/bin/rmate https://raw.githubusercontent.com/aurora/rmate/master/rmate
sudo chmod a+x /usr/local/bin/rmate</pre>
Once you get the files from the github, go ahead and edit the permissions.
<h2>Install the SublimeText package:</h2>
Open the Package Manager in Sublime Text. search for 'rsub' and install it.

Ctrl+Shift+P / Linux-Win

Cmd+Shift+P / Mac

Now, lets open a command line on your local host and connect to a remote server to edit a remote file on your local install of sublime text.
<h3><strong> ssh -R 52698:localhost:52698 {{username}}@{{remote-server}}</strong></h3>
For my example, I'm going to remote into my local netbox server, with the following command from my WSL instance.

<img class="alignnone size-full wp-image-112" src="https://adminsave.files.wordpress.com/2019/12/ssh.png" alt="ssh" width="894" height="98" />

&nbsp;

Here is a quick video, demonstrating how easy it is to edit a file locally from a remote server:

https://www.youtube.com/watch?v=jmxArN3YOMs&amp;feature=youtu.be&amp;hd=1

&nbsp;

There are many more ways to use this cool little tool.

Check out the github and the following arguments - I've personally have set up several aliases on my workstation to be able to easily ssh to common servers I manage and have the ability to call rsub on files.

Example:

Create an alias by editing the .bashrc file and adding the previous ssh command, but this way - you can standardize the use of rsub by adding the 'r' behind the dns name of the server. You don't always want to SSH with a reverse tunnel, so having the option to do, is much nicer - besides, this is an insane amount of text to input simply to ssh. My brain doesn't want to do that, the million times a day I ssh into devices.

alias rnetbx='ssh -R 52698:localhost:52698 htinoco@10.0.0.116'
<blockquote>root@Snowblind-Tower:/mnt/c# nano ~/.bashrc  <em><strong>## Sorry Randall</strong></em>
root@Snowblind-Tower:/mnt/c# source ~/.bashrc
root@Snowblind-Tower:/mnt/c# rnetbx   <em><strong>## &lt;---------The new alias</strong></em>
The authenticity of host '10.0.0.116 (10.0.0.116)' can't be established.
ECDSA key fingerprint is SHA256:XkjSNWW8a6Nri7m5wdV5KBpdXdTT9DDD+SxZa//2qic.
Are you sure you want to continue connecting (yes/no)?</blockquote>
<h3>Arguments</h3>
<pre><code>-H, --host HOST  Connect to HOST. Use 'auto' to detect the host from SSH.
-p, --port PORT  Port number to use for connection.
-w, --[no-]wait  Wait for file to be closed by TextMate.
-l, --line LINE  Place caret on line number after loading file.
+N               Alias for --line, if N is a number (eg.: +5).
-m, --name NAME  The display name shown in TextMate.
-t, --type TYPE  Treat file as having specified type.
-n, --new        Open in a new window (Sublime Text).
-f, --force      Open even if file is not writable.
-v, --verbose    Verbose logging messages.
-h, --help       Display this usage information.
    --version    Show version and exit.
</code></pre>
&nbsp;

I didn't know about this tool until recently. I hope this helps someone and makes your day easier!]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>108</wp:post_id>
  <wp:post_date>2019-12-12 05:58:51</wp:post_date>
  <wp:post_date_gmt>2019-12-12 05:58:51</wp:post_date_gmt>
  <wp:post_modified>2019-12-12 05:58:51</wp:post_modified>
  <wp:post_modified_gmt>2019-12-12 05:58:51</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>are-you-using-rmate</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[38381752628]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1576130334]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[-1]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[ssh]]></title>
  <link>https://adminsave.wordpress.com/2019/12/12/are-you-using-rmate/ssh-2/</link>
  <pubDate>Thu, 12 Dec 2019 05:20:33 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2019/12/ssh.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>112</wp:post_id>
  <wp:post_date>2019-12-12 05:20:33</wp:post_date>
  <wp:post_date_gmt>2019-12-12 05:20:33</wp:post_date_gmt>
  <wp:post_modified>2019-12-12 05:20:33</wp:post_modified>
  <wp:post_modified_gmt>2019-12-12 05:20:33</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>ssh-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>108</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2019/12/ssh.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/12/ssh.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:894;s:6:"height";i:98;s:4:"file";s:80:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2019/12/ssh.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:18262;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[daniele - 2020-05-14 13:24:23]]></title>
  <link>https://adminsave.wordpress.com/?post_type=feedback&amp;p=118</link>
  <pubDate>Thu, 14 May 2020 13:24:23 +0000</pubDate>
  <dc:creator/>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?post_type=feedback&amp;p=118</guid>
  <description/>
  <content:encoded><![CDATA[Hi...!!
I see your video on ansible in SR nokia router, and i try to make this in my lab.
my playbook is:
---
- hosts: [nokia_7705]
  gather_facts: no
  connection: local

  vars:
     cli:
       host: “{{ inventory_hostname }}”

  tasks:
  - name: run show version on remote devices
    sros_command:
      commands:
        -  show version
      provider: "{{ cli }}"


but this give me an error:


[root@localhost ansible]# ansible-playbook prova.yml  -vvvv
ansible-playbook 2.9.7
  config file = /home/daniele/Desktop/ansible/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
Using /home/daniele/Desktop/ansible/ansible.cfg as config file
setting up inventory plugins
host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
Parsed /etc/ansible/hosts inventory source with ini plugin
Loading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/default.pyc

PLAYBOOK: prova.yml **************************************************************************************************************************************************************
Positional arguments: prova.yml
become_method: sudo
inventory: (u'/etc/ansible/hosts',)
forks: 5
tags: (u'all',)
verbosity: 4
connection: smart
timeout: 10
1 plays in prova.yml

PLAY [nokia_7705] ****************************************************************************************************************************************************************
META: ran handlers

TASK [run show version on remote devices] ****************************************************************************************************************************************
task path: /home/daniele/Desktop/ansible/prova.yml:11
 using connection plugin network_cli (was local)
 starting connection from persistent connection plugin
 local domain socket does not exist, starting it
 control socket path is /root/.ansible/pc/a81275af52
 local domain socket listeners started successfully
 unable to load cliconf for network_os sros
 
 local domain socket path is /root/.ansible/pc/a81275af52
 socket_path: /root/.ansible/pc/a81275af52
 ESTABLISH LOCAL CONNECTION FOR USER: daniele
 EXEC /bin/sh -c 'echo ~root &amp;&amp; sleep 0'
 EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p "` echo /root/.ansible/tmp `"&amp;&amp; mkdir /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 &amp;&amp; echo ansible-tmp-1589462258.24-5097-73989966464121="` echo /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 `" ) &amp;&amp; sleep 0'
 Attempting python interpreter discovery
 EXEC /bin/sh -c 'echo PLATFORM; uname; echo FOUND; command -v '"'"'/usr/bin/python'"'"'; command -v '"'"'python3.7'"'"'; command -v '"'"'python3.6'"'"'; command -v '"'"'python3.5'"'"'; command -v '"'"'python2.7'"'"'; command -v '"'"'python2.6'"'"'; command -v '"'"'/usr/libexec/platform-python'"'"'; command -v '"'"'/usr/bin/python3'"'"'; command -v '"'"'python'"'"'; echo ENDFOUND &amp;&amp; sleep 0'
 EXEC /bin/sh -c '/usr/bin/python &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/network/sros/sros_command.py
 PUT /root/.ansible/tmp/ansible-local-5088eBPPGN/tmpTtv_Tf TO /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py
 EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'
 EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'
 EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
fatal: [01465-RA1]: FAILED! =&gt; {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "invocation": {
        "module_args": {
            "commands": [
                "show version"
            ], 
            "host": null, 
            "interval": 1, 
            "match": "all", 
            "password": null, 
            "port": null, 
            "provider": {
                "host": "“01465-RA1”", 
                "password": null, 
                "port": null, 
                "ssh_keyfile": null, 
                "timeout": null, 
                "username": null
            }, 
            "retries": 10, 
            "ssh_keyfile": null, 
            "timeout": null, 
            "username": null, 
            "wait_for": null
        }
    }, 
    "msg": "Unable to decode JSON from response to exec_command({\"answer\": null, \"command\": \"show version\", \"prompt\": null}). Received 'None'.", 
    "rc": 1
}

PLAY RECAP ***********************************************************************************************************************************************************************
01465-RA1                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   


do you know this?
thanks
<!--more-->
AUTHOR: daniele
AUTHOR EMAIL: daniele.dedda@gmail.com
AUTHOR URL: 
SUBJECT: [Adminsave] Contact
IP: 193.33.19.125
Array
(
    [1_Name] =&gt; daniele
    [2_Email] =&gt; daniele.dedda@gmail.com
    [3_Comment] =&gt; Hi...!!
I see your video on ansible in SR nokia router, and i try to make this in my lab.
my playbook is:
---
- hosts: [nokia_7705]
  gather_facts: no
  connection: local

  vars:
     cli:
       host: “{{ inventory_hostname }}”

  tasks:
  - name: run show version on remote devices
    sros_command:
      commands:
        -  show version
      provider: "{{ cli }}"


but this give me an error:


[root@localhost ansible]# ansible-playbook prova.yml  -vvvv
ansible-playbook 2.9.7
  config file = /home/daniele/Desktop/ansible/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
Using /home/daniele/Desktop/ansible/ansible.cfg as config file
setting up inventory plugins
host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method
Parsed /etc/ansible/hosts inventory source with ini plugin
Loading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/default.pyc

PLAYBOOK: prova.yml **************************************************************************************************************************************************************
Positional arguments: prova.yml
become_method: sudo
inventory: (u'/etc/ansible/hosts',)
forks: 5
tags: (u'all',)
verbosity: 4
connection: smart
timeout: 10
1 plays in prova.yml

PLAY [nokia_7705] ****************************************************************************************************************************************************************
META: ran handlers

TASK [run show version on remote devices] ****************************************************************************************************************************************
task path: /home/daniele/Desktop/ansible/prova.yml:11
 using connection plugin network_cli (was local)
 starting connection from persistent connection plugin
 local domain socket does not exist, starting it
 control socket path is /root/.ansible/pc/a81275af52
 local domain socket listeners started successfully
 unable to load cliconf for network_os sros
 
 local domain socket path is /root/.ansible/pc/a81275af52
 socket_path: /root/.ansible/pc/a81275af52
 ESTABLISH LOCAL CONNECTION FOR USER: daniele
 EXEC /bin/sh -c 'echo ~root &amp;&amp; sleep 0'
 EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p "` echo /root/.ansible/tmp `"&amp;&amp; mkdir /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 &amp;&amp; echo ansible-tmp-1589462258.24-5097-73989966464121="` echo /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 `" ) &amp;&amp; sleep 0'
 Attempting python interpreter discovery
 EXEC /bin/sh -c 'echo PLATFORM; uname; echo FOUND; command -v '"'"'/usr/bin/python'"'"'; command -v '"'"'python3.7'"'"'; command -v '"'"'python3.6'"'"'; command -v '"'"'python3.5'"'"'; command -v '"'"'python2.7'"'"'; command -v '"'"'python2.6'"'"'; command -v '"'"'/usr/libexec/platform-python'"'"'; command -v '"'"'/usr/bin/python3'"'"'; command -v '"'"'python'"'"'; echo ENDFOUND &amp;&amp; sleep 0'
 EXEC /bin/sh -c '/usr/bin/python &amp;&amp; sleep 0'
Using module file /usr/lib/python2.7/site-packages/ansible/modules/network/sros/sros_command.py
 PUT /root/.ansible/tmp/ansible-local-5088eBPPGN/tmpTtv_Tf TO /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py
 EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'
 EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'
 EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'
fatal: [01465-RA1]: FAILED! =&gt; {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python"
    }, 
    "changed": false, 
    "invocation": {
        "module_args": {
            "commands": [
                "show version"
            ], 
            "host": null, 
            "interval": 1, 
            "match": "all", 
            "password": null, 
            "port": null, 
            "provider": {
                "host": "“01465-RA1”", 
                "password": null, 
                "port": null, 
                "ssh_keyfile": null, 
                "timeout": null, 
                "username": null
            }, 
            "retries": 10, 
            "ssh_keyfile": null, 
            "timeout": null, 
            "username": null, 
            "wait_for": null
        }
    }, 
    "msg": "Unable to decode JSON from response to exec_command({\"answer\": null, \"command\": \"show version\", \"prompt\": null}). Received 'None'.", 
    "rc": 1
}

PLAY RECAP ***********************************************************************************************************************************************************************
01465-RA1                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   


do you know this?
thanks
    [entry_title] =&gt; Contact
    [entry_permalink] =&gt; https://adminsave.wordpress.com/contact/
    [feedback_id] =&gt; 2d5ab32b3b732a9d710c8f170179e1c3
)
]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>118</wp:post_id>
  <wp:post_date>2020-05-14 13:24:23</wp:post_date>
  <wp:post_date_gmt>2020-05-14 13:24:23</wp:post_date_gmt>
  <wp:post_modified>2020-05-14 13:24:23</wp:post_modified>
  <wp:post_modified_gmt>2020-05-14 13:24:23</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>2d5ab32b3b732a9d710c8f170179e1c3</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>2</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>feedback</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_feedback_extra_fields</wp:meta_key>
    <wp:meta_value><![CDATA[a:0:{}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_feedback_email</wp:meta_key>
    <wp:meta_value><![CDATA[a:2:{s:2:"to";a:1:{i:0;s:29:""teenoko" <teenoko@gmail.com>";}s:7:"message";s:6853:"<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>

<b>Name:</b> daniele<br /><br /><b>Email:</b> daniele.dedda@gmail.com<br /><br /><b>Comment:</b> Hi...!!<br />
I see your video on ansible in SR nokia router, and i try to make this in my lab.<br />
my playbook is:<br />
---<br />
- hosts: &#091;nokia_7705&#093;<br />
  gather_facts: no<br />
  connection: local<br />
<br />
  vars:<br />
     cli:<br />
       host: “{{ inventory_hostname }}”<br />
<br />
  tasks:<br />
  - name: run show version on remote devices<br />
    sros_command:<br />
      commands:<br />
        -  show version<br />
      provider: "{{ cli }}"<br />
<br />
<br />
but this give me an error:<br />
<br />
<br />
&#091;root@localhost ansible&#093;# ansible-playbook prova.yml  -vvvv<br />
ansible-playbook 2.9.7<br />
  config file = /home/daniele/Desktop/ansible/ansible.cfg<br />
  configured module search path = &#091;u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules'&#093;<br />
  ansible python module location = /usr/lib/python2.7/site-packages/ansible<br />
  executable location = /usr/bin/ansible-playbook<br />
  python version = 2.7.5 (default, Apr  2 2020, 13:16:51) &#091;GCC 4.8.5 20150623 (Red Hat 4.8.5-39)&#093;<br />
Using /home/daniele/Desktop/ansible/ansible.cfg as config file<br />
setting up inventory plugins<br />
host_list declined parsing /etc/ansible/hosts as it did not pass its verify_file() method<br />
script declined parsing /etc/ansible/hosts as it did not pass its verify_file() method<br />
auto declined parsing /etc/ansible/hosts as it did not pass its verify_file() method<br />
Parsed /etc/ansible/hosts inventory source with ini plugin<br />
Loading callback plugin default of type stdout, v2.0 from /usr/lib/python2.7/site-packages/ansible/plugins/callback/default.pyc<br />
<br />
PLAYBOOK: prova.yml **************************************************************************************************************************************************************<br />
Positional arguments: prova.yml<br />
become_method: sudo<br />
inventory: (u'/etc/ansible/hosts',)<br />
forks: 5<br />
tags: (u'all',)<br />
verbosity: 4<br />
connection: smart<br />
timeout: 10<br />
1 plays in prova.yml<br />
<br />
PLAY &#091;nokia_7705&#093; ****************************************************************************************************************************************************************<br />
META: ran handlers<br />
<br />
TASK &#091;run show version on remote devices&#093; ****************************************************************************************************************************************<br />
task path: /home/daniele/Desktop/ansible/prova.yml:11<br />
 using connection plugin network_cli (was local)<br />
 starting connection from persistent connection plugin<br />
 local domain socket does not exist, starting it<br />
 control socket path is /root/.ansible/pc/a81275af52<br />
 local domain socket listeners started successfully<br />
 unable to load cliconf for network_os sros<br />
 <br />
 local domain socket path is /root/.ansible/pc/a81275af52<br />
 socket_path: /root/.ansible/pc/a81275af52<br />
 ESTABLISH LOCAL CONNECTION FOR USER: daniele<br />
 EXEC /bin/sh -c 'echo ~root &amp;&amp; sleep 0'<br />
 EXEC /bin/sh -c '( umask 77 &amp;&amp; mkdir -p "` echo /root/.ansible/tmp `"&amp;&amp; mkdir /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 &amp;&amp; echo ansible-tmp-1589462258.24-5097-73989966464121="` echo /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121 `" ) &amp;&amp; sleep 0'<br />
 Attempting python interpreter discovery<br />
 EXEC /bin/sh -c 'echo PLATFORM; uname; echo FOUND; command -v '"'"'/usr/bin/python'"'"'; command -v '"'"'python3.7'"'"'; command -v '"'"'python3.6'"'"'; command -v '"'"'python3.5'"'"'; command -v '"'"'python2.7'"'"'; command -v '"'"'python2.6'"'"'; command -v '"'"'/usr/libexec/platform-python'"'"'; command -v '"'"'/usr/bin/python3'"'"'; command -v '"'"'python'"'"'; echo ENDFOUND &amp;&amp; sleep 0'<br />
 EXEC /bin/sh -c '/usr/bin/python &amp;&amp; sleep 0'<br />
Using module file /usr/lib/python2.7/site-packages/ansible/modules/network/sros/sros_command.py<br />
 PUT /root/.ansible/tmp/ansible-local-5088eBPPGN/tmpTtv_Tf TO /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py<br />
 EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'<br />
 EXEC /bin/sh -c '/usr/bin/python /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/AnsiballZ_sros_command.py &amp;&amp; sleep 0'<br />
 EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1589462258.24-5097-73989966464121/ &gt; /dev/null 2&gt;&amp;1 &amp;&amp; sleep 0'<br />
fatal: &#091;01465-RA1&#093;: FAILED! =&gt; {<br />
    "ansible_facts": {<br />
        "discovered_interpreter_python": "/usr/bin/python"<br />
    }, <br />
    "changed": false, <br />
    "invocation": {<br />
        "module_args": {<br />
            "commands": &#091;<br />
                "show version"<br />
            &#093;, <br />
            "host": null, <br />
            "interval": 1, <br />
            "match": "all", <br />
            "password": null, <br />
            "port": null, <br />
            "provider": {<br />
                "host": "“01465-RA1”", <br />
                "password": null, <br />
                "port": null, <br />
                "ssh_keyfile": null, <br />
                "timeout": null, <br />
                "username": null<br />
            }, <br />
            "retries": 10, <br />
            "ssh_keyfile": null, <br />
            "timeout": null, <br />
            "username": null, <br />
            "wait_for": null<br />
        }<br />
    }, <br />
    "msg": "Unable to decode JSON from response to exec_command({\"answer\": null, \"command\": \"show version\", \"prompt\": null}). Received 'None'.", <br />
    "rc": 1<br />
}<br />
<br />
PLAY RECAP ***********************************************************************************************************************************************************************<br />
01465-RA1                  : ok=0    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   <br />
<br />
<br />
do you know this?<br />
thanks<br /><br /><br /><hr />Time: May 14, 2020 at 1:24 pm<br />IP Address: 193.33.19.125<br />Contact Form URL: https://adminsave.wordpress.com/contact/<br /><p>Sent by an unverified visitor to your site.</p>

</body>
</html>";}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Programatically Enable NETCONF and MD-CLI on Nokia - SROS]]></title>
  <link>https://adminsave.wordpress.com/2020/05/18/programatically-enable-netconf-and-md-cli-on-nokia-sros/</link>
  <pubDate>Mon, 18 May 2020 19:24:24 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=119</guid>
  <description/>
  <content:encoded><![CDATA[Hi everyone,

First things first, the code lives here:

<a href="https://github.com/h4ndzdatm0ld/sros-enable-netconf">https://github.com/h4ndzdatm0ld/sros-enable-netconf</a>

I wanted to put together a mini-series of posts on how to programatically enable netconf across many ALU/Nokia - SROS devices.

The theoretical problem we are trying to solve:
<ul>
	<li>Company Avifi has recently decided to enable NETCONF across their entire 7750 platform. They would like to do this all in one maintenance night.</li>
	<li>All of Avifi's network is currently documented and stored in Netbox. We must extract a list of 7750's and their IP addresses using the API requests.</li>
	<li>Programatically SSH into all the necessary devices:
<ul>
	<li>Enable NETCONF</li>
	<li>Create a NETCONF USER/PASSWORD</li>
	<li>Enable Model-Driven CLI.</li>
</ul>
</li>
</ul>
As a network engineer that's constantly having to re-use scripts, templates, etc - I'd see this as an opportunity to create two things:
<ol>
	<li>A tool I can easily use in my lab environment before I take this to production.</li>
	<li>A production ready tool that my team can use.</li>
</ol>
We'll start with a command line driven tool to easily target a single node, ssh into it and programatically enable NETCONF as well as change from the standard CLI to the new Model-Driven CLI that Nokia offers on their 7750's routers.
<blockquote>As I'm getting more into the Dev/NET/OPS side of the house, I'm starting to think about CI/CD, unit tests, version control and the extensive amount of testing and variables that may change when implementing network wide changes via automation.</blockquote>
Let's discuss some of the packages i'll be using with Python 3.

Everyone should be familiar with <strong>Netmiko</strong> by now. We'll use this to connect via SSH to our devices and manipulate our configurations.  As the starting point to this will be to build from a command line driven utility which targets a single node and expand into extracting a list of devices via Netbox, we will use <strong>argparse</strong> to send arguements from the CLI to our python script. <strong>NCCLIENT </strong>will be used to establish NETCONF connections. In order to not store passwords on our script, we will use <strong>getpass</strong> to prompt our users for passwords. On our future updated post, we'll call the <strong>pynetbox</strong> package / API client to interact with Netbox and extract the correct device IP addresses and run the script against it. <strong>xmltodict</strong> to convert the xml extracted file and parse to a dcitionary.

<img class="alignnone size-full wp-image-127" src="https://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-18-at-12.07.21-pm.png" alt="Screen Shot 2020-05-18 at 12.07.21 PM" width="738" height="240" />

The tool will accept the arguements above, but the SSH username is defaulted to 'admin'.

Once ran, the script will request for the SSH Password to the device, it will connect and send a list of commands to enable the NETCONF service and also switch from the Classic CLI to the new Model Driven CLI. Once this is complete, the SSH connection will be dropped and a new connection on port 830, the default NETCONF port will be established utilizing the new credentials. The tool will proceed to extract the running configuration, it will save a temp file and re-open it to parse it into a dictionary. We'll extract the system name and use it as a var to create a folder directory of configurations and save the XML configuration by system name.

<strong>Before running, open the script and edit the new usser credentials that you wish to pass for NETCONF connections. </strong>

At this point, i'm able to run this against a multitude of devices individually to test functionallity and make any adjustments before I implement the API connection into our Netbox server.

Below is the entire code, at beta. This command line driven utility will utilize NETMIKO to establish the initial connection to the device.  On the next post, we will take this code and change quite a bit to dynamically pass in a list of hosts from the NETBOX API.
<blockquote>
<div>
<div><code>import netmiko, ncclient, argparse, getpass, sys, time, xmltodict, os</div>
<div>from netmiko import ConnectHandler</div>
<div>from ncclient import manager</div>
<div>from ncclient.xml_ import *</div>
<div>from xml.etree import ElementTree</div>
<div>def get_arguments():</div>
<div>parser = argparse.ArgumentParser(description='Command Line Driven Utility To Enable NETCONF\</div>
<div>On SROS Devices And MD-CLI.')</div>
<div>parser.add_argument("-n", "--node", help="Target NODE IP", required=True)</div>
<div>parser.add_argument("-u", "--user", help="SSH Username", required=False, default='admin')</div>
<div>parser.add_argument("-p", "--port", help="NETCONF TCP Port", required=False, default='830')</div>
<div>args = parser.parse_args()</div>
<div>return args</div>
<div># Lets make it easier to send and receive the output to the screen.</div>
<div># We'll create a function to pass in a list of commands as arguements.</div>
<div>def send_cmmdz(node_conn,list_of_cmds):</div>
<div>''' This function will unpack the dictionary created for the remote host to establish a connection with</div>
<div>and send a LIST of commands. The output will be printed to the screen.</div>
<div>Establish the 'node_conn' var first by unpacking the device connection dictionary. Pass it in as an args.</div>
<div>'''</div>
<div>try:</div>
<div>x = node_conn.send_config_set(list_of_cmds)</div>
<div>print(x)</div>
<div>exceptExceptionas e:</div>
<div>print(f"Issue with list of cmdz, {e}")</div>
<div>def send_single(node_conn, command):</div>
<div>''' This function will unpack the dictionary created for the remote host to establish a connection with</div>
<div>and send a single command. The output will be printed to the screen.</div>
<div>Establish the 'node_conn' var first by unpacking the device connection dictionary. Pass it in as an args.[]</div>
<div>'''</div>
<div>try:</div>
<div>x = node_conn.send_command(command)</div>
<div>print (x)</div>
<div>exceptExceptionas e:</div>
<div>sys.exit(e)</div>
<div></div>
<div>def disconnect(node_conn):</div>
<div>try:</div>
<div>node_conn.disconnect()</div>
<div>exceptExceptionas e:</div>
<div>print(e)</div>
<div></div>
<div>def netconfconn(args,ncusername,ncpassword):</div>
<div>conn = manager.connect(host=args.node,</div>
<div>port=args.port,</div>
<div>username=ncusername,</div>
<div>password=ncpassword,</div>
<div>hostkey_verify=False,</div>
<div>device_params={'name':'alu'})</div>
<div>return conn</div>
<div>def saveFile(filename, contents):</div>
<div>''' Save the contents to a file in the PWD.</div>
<div>'''</div>
<div>try:</div>
<div>f = open(filename, 'w+')</div>
<div>f.write(contents)</div>
<div>f.close()</div>
<div>exceptExceptionas e:</div>
<div>print(e)</div>
<div>def createFolder(directory):</div>
<div>try:</div>
<div>ifnot os.path.exists(directory):</div>
<div>os.makedirs(directory)</div>
<div>exceptOSError:</div>
<div>print('Error: Creating directory. '+ directory)</div>
<div>def main():</div>
<div># Extract the Arguements from ARGSPARSE:</div>
<div>args = get_arguments()</div>
<div></div>
<div># Define the NETCONF USERNAME / PASSWORD:</div>
<div>NETCONF_USER = 'netconf'</div>
<div>NETCONF_PASS = 'NCadmin123'</div>
<div># # Create a dictionary for our device.</div>
<div>sros = {</div>
<div>'device_type': 'alcatel_sros',</div>
<div>'host': args.node,</div>
<div>'username': args.user,</div>
<div>'password': getpass.getpass(),</div>
<div>}</div>
<div># Pass in the dict and create the connection.</div>
<div>sros_conn = net_connect = ConnectHandler(**sros)</div>
<div># Establish a list of pre and post check commands.</div>
<div>print('Connecting to device and executing script...')</div>
<div>send_single(sros_conn, 'show system information | match Name')</div>
<div>send_single(sros_conn, 'show system netconf | match State')</div>
<div>enableNetconf = ['system security profile "netconf" netconf base-op-authorization lock',</div>
<div>'system security profile "netconf" netconf base-op-authorization kill-session',</div>
<div>f'system security user {NETCONF_USER} access netconf',</div>
<div>f'system security user {NETCONF_USER} password {NETCONF_PASS}',</div>
<div>f'system security user {NETCONF_USER} console member {NETCONF_USER}',</div>
<div>f'system security user {NETCONF_USER} console member "administrative"',</div>
<div>'system management-interface yang-modules nokia-modules',</div>
<div>'system management-interface yang-modules no base-r13-modules',</div>
<div>'system netconf auto-config-save',</div>
<div>'system netconf no shutdown',</div>
<div>'system management-interface cli md-cli auto-config-save',</div>
<div>'system management-interface configuration-mode model-driven']</div>
<div></div>
<div># Execute Script.</div>
<div>send_cmmdz(sros_conn, enableNetconf)</div>
<div></div>
<div># Validate NETCONF is enabled and Operational.</div>
<div>send_single(sros_conn,'show system netconf')</div>
<div></div>
<div># Disconnect from the SSH Connection to our far-end remote device.</div>
<div># We need to disconnect to open the pipe for python3 to establish netconf connection.</div>
<div></div>
<div>disconnect(sros_conn)</div>
<div>time.sleep(2)</div>
<div></div>
<div></div>
<div>try:</div>
<div># Now let's connect to the device via NETCONF and pull the config to validate.</div>
<div>nc = netconfconn(args, NETCONF_USER, NETCONF_PASS)</div>
<div></div>
<div># Grab the running configuration on our device, as an NCElement.</div>
<div>config = nc.get_config(source='running')</div>
<div></div>
<div># XML elemnent as a str.</div>
<div>xmlconfig = to_xml(config.xpath('data')[0])</div>
<div># Write the running configuration to a temp-file (from the data/configure xpath).</div>
<div>saveFile('temp-config.xml', xmlconfig)</div>
<div></div>
<div># Lets open the XML file, read it, and convert to a python dictionary and extract some info.</div>
<div></div>
<div>withopen('temp-config.xml', 'r') as temp:</div>
<div>content = temp.read()</div>
<div>xml = xmltodict.parse(content)</div>
<div>sys_name = xml['data']['configure']['system']['name']</div>
<div>createFolder('Configs')</div>
<div>saveFile(f"Configs/{sys_name}.txt", xmlconfig)</div>
<div></div>
<div>exceptExceptionas e:</div>
<div>print(f"Issue with NETCONF connection, {e}")</div>
<div></div>
<div></div>
<div>if __name__ == "__main__":</div>
<div>main()</code></div>
</div></blockquote>]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>119</wp:post_id>
  <wp:post_date>2020-05-18 19:24:24</wp:post_date>
  <wp:post_date_gmt>2020-05-18 19:24:24</wp:post_date_gmt>
  <wp:post_modified>2020-05-19 19:33:48</wp:post_modified>
  <wp:post_modified_gmt>2020-05-19 19:33:48</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>programatically-enable-netconf-and-md-cli-on-nokia-sros</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1589829866]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[43452]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[44403490818]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-05-18 at 12.05.56 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/05/18/programatically-enable-netconf-and-md-cli-on-nokia-sros/screen-shot-2020-05-18-at-12-05-56-pm/</link>
  <pubDate>Mon, 18 May 2020 19:06:33 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-18-at-12.05.56-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>126</wp:post_id>
  <wp:post_date>2020-05-18 19:06:33</wp:post_date>
  <wp:post_date_gmt>2020-05-18 19:06:33</wp:post_date_gmt>
  <wp:post_modified>2020-05-18 19:06:33</wp:post_modified>
  <wp:post_modified_gmt>2020-05-18 19:06:33</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-05-18-at-12-05-56-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>119</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-18-at-12.05.56-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-18-at-12.05.56-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:741;s:6:"height";i:210;s:4:"file";s:114:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-18-at-12.05.56-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:25306;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-05-18 at 12.07.21 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/05/18/programatically-enable-netconf-and-md-cli-on-nokia-sros/screen-shot-2020-05-18-at-12-07-21-pm/</link>
  <pubDate>Mon, 18 May 2020 19:07:39 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-18-at-12.07.21-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>127</wp:post_id>
  <wp:post_date>2020-05-18 19:07:39</wp:post_date>
  <wp:post_date_gmt>2020-05-18 19:07:39</wp:post_date_gmt>
  <wp:post_modified>2020-05-18 19:07:39</wp:post_modified>
  <wp:post_modified_gmt>2020-05-18 19:07:39</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-05-18-at-12-07-21-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>119</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-18-at-12.07.21-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-18-at-12.07.21-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:738;s:6:"height";i:240;s:4:"file";s:114:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-18-at-12.07.21-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:29229;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Programatically Enable NETCONF and MD-CLI on Nokia - SROS Using Netbox API. (Part 2)]]></title>
  <link>https://adminsave.wordpress.com/2020/05/19/programatically-enable-netconf-and-md-cli-on-nokia-sros-using-netbox-api-part-2/</link>
  <pubDate>Tue, 19 May 2020 21:32:56 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=133</guid>
  <description/>
  <content:encoded><![CDATA[CODE: <a href="https://github.com/h4ndzdatm0ld/sros-enable-netconf/blob/master/enable-netconf-netboxapi.py">https://github.com/h4ndzdatm0ld/sros-enable-netconf/blob/master/enable-netconf-netboxapi.py</a>

Okay, so you're still reading? Lets keep digging into the mind of the network team and see how this exercisce is going..  So far, we've got a command line tool that we can target one specific node and deploy a script to enable MD-CLI, Yang Models from Nokia and of course, NETCONF. But, how far does this really get us? Really, it's usefull to test on a handful of nodes and see the behaviour and response to our scripts in a lab environemnt. I've tested it on several SROS 19.10R3 A8's and SR1's.

It's time to elaborate on the script and use the tool the Avifi has already deployed and mainted, Netbox. If you haven't heard of Netbox, google it. In short it's an IPAM/DCIM and so much more. The customer has requested we do not make any changes to anything in the subnet 10.0.0.0/16, anything else is fair game.  Lucky for us, the IP's we need have been tagged with '7750', would you believe that?! We'll use a filter on our API call to extract the IP's that we need and loop through them doing, but also leaving out anything in the 10xspace. We've taken a step back from the command line driven tool model and make a few things a bit more static, by using default arguements from the argparse package.

Before writing any more code, lets pull an API token from the Netbox server.

Here are the instructions: <a href="https://netbox.readthedocs.io/en/stable/api/authentication/">https://netbox.readthedocs.io/en/stable/api/authentication/</a>

We'll put this token into our application.. not the most secure way of doing this, but for simplicity - we'll store it in a var in plain text for now. In my opinion, the authorization handled by the netbox administrator should theoretically prevent us from doing anything catastrophic when providing a user with an API token. .. in a perfect world ;)

Lets get to coding! <img class="alignnone size-full wp-image-138" src="https://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-19-at-1.16.50-pm.png" alt="Screen Shot 2020-05-19 at 1.16.50 PM" width="1120" height="332" />

I thought about passing the argsparsge args into this function and having the ability to pass in an arguement as a 'tag' to filter by on the API call, but I didn't think that was necessary. Although it could be usefull later and a quick and easy modification.

The code above shows <strong>nb</strong> as the pynetbox authenticated api requests. We then use the application form <strong>'ipam.ip_addresses</strong>' and filter by a tag, in which we pass in as an arguement on the function.
<blockquote>The customer requested we skip over any device in the RFC 10 Space, so we create a conditional statement to evaluate the IP's. Note this is a very broad catch, it should be redefined if this were production as 192, could very much contain '10.'. I would recommend adding the startswith() function and be more specific. But for now, this works.</blockquote>
&nbsp;

https://gist.github.com/h4ndzdatm0ld/c787191fc1fb48d509e1a69979bc73bc

&nbsp;

We loop through the IP results in which we got back from the API call and strip the subnet mask using regular expressions. We than pass the IP into our Netconf connection and proceed to get the configuration. Here is a snippet of the RegEX function to strip the /subnet mask from the IP.

https://gist.github.com/h4ndzdatm0ld/eea413ae2b76ee4a906a294664bd1f1d

Finally, I created a function that will establish the initial netcon connection and get.config. We save the netconf element to a file and open it to be able to parse the xml contents, with <strong>xmltodict</strong>. With this, we extract the system host name and use it as a var to create a folder directory and a file name. We save the running configuration in xml format.

https://gist.github.com/h4ndzdatm0ld/cd4bf5439acfae2133946632a10b1685]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>133</wp:post_id>
  <wp:post_date>2020-05-19 21:32:56</wp:post_date>
  <wp:post_date_gmt>2020-05-19 21:32:56</wp:post_date_gmt>
  <wp:post_modified>2020-05-19 21:36:51</wp:post_modified>
  <wp:post_modified_gmt>2020-05-19 21:36:51</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>programatically-enable-netconf-and-md-cli-on-nokia-sros-using-netbox-api-part-2</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_oembed_57af02a9a60edca8425584c48ca4bd6f</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1589923979]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[43452]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[44450073996]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_2b3ab2454644f302063dd50aabf5fb42</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_9125ed15967a10943181f7c7825a178d</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-05-19 at 1.16.50 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/05/19/programatically-enable-netconf-and-md-cli-on-nokia-sros-using-netbox-api-part-2/screen-shot-2020-05-19-at-1-16-50-pm/</link>
  <pubDate>Tue, 19 May 2020 20:17:21 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-19-at-1.16.50-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>138</wp:post_id>
  <wp:post_date>2020-05-19 20:17:21</wp:post_date>
  <wp:post_date_gmt>2020-05-19 20:17:21</wp:post_date_gmt>
  <wp:post_modified>2020-05-19 20:17:21</wp:post_modified>
  <wp:post_modified_gmt>2020-05-19 20:17:21</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-05-19-at-1-16-50-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>133</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/05/screen-shot-2020-05-19-at-1.16.50-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-19-at-1.16.50-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1120;s:6:"height";i:332;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/05/screen-shot-2020-05-19-at-1.16.50-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:52148;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[LISP - Loc/ID Separation Protocol (FREE ENCORE LAB)]]></title>
  <link>https://adminsave.wordpress.com/2020/07/23/lisp-loc-id-separation-protocol-free-encore-lab/</link>
  <pubDate>Thu, 23 Jul 2020 23:37:45 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=149</guid>
  <description/>
  <content:encoded><![CDATA[I have decided to continue my education and dig deeper into the Cisco world. As an engineer that's basically dedicated the past 4 years of his life into a Nokia IP/Routing world, I somtimes need to take a step back and spend time to understand other vendor's platform and emerging technologies. I recently passed the Cisco DevNet exam and well, it made me realize there is a lot of gaps in my knowledge regarding Cisco. I'm currently studying for ENCORE and hope to grasp some of the unfamiliar knowledge and refresh up on all the basics, OSPF, BGP, STP, etc..  I hold a  NRS II, which is basically a CCNP, but it involves a detailed 4 hour live router lab that must be performed in person under strict monitoring rules. My goal is to become a CCNP/NRS II by the end of the year. I've chosen to start labbing LISP, as SD-Access is an emplementation of VXLAN with LISP control plane. These are technologies I will be digging much deeper into as I have not had experience with them professionally.

Lets talk about Overlay Tunnels.  An overlay network is a logical or virtual network on top of a physical transport network, which is also known as the underlay network.

Some overlay tunneling technologies include, GRE, IPsec, LISP, VxLAN and MPLS. In this POST, I want to concentrate on LISP.

The main goal of LISP is to address the scalability problems with the growing route table of the internet.

A few KeyTerms to remmember:
<ul>
	<li><strong>Endpoint Identifier (EID</strong>) - The IP address of an endpoint within a LISP Site. EIDs are the same ip addresses in use today on endpoints (v4/v6).</li>
	<li><strong>LISP Site</strong> - The name of the Site where EID's and LISP routers live.</li>
	<li><strong>Ingress Tunnel Router (ITR)</strong> - LISP Routers that <strong>LISP-encapsulate</strong> IP Packets coming from EIDs that are <strong>destined outside</strong> the LISP site.</li>
	<li><strong>Egress tunnel router (ETR)</strong> - ETRs are LISP routers that <strong>de-encapsulate</strong> LISP-encapsulated IP packets coming from sites outside the LISP site and <strong>destined to EIDs within the LISP site. </strong></li>
	<li><strong>Tunnel Router (xTR)</strong> - Routers that perform ITR and ETR Functions. (Most routers wihtin an LISP domain)</li>
	<li><strong>Proxy ITR (PITR)</strong> -PITRS are for non-LISP sites that send traffic to EID destinations</li>
	<li><strong>Proxy ETR (PETR)</strong> - PETRS act just like ETRS, but for EIDs that send traffic to destinations at non-LISP sites.</li>
	<li><strong>LISP Router</strong> - Any router that performs any LISP functions.</li>
	<li><strong>Routing Location (RLOC)</strong> - RLOC is an IPv4/v6 address of an ETR that is Internet facing or core network facing.</li>
	<li><strong>Map Server (MS)</strong> - This is a network device (Router) that learns EID to prefix mapping entries from an ETR and stores them in a local EID-to-RLOC mapping database.</li>
	<li><strong>Map Resolver (MR)</strong> - Network device that receives LISP-encapsulated map requests from an ITR and finds the appropriate ETR to answer those requests by consulting the map server.</li>
	<li><strong>Map Server/Map Resolver (MS/MR)</strong> - When MS and MR are implemented on the same device.<img class="alignnone size-full wp-image-155" src="https://adminsave.files.wordpress.com/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png" alt="Screen Shot 2020-07-23 at 4.30.40 PM" width="1812" height="917" /></li>
</ul>
The advantage and key control plane feature of LISP is the efficiency and scalability of the on-deman routing, as it's not a PUSH model such as BGP or OSPF. LISP utilizes a pull model where only the requested routing information is provided, instead of a full table.

This entire operation sure feels like a DNS query. I felt this way the second I was updating the MS/MS in my lab telling it what the EID's prefixes within my LISP site was. It's an easy way to think of LISP and maybe that will click easier in your head.

Lets review the registration process for Site: Avifi-A on the left, CSR-A12.

<img class="alignnone size-full wp-image-155" src="https://adminsave.files.wordpress.com/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png" alt="Screen Shot 2020-07-23 at 4.30.40 PM" width="1812" height="917" />

If the traffic flow is from Site Avifi - B to Site Avifi-A, the Avifi-A router will be the ETR in this instance(technically, the device is confiured as itr/etr as it's providing both functions.). Avifi-A will need to adervtise it's Lo0 address to the MS/MR.

The EID for Avifi-A : 192.168.1.0/24 - This includes the Lo0 that's currently reachable on the router.

The RLOC is the interface address configured on Gi1 on the Avifi-A router. Although not displayed on the image, it's 10.0.1.2.

Here is an example configuration snippet of the database-mapping command to include the EID and the RLOC.
<blockquote><strong>R2-Avifi-A#show run | sec lisp</strong>
router lisp
database-mapping 192.168.1.0/24 10.0.1.2 priority 1 weight 100
ipv4 itr map-resolver 10.0.1.1</blockquote>
The Lab has since expanded to add CPE's with traditional OSPF routing between the xTR and the CPE. There is redistribution of connected subnets (loopbacks) and the xTR has an updated database to include this loopback.

I've also included an IPSEC via VTI that has an OSPF adjacency across a simulated ISP network with public IP addresses. This allows us to take advantage of a PxTR which is a PITR and PETR router collapsed into one device.  I've uploaded this EVE-NG LAB into my blog for you to downoad and play with..who knows, maybe ever learn about LISP!

I've left fun exercise for your to practice, if you wish to use this lab.

TASK:

Establish the underlay network for Site B's CPE to the PE. Once that's completed, ensure the EID is updated on the MS/MR and that the EID is reachable via LISP overlay network.

<a title="_Exports_eve-ng_export-20200724-023627" href="https://adminsave.files.wordpress.com/2020/07/exports_eve-ng_export-20200724-023627.zip">_Exports_eve-ng_export-20200724-023627</a>

&nbsp;]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>149</wp:post_id>
  <wp:post_date>2020-07-23 23:37:45</wp:post_date>
  <wp:post_date_gmt>2020-07-23 23:37:45</wp:post_date_gmt>
  <wp:post_modified>2020-07-23 23:46:23</wp:post_modified>
  <wp:post_modified_gmt>2020-07-23 23:46:23</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>lisp-loc-id-separation-protocol-free-encore-lab</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_oembed_9acd76938a51fbce6996f94a3877aae3</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1595547469]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[43452]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[46917884494]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-07-23 at 4.30.40 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/07/23/lisp-loc-id-separation-protocol-free-encore-lab/screen-shot-2020-07-23-at-4-30-40-pm/</link>
  <pubDate>Thu, 23 Jul 2020 23:30:49 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>155</wp:post_id>
  <wp:post_date>2020-07-23 23:30:49</wp:post_date>
  <wp:post_date_gmt>2020-07-23 23:30:49</wp:post_date_gmt>
  <wp:post_modified>2020-07-23 23:30:49</wp:post_modified>
  <wp:post_modified_gmt>2020-07-23 23:30:49</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-07-23-at-4-30-40-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>149</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1812;s:6:"height";i:917;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/07/screen-shot-2020-07-23-at-4.30.40-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:253267;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[_Exports_eve-ng_export-20200724-023627]]></title>
  <link>https://adminsave.wordpress.com/2020/07/23/lisp-loc-id-separation-protocol-free-encore-lab/_exports_eve-ng_export-20200724-023627/</link>
  <pubDate>Thu, 23 Jul 2020 23:37:28 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/07/exports_eve-ng_export-20200724-023627.zip</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>157</wp:post_id>
  <wp:post_date>2020-07-23 23:37:28</wp:post_date>
  <wp:post_date_gmt>2020-07-23 23:37:28</wp:post_date_gmt>
  <wp:post_modified>2020-07-23 23:37:28</wp:post_modified>
  <wp:post_modified_gmt>2020-07-23 23:37:28</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>_exports_eve-ng_export-20200724-023627</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>149</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/07/exports_eve-ng_export-20200724-023627.zip</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/07/exports_eve-ng_export-20200724-023627.zip]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[IMG_1162]]></title>
  <link>https://adminsave.wordpress.com/2020/07/23/lisp-loc-id-separation-protocol-free-encore-lab/img_1162/</link>
  <pubDate>Thu, 23 Jul 2020 23:45:41 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/07/img_1162.jpg</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>162</wp:post_id>
  <wp:post_date>2020-07-23 23:45:41</wp:post_date>
  <wp:post_date_gmt>2020-07-23 23:45:41</wp:post_date_gmt>
  <wp:post_modified>2020-07-23 23:45:41</wp:post_modified>
  <wp:post_modified_gmt>2020-07-23 23:45:41</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>img_1162</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>149</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/07/img_1162.jpg</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/07/img_1162.jpg]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1600;s:6:"height";i:1200;s:4:"file";s:85:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/07/img_1162.jpg";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:262614;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Nornir 3.0 - Multi-Vendor L3VPN/VPRN (IOSxR/Nokia) IaC - Configuration Deployment via NETCONF/NORNIR]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/</link>
  <pubDate>Thu, 24 Sep 2020 16:31:22 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=166</guid>
  <description/>
  <content:encoded><![CDATA[What a title to this post, right?

With the recent release of Nornir 3.0  - I wanted to explore the capabilities of Nornir and I already know, I will prob never use Ansible for Network Automation ever again.. ;) However, the reason for this post is to give a high level overview of Nornir 3.0 and provide a guide to convert 2.x Nornir/Netconf scripts over to 3.0.

Some of the topics explored in this post will include but not limited to the following:
<ol>
	<li>Infrastructure as Code : (Jinja2 Template Rendering and YAML defined network state)</li>
	<li>Nornir 3.0.
<ol>
	<li>Installation</li>
	<li>Plugins</li>
	<li>Directory Structure</li>
</ol>
</li>
	<li>NETCONF/YANG</li>
	<li>Netmiko</li>
</ol>
<h2>How to Follow Along</h2>
I'd recommed to download the code from my github and review the repo. Once you are familiar with the code you should be ready to start reading along.
<h3><span style="color:#ff0000;">CODE:</span></h3>
<h2><a href="https://github.com/h4ndzdatm0ld/Norconf">https://github.com/h4ndzdatm0ld/Norconf</a></h2>
Review the topology below: You will become the operator of this network throughout this journey. The solution you are implementing will ease the workload of the deployment engineers and possibly save your company some money. Depending on the issue that XYZ company is trying to solve, it's becoming clear that not every one requires a high dollar solution to automate their networks with vendor specific nms, orchestrators, etc. <img class="alignnone size-full wp-image-180" src="https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png" alt="Screen Shot 2020-09-21 at 3.58.38 PM" width="1696" height="1462" />

For those of you new to Nornir, it's an automation framework written in Python.  If you are familiar with Ansible, you can adapt quite easily to Nornir as long as you know how to get around with python. You will quickly realize how flexible it is. One of my favorite features of Nornir is multithreading, allowing concurrent connections which in return makes this framework incredibly fast. We will discuss the topic of workers/threads a little more later in this post.
<h2>Getting Started</h2>
Begin by installing nornir with a simple <strong>pip3 install nornir </strong>

Lets discuss the directory structure. You can see here there is quite a bit going on..

<span style="color:#ff0000;"><strong>NOTE</strong>: All of the following files/directories have to manually be created. These are not autocreated. Take a minute and re-create the folders/files under a chosen filepath. I started a git repo and this is where I created all my folders.</span>

We've created a <strong>defaults</strong>, <strong>groups</strong> and <strong>hosts</strong> yml file under our '<strong>inventory</strong>' directory. We actually have a <strong>config</strong>.yml file which specifies the path location of these files<img class="  wp-image-183 alignleft" style="color:var(--color-text);" src="https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.37.12-am.png" alt="Screen Shot 2020-09-22 at 9.37.12 AM" width="251" height="323" /><span style="color:var(--color-text);">. This config file is later passed into the nornir class that's instantiated inside our python runbook, norconf.py. As always, our '</span><strong style="color:var(--color-text);">templates</strong><span style="color:var(--color-text);">' folder contains our Jinja2 files with the appropriate template files to render the configuration of the L3VPN and VPRNs for our multivendor environment. These are named according to their corresponding host platform and function.</span>

<span style="color:var(--color-text);"><strong>Template Naming Example:</strong></span>
<ul>
	<li style="list-style-type:none;">
<ul>
	<li style="list-style-type:none;">
<ul>
	<li style="list-style-type:none;">
<ul>
	<li style="list-style-type:none;">
<ul>
	<li style="list-style-type:none;">
<ul>
	<li style="list-style-type:none;">
<ul>
	<li><span style="color:var(--color-text);">{iosxr}-(platform) -{vrf}-(purpose)-.j2 (extension). The actual template is XML data following yang models.  The reason to use the platform in the naming scheme, is to be able to use the host platform during our program execution and match the name of the file with the help of f strings. This is just one way to do it and you can find other ways that make more sense to your deployment.</span></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
Additional files in here, such as nc_tasks.py are adopted from Nick Russos project which uses nornir 2.X. He's configured some custom netconf tasks at a time in which netconf was originally being introduced into Nornir. The Log file is self explanatory.

At the time of this writing, the nornir_netconf plugin is not yet available for Nornir 3.0 as a direct pip dowload/install.  What I have done is a series of try/except and mostly failures to get this to work. I had to take a step back and understand a lot of what's happening under the hood of nornir.  I've cloned the REPO @ <a href="https://github.com/nornir-automation/nornir_netconf@first">https://github.com/nornir-automation/nornir_netconf@first</a> and tried to install it via Poetry, but this was mostly a huge waste of time and nothing worked, particularly with the plugin configuration of Nornir. I removed the installation and went the pip route straight from git.

I was able to install the the code by using pip + git using the following:
<blockquote>pip3 install git+https://github.com/nornir-automation/nornir_netconf@first</blockquote>
However, during the process I got an exception "AttributeError: module 'enum' has no attribute 'IntFlag'" From some searching around, it's due to a discrepency with using enum34. I ran the following to ensure the package was present and removed it.
<blockquote><strong>pip freeze | grep enum34</strong>

➜ nornir_netconf-first pip3 freeze | grep enum34
enum34==1.1.10</blockquote>
Looks like I do have it in installed ...  A quick, 'pip3 uninstall enum34' and re-ran the original pip3 install from git+git_page and the installation was successfull. I wonder what I broke by removing enum34 ;)
<blockquote>Installing collected packages: nornir-netconf
Successfully installed nornir-netconf-1.0.0

Python 3.8.2 (v3.8.2:7b3ab5921f, Feb 24 2020, 17:52:18)
[Clang 6.0 (clang-600.0.57)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
<span style="color:#ff0000;">&gt;&gt;&gt; import nornir_netconf</span>
&gt;&gt;&gt; print(<span style="color:#ff0000;">SO FAR SO GOOD!)</span></blockquote>
I was having an issue with nornir netconf plugin originally and had to investigate how to manually register a plugin. That is before I found out how to get around the hurdle and install via git+pip. Here is the code I used to manually register the plugin in my runbook directly, in case anyone ever wants to register a new plugin..although a lot has to happen for any of this to work.
<div>
<blockquote>
<div>from nornir.core.plugins.connections import ConnectionPluginRegister</div>
<div>from nornir_netconf.plugins.connections import Netconf</div>
<div>ConnectionPluginRegister.register("netconf", ConnectionPluginRegister)</div></blockquote>
<div>So, at this point - the netconf plugin is working.  The only problem I see with the nornir_netconf plugin is the returned output. After all this work, I realized if you do a print_result, to extract all the output - you don't exactly get what you need to verify the sucess of the rpc-operation, such as the rpc_reply. This is a little troublesome. However, I did find that the custom netconf function written by Nick Russo gave me exactly what I need. At this time, I will not be using the nornir_netconf methods and instead import the custom russo tasks. See below:</div>
</div>
&nbsp;

https://gist.github.com/h4ndzdatm0ld/759161287434cdb4e464884c41309710

<span style="color:var(--color-text);">Importing this function, I am actually able to receive this rpc_reply from a successfull RPC operation. This is critical to the operation of my script - as I write conditional statements depending on the returning output of the tasks.run result. </span>
<blockquote>
<div>&lt;?xml version="1.0"?&gt;
&lt;rpc-reply message-id="urn:uuid:28f57844-94cb-4ecc-b927-ba1f5318eab7" xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0" xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;</div>
<div>&lt;ok/&gt;
&lt;/rpc-reply&gt;</div></blockquote>
<div>During the time of this writing I did express my concern on the lack of response from this edit_config function on the soon to be introduced nornir_netconf plugin to Patrick Ogenstad who is leading the development of the netconf plugin. Sounds like he may be updating the code to actually return rpc reply in the output, more to come on that. As of now, I will continue with Russo's custom function as I see this being a requirement for any netconf python script to properply acknowledge the result. Additionally, his nc_tasks.py file contains a netconf_commit function which is a necessity for applying configurations against candidate target stores.</div>
<div></div>
<div>I treat NETCONF as an API. I need a response and I need a response NOW! ;)</div>
<div></div>
<div>Okay, enough about getting NETCONF to work on this new Nornir version.</div>
<div></div>
<div>Lets go over the inventory directory and the defaults, groups and hosts file.</div>
<div></div>
<h2>The Host File:</h2>
<blockquote>
<div>
<div>
<div>---</div>
<div><strong>R3_CSR</strong>:</div>
<div>hostname: 192.168.0.223</div>
<div>groups:</div>
<div>  - CSR</div>
<div><strong>R3_SROS_PE:</strong></div>
<div>hostname: 192.168.0.222</div>
<div>groups:</div>
<div>  - NOKIA</div>
<div>data:</div>
<div>  region: west-region</div>
<div><strong>R8_IOSXR_PE:</strong></div>
<div>hostname: 192.168.0.182</div>
<div>groups:</div>
<div>  - IOSXR</div>
<div>data:</div>
<div>  region: west-region</div>
</div>
</div></blockquote>
<div>A simple yaml file that looks very familiar.. this should be an easy transition for all the Ansible folks. You define a host, hostname and specify a group to avoid duplication of data.</div>
<div></div>
<div>This is an example of the groups file - The inheritance from the group file is passed straight to each host that's part of the group. If there is data inside the defaults yaml file, this is also inherited to all hosts. Something to keep in mind.</div>
<h2>The Group File</h2>
<div><img class="  wp-image-186 alignleft" src="https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-12.23.32-pm.png" alt="Screen Shot 2020-09-22 at 12.23.32 PM" width="296" height="663" /></div>
<div><span style="color:#ff0000;"><strong>NOTE</strong>:</span></div>
<div></div>
<ul>
	<li><span style="color:#ff0000;"> The  data.target key is inherited and called upon during the execution of rpc-edit config to point the operation against the correct netconf data store)</span></li>
	<li><span style="color:#ff0000;">These connection options can make or break the process</span></li>
</ul>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<h2>The Config File</h2>
<ul>
	<li><strong>A config.yaml file must specify the location of the hosts, groups and defaults fiiles.</strong></li>
</ul>
<div><img class="alignnone  wp-image-187" src="https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-2.10.34-pm.png" alt="Screen Shot 2020-09-22 at 2.10.34 PM" width="395" height="276" /></div>
<div></div>
<h2>Threads</h2>
We have specified 100 num_workers, which really means we can have up to 100 concurrent multithreaded sessions to devices.  The way I think about Nornir running process is everything you're doing is in a giant 'for loop'. The tasks runs through all the devices in the inventory (unless you specify a filter) one by one.  Although there isn't a for statement written anywhere visible, you're looping through all the devices in your inventory. However, using threads you're actually doing this is parallel.  You could technically specify the 'plugin: serial' and not take advantage of threads.
<h2>Plugins</h2>
<div></div>
<div>Before we move forward and begin writing our runbook/code - one thing I want to emphasize is the difference in Nornir 2.x and 3.x.  You must individually install the plugins! Here is a link to the current Nornir Plugins available and documentation/how - to from Nornir.</div>
<div></div>
<div><a href="https://nornir.tech/nornir/plugins/">https://nornir.tech/nornir/plugins/</a></div>
<div></div>
<div><a href="https://nornir.readthedocs.io/en/latest/plugins/">https://nornir.readthedocs.io/en/latest/plugins/</a></div>
<div></div>
<div>This part is incredibly important, as the power of Nornir is basically to become a sort of orchestartor and controller of these tasks which include running code that take advantage of these plugins. In our code we will use load_yaml, template_file, netmiko and the nornir_utils.</div>
<div></div>
<blockquote>
<div>pip3 install nornir_utils</div>
<div>pip3 install nornir_netmiko</div>
<div>pip3 install nornir_jinja2</div></blockquote>
<h2>Run Book (Python Script of Compiled 'tasks')</h2>
<div>As we begin writing our runbook for our project, lets instantiate the <strong>InitNornir</strong> class and pass in the custom config.yml file:</div>
<blockquote>
<div>
<div>
<div>from nornir import InitNornir</div>
<div>from nornir_netmiko.tasks import netmiko_send_command</div>
<div>from nornir_utils.plugins.functions import print_result</div>
<div>from nornir_utils.plugins.tasks.data import load_yaml</div>
<div>from nornir_jinja2.plugins.tasks import template_file</div>
<div>from nornir_netconf.plugins.tasks import netconf_edit_config</div>
<div>from nc_tasks import netconf_edit_config, netconf_commit</div>
<div>import xmltodict, json, pprint</div>
<div>__author__ = 'Hugo Tinoco'</div>
<div>__email__ = 'hugotinoco@icloud.com'</div>
<div><strong># Specify a custom config yaml file.</strong></div>
<div></div>
<div><strong>nr = InitNornir('<span style="color:#ff0000;">config.yml</span>')</strong></div>
</div>
</div></blockquote>
<div></div>
<h2>Filters</h2>
<h2><img class="alignnone size-full wp-image-180" style="color:var(--color-text);font-size:16px;font-weight:400;" src="https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png" alt="Screen Shot 2020-09-21 at 3.58.38 PM" width="1696" height="1462" /></h2>
What are filters and how do we create them? A filter is a selection of hosts in which you want to execute a runbook against. For our main example in this post, we are an operator who is in charge of deploying a L3VPN/VPRN in a multi-vendor environemnt at the core. This will include Nokia SR 7750 and Cisco IOSxR. However, our hosts file contains ALL of our devices that are available in our network. The L3VPN we are deploying is only spanning across our 'west-region' pictured on the bottom left of the topology above. There are two CPE's, one attached to the Nokia 7750 and one to the Cisco IOSxR. In order to deploy this service, we want to specify within Nornir that we only need to execute the tasks against these two specific routers. The rest of the network doesn't need to know about this service.  Below is a snippet of the 'hosts.yml' file which has customized region key and west-region item. You can see this is duplicated to the R8_IOSXR_PE device.  That's it! We've identified common ground between these devices, being in the 'west-region' of our network.
<blockquote>
<div><strong>R3_SROS_PE:</strong></div>
<div>hostname: 192.168.0.222</div>
<div>groups:</div>
<div>  - NOKIA</div>
<div>data:</div>
<div>  region: west-region</div>
<div></div>
<div><strong>R8_IOSXR_PE:</strong></div>
<div>hostname: 192.168.0.182</div>
<div>groups:</div>
<div>  - IOSXR</div>
<div>data:</div>
<div>  region: west-region</div></blockquote>
Now lets write some code to ensure nornir knows this is a filter.
<blockquote>
<div>
<div><strong># Filter the hosts by the 'west-region' site key.</strong></div>
<div></div>
<div><strong>west_region = nr.filter(region='<span style="color:#ff0000;">west-region</span>')</strong></div>
</div></blockquote>
<div>Wow, that was a lot.  This will come in handy once we are ready to execute the entire runbook in our main() function. Remember, the west-region is specified in the hosts file. This could also be inherited from the group file, if the hosts belongs to said group.</div>
<div></div>
<h2>Infrastructure as Code</h2>
We'll be extracting information from our Yaml files which are variables inputted by the user along side our Jinja2 templates consisting of our Yang Models. We use Jinja2 to distribute the correct variables across our yang models for proper rendering. For distributing  the configurations via NETCONF across our core network we enlist the help of Nornir to manage all of theses tasks. We're allowing Nornir to handle the flow and procedures to ensure proper deployment.
<h2>VARS</h2>
Below is the yaml file containing our vars which will be utilized to render the j2 template.  The following is for the Nokia platform:
<blockquote>
<div>
<div>---</div>
<div>VRF:</div>
<div>  - SERVICE_NAME: AVIFI</div>
<div>    SERVICE_ID: '100'</div>
<div>     CUSTOMER_ID: 200</div>
<div>    CUSTOMER_NAME: AVIFI-CO</div>
<div>    DESCRIPTION: AVIFI-CO</div>
<div>    ASN: '64500'</div>
<div>    RD: 100</div>
<div>    RT: 100</div>
<div>    INTERFACE_NAME: TEST-LOOPBACK</div>
<div>    INTERFACE_ADDRESS: 3.3.3.3</div>
<div>    INTERFACE_PREFIX: 32</div>
</div></blockquote>
<div>If you are not familiar with how a L3VPN works, this is the time you can review this topic. In order to properly configure a L3VPN service for your customer, you must provide a service name for your VRF. In the Nokia/SROS world, you must also provide a customer_id, which is passed into the creation of the service for the specific customer. A customer name is also passed into the vars file as you want to specify the name of the customer not just a numerical value(id). The Autonomous system is a requirement for the VRF, along side the route-target and route-distinguisher.  Additionally, we will be creating a loopback interface within the VRF for testing purposes. The goal here is not only to deploy the service but to validate L3 Connectivity across the core via Multi-Protocol BGP (MP-BGP). MPLS has already been configured in the core.</div>
<div></div>
<h2>Jinja 2 - yang:sr:conf</h2>
There are so many important pieces to construct this automation project. The J2 template file, must include everything that is necessary to create this service. Below is the example for the Nokia device. Please see my code via the github repo at the top of this document to review the IOSxR J2 Template file. There are also supporting documents at the end of this document if you need more information on Jinja2

https://gist.github.com/h4ndzdatm0ld/6735855049104432ffbf0169ba53a660
<h2>Runbook Walkthrough</h2>
https://gist.github.com/h4ndzdatm0ld/9f7975fa6a49d7815adb70975498d41b

Our overall goal is to deploy the VPRN/L3VPN. We start by creating a few custom functions.

We create <strong>get_vrfcli and get_vprncli</strong>. These two functions take advantage of <strong>netmiko_send_command plugin</strong> and are using platform specific cli commands. We will use these two commands to retrieve the service status. Then we take the two functions and wrap them inside <strong>cli_stats</strong>.  We load the yaml file using the <strong>load_yaml plugin</strong> from Nornir. Once the task is executed, we drill into our vars file and extract the service name as a variable from our loaded dictionary (yaml file). This variable is then passed into the get_vrpncli/get_vrfcli functions to execute against our devices. At this point, if we execute the cli_stats tasks against our west-region, we can use conditional statements to execute the correct command against the correct platform device. The way in which we access the platform, is by simply digging into the task.host.platform key. This will return the value of the key.

<span style="color:#ff0000;"><strong>NOTE:</strong> </span>

I am working on a video tutorial and demonstration of Nornir 3.0. During the video, I will create additional tasks in which verify the L3 Connectivity via simple ping commands.
<h2>Bulk of the Code:</h2>
https://gist.github.com/h4ndzdatm0ld/f9942cf65ba73c99b49c91d9c8a9609a

&nbsp;

Lets review the i<strong>ac_render</strong> function. We simply load our yaml vars and render our j2 templates. Special attention to the following:
<table class="highlight tab-size js-file-line-container">
<tbody>
<tr>
<td id="file-gistfile1-txt-LC10" class="blob-code blob-code-inner js-file-line">template= f"{task.host.platform}-vrf.j2"</td>
</tr>
<tr>
<td id="file-gistfile1-txt-L11" class="blob-num js-line-number">This allows us to properly select a template that matches the host during the execution of the task. Using our f-strings, we pass in the task.host.platform and append the '-vrf' which in turn matches the name of our stored xml templates inside our templates directory. Example: "iosxr-vrf.j2"</td>
</tr>
</tbody>
</table>
At this point we have our payload to deploy against our devices. One thing to note, the result of the rendered template using the nornir plugin, template_file is a Nornir Class. <span style="text-decoration:underline;">Make sure this gets converted to a str:</span> "payload = str(vprn.result)". We will pass this into our <strong>netconf_edit_config</strong> task as the payload to deploy via netconf.
<blockquote>deploy_config = task.run(task=netconf_edit_config, target=task.host['target'],             config=payload)</blockquote>
Lets examine this line of code. We assign '<strong>deploy_config'</strong> as the variable for the returning output of our task. The task we will execute is the '<strong>netconf_edit_config</strong>' function. Again, this is a wrapper of <strong>ncclient</strong>, which I hope you're familiar with - if not, please give it a google search or review the additional resources at the bottom of the doc.
Now, the' target=task.host['target']' is the data store to use during our rpc NETCONF call. We specified this for our host inside our groups file. See below:

NOKIA:
username: 'admin'
password: 'admin'
platform: alcatel_sros
port: 22
data:
<span style="color:#ff0000;">    target: candidate </span>

NETCONF has three data stores in which we can execute configuration changes against.
<ol>
	<li> Running</li>
	<li> Startup</li>
	<li> Candidate</li>
</ol>
In my opinion, candidate is the most valuable operation. We are able to input a config change, validate and once we are sure of the changes we must commit the change. As the operator of this network, we must be sure not to cause any outages or create any rippling effects from our automation. We will insepct the RPC reply and ensure all is good and if so, we will commmit out changes for the customer.

Line 23, has a conditional statement where we dig into the actual platform of the hosts that's running within our task. We simply compare it to alcatel_sros or iosxr, as those are our two core devices in this example. We extract a couple different items in the result of our loaded yaml file which we will use to return some output to the screen and provide results in a readable format. We do the same with our iosxr results.

At this point, the <strong>netconf_edit_config</strong> wrapper for ncclient should have executed the netconf rpc and editted the configuration.

We store the reply in a variable called rpcreply, by extracting the .result attribute out of our original deploy_config variable. This gives us the xml reply and we can check the result of the reply by using 'if rpcreply.ok:'

Line 42 gives us a simple feedback to let us know the result has returned OK. We now run the <strong>netconf_commit</strong>  task and confirm the change.

Finally, lets validate some of the services applied and use our custom function <strong>'nc_getvprn'</strong> against our Nokia 7750.
<blockquote>nc_getvprn(task, serviceid=serviceid, servicename=servicename,   customerid=customerid)</blockquote>
Earlier, we extrracted some vars from our yaml file and loaded them into script as the following: 'serviceid', 'servicename' and 'customerid'. We use these variables to execute the task and get some information by parsing the result of the <strong>netconf_get_config</strong> rpc call. We process this information by using <strong>xmltodict.parse</strong> and converting the xml to a Python dictionary. We compare the values found inside our running configuration against the desired state of our network element. Infrastructue as code is fun right? Once we do some comparasion of our items, we return meaningful output to the screen to let us, the operator know that everything is configured as expected.

If you are not familiar with xmltodict, I will provide additional references at the bottom of this document.

At the time of this writing I only have completed the compliance check against the Nokia sros device. I will most likley be extending this code to do the same against the IOSxR device. Below is the customer 'nc_getvprn" function which we just described.

&nbsp;
<h2>Execution</h2>
https://gist.github.com/h4ndzdatm0ld/160ff829b3fd3ffb09e3c29334315588

It's that easy. We run our tasks against our filter, west_region to narrow down our hosts for our multi-vendor environment. Lets review the output!

https://gist.github.com/h4ndzdatm0ld/94e2019c6cb79246c48af70bbd4ec701

From the output above, we deployed our L3VPN (IOSxR) and VPRN (NOKIA) device. After we take full advantage of our IaC+Nornir, we return back to our CLI Scraping automation and rely on Netmiko to run simple show commands to view the VRF is actually present and validate the services.
<h2>Additional Resources:</h2>
<a href="https://github.com/twin-bridges/nornir_course/blob/master/nornir3_changes.md?__s=bqzu9wzbekhnsuqbiqz4">Kirk Byers Nornir 3.0 Docs</a>

<a href="https://blogs.cisco.com/developer/network-configuration-template">Jinja 2 - Render Templates</a>

<a href="https://github.com/ncclient/ncclient">NETCONF - ncclient (Github)</a>

<a href="https://docs.python-guide.org/scenarios/xml/">XMLTODICT </a>]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>166</wp:post_id>
  <wp:post_date>2020-09-24 16:31:22</wp:post_date>
  <wp:post_date_gmt>2020-09-24 16:31:22</wp:post_date_gmt>
  <wp:post_modified>2020-09-24 16:31:22</wp:post_modified>
  <wp:post_modified_gmt>2020-09-24 16:31:22</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_oembed_85866a83149117bc962f3ce3c26d6e7e</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>publicize_linkedin_url</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1600965085]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[43452]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[49187495768]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_done_23208930</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wpas_done_25086273</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_7ec423b534032dc1953a77e95bef199a</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_thumbnail_id</wp:meta_key>
    <wp:meta_value><![CDATA[180]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_41ee0d1655445ade06166576591ae108</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_93757d62a49e2c8e34d889e1eebcfd2a</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_oembed_a8afe81332de57e78cf5d94076621f63</wp:meta_key>
    <wp:meta_value><![CDATA[{{unknown}}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-21 at 3.58.38 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-21-at-3-58-38-pm/</link>
  <pubDate>Tue, 22 Sep 2020 01:11:32 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>180</wp:post_id>
  <wp:post_date>2020-09-22 01:11:32</wp:post_date>
  <wp:post_date_gmt>2020-09-22 01:11:32</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 01:11:32</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 01:11:32</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-21-at-3-58-38-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1696;s:6:"height";i:1462;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-21-at-3.58.38-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:359398;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-22 at 9.35.10 AM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-22-at-9-35-10-am/</link>
  <pubDate>Tue, 22 Sep 2020 16:35:22 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.35.10-am.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>181</wp:post_id>
  <wp:post_date>2020-09-22 16:35:22</wp:post_date>
  <wp:post_date_gmt>2020-09-22 16:35:22</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 16:35:22</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 16:35:22</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-22-at-9-35-10-am</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.35.10-am.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.35.10-am.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:520;s:6:"height";i:670;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.35.10-am.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:297496;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-22 at 9.35.10 AM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-22-at-9-35-10-am-2/</link>
  <pubDate>Tue, 22 Sep 2020 16:35:37 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.35.10-am-1.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>182</wp:post_id>
  <wp:post_date>2020-09-22 16:35:37</wp:post_date>
  <wp:post_date_gmt>2020-09-22 16:35:37</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 16:35:37</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 16:35:37</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-22-at-9-35-10-am-2</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.35.10-am-1.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.35.10-am-1.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:520;s:6:"height";i:670;s:4:"file";s:115:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.35.10-am-1.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:297496;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-22 at 9.37.12 AM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-22-at-9-37-12-am/</link>
  <pubDate>Tue, 22 Sep 2020 16:37:50 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.37.12-am.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>183</wp:post_id>
  <wp:post_date>2020-09-22 16:37:50</wp:post_date>
  <wp:post_date_gmt>2020-09-22 16:37:50</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 16:37:50</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 16:37:50</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-22-at-9-37-12-am</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-9.37.12-am.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.37.12-am.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:520;s:6:"height";i:670;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-9.37.12-am.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:295413;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-22 at 12.23.32 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-22-at-12-23-32-pm/</link>
  <pubDate>Tue, 22 Sep 2020 19:24:02 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-12.23.32-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>186</wp:post_id>
  <wp:post_date>2020-09-22 19:24:02</wp:post_date>
  <wp:post_date_gmt>2020-09-22 19:24:02</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 19:24:02</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 19:24:02</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-22-at-12-23-32-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-12.23.32-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-12.23.32-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:546;s:6:"height";i:1222;s:4:"file";s:114:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-12.23.32-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:83860;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Screen Shot 2020-09-22 at 2.10.34 PM]]></title>
  <link>https://adminsave.wordpress.com/2020/09/24/nornir-3-0-multi-vendor-l3vpn-vprn-iosxr-nokia-iac-configuration-deployment-via-netconf-nornir/screen-shot-2020-09-22-at-2-10-34-pm/</link>
  <pubDate>Tue, 22 Sep 2020 21:10:46 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-2.10.34-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>187</wp:post_id>
  <wp:post_date>2020-09-22 21:10:46</wp:post_date>
  <wp:post_date_gmt>2020-09-22 21:10:46</wp:post_date_gmt>
  <wp:post_modified>2020-09-22 21:10:46</wp:post_modified>
  <wp:post_modified_gmt>2020-09-22 21:10:46</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-09-22-at-2-10-34-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>166</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/09/screen-shot-2020-09-22-at-2.10.34-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-2.10.34-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:684;s:6:"height";i:478;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/09/screen-shot-2020-09-22-at-2.10.34-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:33730;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Nornir 3.0 - ::NETCONF:: Config Backup - XML/Jz0n]]></title>
  <link>https://adminsave.wordpress.com/2020/10/02/nornir-3-0-netconf-config-backup-xml-jz0n/</link>
  <pubDate>Fri, 02 Oct 2020 13:17:00 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=206</guid>
  <description/>
  <content:encoded><![CDATA[<!-- wp:paragraph -->
<p>First things first: Review the code:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>Code</strong>: <a rel="noreferrer noopener" href="https://github.com/h4ndzdatm0ld/nornir3-netconf-backup" target="_blank">https://github.com/h4ndzdatm0ld/nornir3-netconf-backup</a></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The goal of this walkthrough is to backup configuration files from NETCONF enabled devices. Thanks to the flexibility of python, we have the choice to either back up the files as JSON or XML..  We will use the <strong>nornir_utils, </strong>'<strong>write_file'</strong> plugin which is now decoupled from Nornir (for those of you used to Nornir 2.x).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Ensure you have this plugin available, by installing it via pip:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">pip3 install nornir_utils</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Lets inspect our host file and rely on a custom data k, v: <strong>'operation: netconf-enabled' </strong>to use as our Filter.</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>R3_SROS_PE:
  hostname: 192.168.0.222
  groups:
    - NOKIA
  data:
    region: west-region
    operation: netconf-enabled

R8_IOSXR_PE:
  hostname: 192.168.0.182
  groups:
    - IOSXR
  data:
    region: west-region
    operation: netconf-enabled</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>Lets begin our Nornir 3.0 runbook: Pay close attention to our filter, as we pass in (operation="netconf-enabled") from above. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Also ensure the additional libraries being imported, such as xmltodict and json, etc.. are present and installed.</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>from nornir import InitNornir
from nornir_utils.plugins.functions import print_result
import datetime, os, xmltodict, json, sys
from nornir_utils.plugins.tasks.files import write_file
from nornir_netconf.plugins.tasks import netconf_get_config

__author__ = "Hugo Tinoco"
__email__ = "hugotinoco@icloud.com"

# Specify a custom config yaml file.
nr = InitNornir("config.yml")

# Filter the hosts by the 'west-region' site key.
netconf_devices = nr.filter(operation="netconf-enabled")</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>A couple custom functions that we will take advantage of to assist us in creating directories and converting XML to JSON.</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>def create_folder(directory):
    """Helper function to automatically generate directories"""
    try:
        if not os.path.exists(directory):
            os.makedirs(directory)
    except OSError:
        print("Error: Creating directory. " + directory)


def xml2json(xmlconfig):
    """Simple function to conver the extract xml config and convert it to JSON str"""
    try:
        xml = xmltodict.parse(str(xmlconfig))
        return json.dumps(xml, indent=2)
    except Exception as e:
        print(f"Issue converting XML to JSON, {e}")</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>The <strong>create_folder</strong> function is a simple way to pass in a directory name and use the os library to create a new directory, if it's not present. This is helpful as we will use this function to generate the 'backup' folder in our code to store our configuration files.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>xml2json</strong> function is exactly that. We take in a XML string and return it in JSON. </p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":228,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large"><img src="https://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-2.01.09-pm.png?w=1024" alt="" class="wp-image-228" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>The Bulk of the code:</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>def get_config(task, json_backup=False, xml_backup=False):
    """Use the get_config operation to retrieve the full xml config file from our device.
    If 'json_backup' set to True, the xml will be converted to JSON and backedup as well.
    """
    response = task.run(task=netconf_get_config)
    xmlconfig = response.result

    # Path to save output: This path will be auto-created for your below&gt;
    path = f"Backups/{task.host.platform}"

    if json_backup == False and xml_backup == False:
        sys.exit("JSON and XML are both set to False. Nothing to backup.")

    # Generate Directories:
    create_folder(path)

    # Generate Time.
    x = datetime.datetime.now()
    today = x.date()

    # If the 'True' Bool val is passed into the xml_config task function,
    # convert xml to json as well and backup.
    if json_backup == True:
        json_config = xml2json(xmlconfig)

        write_file(
            task, filename=f"{path}/{task.name}_{today}_JSON.txt", content=json_config
        )
    if xml_backup == True:
        write_file(
            task, filename=f"{path}/{task.name}_{today}_XML.txt", content=xmlconfig
        )


def main():

    netconf_devices.run(task=get_config, json_backup=True, xml_backup=True)


if __name__ == "__main__":
    main()
</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>Lets review. The <strong>get_config</strong> will take in the nornir task and have two boolean parameters which default to False, which are: XML backup and JSON backup. This allows us to specify if we want to backup the config in simple XML format, JSON format.. or both if you desire.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>We start by extracting the config, using the nornir_netconf: netconf_get_config task. This retrieves the configuration and we extract the .result attribute and wrap it into a variable.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, we create a path as to where the files will be backed-up. We use f strings to format the directory structure: We specify a folder 'Backups" followed by the platform of the device in which the current task is being executed against. </p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code># Path to save output: This path will be auto-generated.
path = f"Backups/{task.host.platform}"

# Generate Directories:
create_folder(path)</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>We take this custom generated path and pass it in to our <strong>create_folder</strong> function and allow python to help us set up the directories.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>One other thing to prepare for our file naming convention is a date to append at the end of the filename. Lets create a variable out of the datetime library and pass it in later on as we name our files.</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>    # Generate Time.
    x = datetime.datetime.now()
    today = x.date()
</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>Finally, lets handle the boolean values and allow our program to make a decision on how to save the configuration (XML, JSON or both).</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>One thing to note, earlier in the code I added a system exception to exit the program if neither json_backup or xml_backup are set to True. There is no reason to execute and generate folders without a backup file to create and to place in the directories.</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>   if json_backup == False and xml_backup == False:
        sys.exit("JSON and XML are both set to False. Nothing to backup.")</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>    # If the 'True' Bool val is passed into the xml_config task function,
    # convert xml to json as well and backup.
    if json_backup == True:
        json_config = xml2json(xmlconfig)

        write_file(
            task, filename=f"{path}/{task.name}_{today}_JSON.txt", content=json_config
        )
    if xml_backup == True:
        write_file(
            task, filename=f"{path}/{task.name}_{today}_XML.txt", content=xmlconfig
        )</code></pre>
<!-- /wp:code -->

<!-- wp:paragraph -->
<p>In the above code we take advantage of our <strong>xml2json</strong> custom function if we want to convert the retrieved XML config from our device and use our <strong>write_file</strong> Nornir Plugin to create and write the file.  Something that's also utilized from Nornir, is the task.host.name. <em>If we are strategic enough we can even use our task.name of the current task and use it to our advantage. </em> You can see we create the filename using f-strings and pass in the <strong>task.host.name </strong>alongside the <strong>today </strong>variable which was constructed earlier from the datetime library. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Execution:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The final result, depending on which format you chose to backup the configs will vary. In this demonstration, i've enabled both choices. See the tree directory below that was auto created for me and the<strong> write_file</strong> plugin from Nornir was helpful enough to save the configuration files.  The Backups directory was generated, followed by the platform (task.host.platform) and finally the name of the file</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>filename = {task.host.name}_{date}_{XML_OR_JSON}</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":240,"width":580,"height":506,"sizeSlug":"large"} -->
<figure class="wp-block-image size-large is-resized"><img src="https://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-7.55.32-pm.png?w=706" alt="" class="wp-image-240" width="580" height="506" /></figure>
<!-- /wp:image -->

<!-- wp:paragraph -->
<p>There you have it! A simple way to take advantage of the Nornir 3.0 framework and create backups of all your NETCONF enabled devices in either XML or JSON format.  </p>
<!-- /wp:paragraph -->]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>206</wp:post_id>
  <wp:post_date>2020-10-02 06:17:00</wp:post_date>
  <wp:post_date_gmt>2020-10-02 13:17:00</wp:post_date_gmt>
  <wp:post_modified>2020-10-02 06:58:31</wp:post_modified>
  <wp:post_modified_gmt>2020-10-02 13:58:31</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>nornir-3-0-netconf-config-backup-xml-jz0n</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="post_tag" nicename="json"><![CDATA[json]]></category>
  <category domain="post_tag" nicename="network-automation"><![CDATA[network automation]]></category>
  <category domain="post_tag" nicename="nornir"><![CDATA[nornir]]></category>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <category domain="post_tag" nicename="xml"><![CDATA[xml]]></category>
  <wp:postmeta>
    <wp:meta_key>_thumbnail_id</wp:meta_key>
    <wp:meta_value><![CDATA[228]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_attr</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_dimensions</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_responsive_height</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_accordion_ie_support</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>amp_status</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>spay_email</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1601645187]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_published</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_rest_api_client_id</wp:meta_key>
    <wp:meta_value><![CDATA[11]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[49480108418]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>publicize_linkedin_url</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_done_23208930</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wpas_done_25086273</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[screen-shot-2020-10-01-at-2.01.09-pm]]></title>
  <link>https://adminsave.wordpress.com/screen-shot-2020-10-01-at-2-01-09-pm/</link>
  <pubDate>Thu, 01 Oct 2020 21:42:22 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-2.01.09-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>228</wp:post_id>
  <wp:post_date>2020-10-01 21:42:22</wp:post_date>
  <wp:post_date_gmt>2020-10-01 21:42:22</wp:post_date_gmt>
  <wp:post_modified>2020-10-01 21:42:22</wp:post_modified>
  <wp:post_modified_gmt>2020-10-01 21:42:22</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-10-01-at-2-01-09-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-2.01.09-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-2.01.09-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:1350;s:6:"height";i:1190;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-2.01.09-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:144278;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[screen-shot-2020-10-01-at-7.12.36-pm]]></title>
  <link>https://adminsave.wordpress.com/screen-shot-2020-10-01-at-7-12-36-pm/</link>
  <pubDate>Fri, 02 Oct 2020 02:13:51 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-7.12.36-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>233</wp:post_id>
  <wp:post_date>2020-10-02 02:13:51</wp:post_date>
  <wp:post_date_gmt>2020-10-02 02:13:51</wp:post_date_gmt>
  <wp:post_modified>2020-10-02 02:13:51</wp:post_modified>
  <wp:post_modified_gmt>2020-10-02 02:13:51</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-10-01-at-7-12-36-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-7.12.36-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-7.12.36-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:706;s:6:"height";i:616;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-7.12.36-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:435428;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[screen-shot-2020-10-01-at-7.55.32-pm]]></title>
  <link>https://adminsave.wordpress.com/screen-shot-2020-10-01-at-7-55-32-pm/</link>
  <pubDate>Fri, 02 Oct 2020 02:55:52 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-7.55.32-pm.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>240</wp:post_id>
  <wp:post_date>2020-10-01 19:55:52</wp:post_date>
  <wp:post_date_gmt>2020-10-02 02:55:52</wp:post_date_gmt>
  <wp:post_modified>2020-10-01 19:55:52</wp:post_modified>
  <wp:post_modified_gmt>2020-10-02 02:55:52</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>screen-shot-2020-10-01-at-7-55-32-pm</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2020/10/screen-shot-2020-10-01-at-7.55.32-pm.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-7.55.32-pm.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:706;s:6:"height";i:616;s:4:"file";s:113:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2020/10/screen-shot-2020-10-01-at-7.55.32-pm.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:306491;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Implementing XR Traffic Controller (XTC) in IP/MPLS &amp; Segment Routing Service-Provider Networks.]]></title>
  <link>https://adminsave.wordpress.com/2021/05/23/implementing-xr-traffic-controller-xtc-in-ip-mpls-amp-segment-routing-service-provider-networks/</link>
  <pubDate>Sun, 23 May 2021 21:19:18 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=250</guid>
  <description/>
  <content:encoded><![CDATA[<!-- wp:paragraph -->
<p>Hello! Thank you for taking the time to view my blog and (possibly) follow along! I have been spending time preparing for the DEVNET SPAUTO specialist certification and I hope to create some great content thats publically available for those trying to achieve this cert.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><br>I've been gathering all the lab materials and automation I've created at the following personal repository:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><a href="https://github.com/h4ndzdatm0ld/spauto_devnet.git">SPAUTO DEVNET REPO</a><br></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This material will also be included inside the WIKI pages for the repo.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>For my DEVNET SPAUTO studies I've decided to dedicate quite some time to XTC as I have never used or seen this application in a production Service Provider environment. This topic is part of the Automation and Orchestration (30%) from the SPAUTO blueprint.&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">4.6 Implement XR traffic controller
(including topology information transfer to XTC) </pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Let's gets some general terms out of the way before we continue with our Lab demo.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>PCEP</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>PCEP is a hierarchical protocol, running over TCP port 4189. PCEP has two main functions:</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>Path Computation Element <strong>(PCE)</strong> - A software controller acting as the server within the PCEP protocol. The PCE has a global view of the entire topology of a network and is able to centralize Path Computation and apply Traffic-Engineering policies. PCE can be clustered for redundancy.</li><li>Path Computation Client <strong>(PCC)</strong> - The clients are network devices that can act as IP/MPLS Head-END Label Edge Routers (LER). The PCC devices receive operation instructions when signaling LSPs across a network (or multi-domain network) from the PCE. Optionally, local parameters can be used within the construct of the LSP when signaling alongside the information received from the PCE.</li></ol>
<!-- /wp:list -->

<!-- wp:paragraph -->
<p>There are several implementations of PCE solutions, like Juniper's SDN North Star and Cisco Open SDN controllers (OpenDayLight). However, in our lab topology we will be using a Cisco IOSXRv as the XTC (PCE) server. All other devices that inquiry information from the XTC device (PCE) will be the acting PCC clients. We have two devices that are acting as Route-Reflectors in our lab, we will also enlist them as a synchronized pair of XR Traffic Controllers.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>BGP Link-State</strong></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>BGP-LS is a newer extended address-family for BGP.&nbsp; (AFI=16388, SAFI=71) - This family distributes network link-state information to the northbound controller (XTC/PCE or JunOS Northstar, OpendayLight, etc) This AFI provides BGP with Traffic-Engineering capabilities by mapping the network out, regardless of reachability or separated ASN/Domains. This is because the networks IGP (OSPF or ISIS) link-state database is exported (distributed) through BGP.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Okay, lets head over to the demo! Our goal in our demonstration will outline an LSP being deployed across our IP/MPLS Network with Segment-Routing as the underlying Transport. Also, an LSP will be deployed across a multi-domain (ISIS-CORE &amp; ISIS-100) network. This specific multi-domain LSP is an incredible feature! Our PE1 LSP will have a far-end destination of PE100 which resides in a different domain and PE &lt;&gt; PE100 do not have network reachability to each other.&nbsp;</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><strong>XTC</strong><br>XR Traffic Controller will be an IOSXRv device in our network. This device will have full PCE Server capabilities.</p>
<!-- /wp:paragraph -->

<!-- wp:image {"id":260,"sizeSlug":"large","linkDestination":"none"} -->
<figure class="wp-block-image size-large"><img src="https://adminsave.files.wordpress.com/2021/05/mpls_sdn_era_topology.png?w=1024" alt="" class="wp-image-260" /></figure>
<!-- /wp:image -->

<!-- wp:heading {"level":3} -->
<h3>PRE-REQs:</h3>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>There will be some basic information pertaining to Segment - Routing, but we will not go into great detail on how to configure SR in our network.</p>
<!-- /wp:paragraph -->

<!-- wp:list {"ordered":true} -->
<ol><li>Ensure your BGP sessions to the predetermined IOSXR device that will become the XTC Controller have BGP-LS enabled.</li><li>Ensure link-state information is being distributed from your IGP. In our case, we are using IS-IS. From the topology map, we are redistributing link-state information from our Provider Edge devices PE4 and PE2 as they are the edge devices between this Multi-Domain (ISIS) topology. This information is all propagated back to the Route-Reflector which is going to be our XTC/PCE controller.</li><li>Example IS-IS link-state distribution:</li></ol>
<!-- /wp:list -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">config t
router isis core
distribute link-state level 2</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:list {"ordered":true,"start":3} -->
<ol start="3"><li>Enable the link-state address family inside the BGP instance. Since I am enabling this on a Route-Reflector with a CLIENTS group, I will also add the family to the neighbor group. It's important to add the address-family to the main BGP configuration otherwise the commit will fail. This family will also be added to the remote clients peering with this group.</li></ol>
<!-- /wp:list -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">config t
router bgp 65000
address-family link-state link-state
exit
neighbor-group CLIENTS
address-family link-state link-state
commit</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:list {"ordered":true,"start":5} -->
<ol start="5"><li>Enable XTC On the virtualized IOSXR Route Reflectors with state-sync to neighboring RR. I chose to use a RR for the sake of resources and ease to start as all BGP-LS information is readily available within this device.</li></ol>
<!-- /wp:list -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">pce
address ipv4 {{loopback0}}
logging no-path
!
state-sync ipv4 172.16.0.201
segment-routing
! 
end</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Verify there is BGP LS information available at the RRs posing as the XTC PCE Server. This is a must before moving forward!</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">show bgp link-state link-state</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Verify that link-state topology is available for the PCE. This command is being performed from the PCE/XR Traffic Controller (IOSXR RR)</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">show pce ipv4 topology</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>All of the hosts within our topology should be available in the link-state data. Visualizing the topology is easy, by piping the command in the following way:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_RR2#show pce ipv4 topology | include Host

Sat May 22 21:03:24.507 UTC

&amp;nbsp; Host name: AS65000_P1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE3

&amp;nbsp; Host name: AS65000_P2

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: 1720.1610.0022

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_P1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_RR1

&amp;nbsp; Host name: AS65000_PE1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: 1720.1610.0022

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_P1

&amp;nbsp; Host name: AS65000_PE3

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_P1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE4

&amp;nbsp; Host name: 1720.1610.0022

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE1

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_P2

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE100

&amp;nbsp; Host name: AS65000_PE4

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_P2

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE3

&amp;nbsp; Host name: AS65000_RR1

&amp;nbsp; Host name: AS65000_RR2

&amp;nbsp; Host name: AS65000_PE100

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: 1720.1610.0022

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE101

&amp;nbsp; Host name: AS65000_PE101

&amp;nbsp; &amp;nbsp; &amp;nbsp; Host name: AS65000_PE100</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->
<h2>LSP Configuration (Inter-Domain LSP)</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>Lets create an example LSP from our node AS65000_PE1 to our FOREIGN ISIS DOMAIN 100, PE101.<br>We will provide the traffic-eng configuration within MPLS to use our PCE peer (RR2). We will source our connection from our Loopback0 address at PE1.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Before we begin, lets check the computed path is available at the PCE XTC. If the path is not available, there could be some BGP-LS data missing or further troubleshooting is necessary before continuing. If there is no path, the LSP will not form at the PE.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Our PE device does NOT have reachability into ISIS Domain 100. We can verify this by attempting to reach the Loopback0 at PE101:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_PE1#show ip int br
Sun May 23 16:32:25.952 UTC

Interface                      IP-Address      Status          Protocol Vrf-Name
Loopback0                      172.16.0.11     Up              Up       default 

&lt;------omitted------&gt;

RP/0/0/CPU0:AS65000_PE1#ping 172.16.100.101

Sun May 23 16:08:08.862 UTC

Type escape sequence to abort.

Sending 5, 100-byte ICMP Echos to 172.16.100.101, timeout is 2 seconds:

UUUUU

Success rate is 0 percent (0/5)

RP/0/0/CPU0:AS65000_PE1#</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>However, if we perform a path computation from the XTC device, which has a full view of the network topology, we should be able to see some results:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_RR2#sh pce ipv4 path source 172.16.0.11 destination 172.16.100.101
Sun May 23 16:32:47.661 UTC

Path:
----:
Hop0: 10.0.0.2
Hop1: 10.0.0.6
Hop2: 10.0.0.10
Hop3: 11.0.0.5</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Okay, so our XTC/PCE Server has a path to build an LSP! Start by configuring MPLS Traffic Engineering to use the PCE server.</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">conf t
!
mpls traffic-eng
 pce
  peer source ipv4 172.16.0.11
  peer ipv4 172.16.0.202
  !
  segment-routing
  stateful-client
!
commit
end</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Now, let's configure the new tunnel interface to use IGP metrics across our topology with a path-option determined by the PCE/XTC.</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">conf t
!
interface tunnel-te101
 ipv4 unnumbered Loopback0
 autoroute destination 172.16.100.101
 destination 172.16.100.101
 path-selection
  metric igp
 !
 path-option 1 dynamic pce address ipv4 172.16.0.202
!
end</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>The tunnel should now be built and established! Lets take a look at our tunnel details. Notice we are using the computed path from PCE! This path does not exists in our local route-table, particularly the last hop into unknown territory of ISIS Domain 100.</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">Name: tunnel-te101  Destination: 172.16.100.101  Ifhandle:0x1f0 
  Signalled-Name: AS65000_PE1_t101
  Status:
    Admin:    up Oper:   up   Path:  valid   Signalling: connected

    path option 1,  type dynamic pce 172.16.0.202 (Basis for Setup, path weight 220)
    G-PID: 0x0800 (derived from egress interface properties)
    Bandwidth Requested: 0 kbps  CT0
    Creation Time: Sun May 23 08:49:04 2021 (07:54:00 ago)
  Config Parameters:
    Bandwidth:        0 kbps (CT0) Priority:  7  7 Affinity: 0x0/0xffff
    Metric Type: IGP (interface)
    Path Selection:
      Tiebreaker: Min-fill (default)
    Hop-limit: disabled
    Cost-limit: disabled
    Path-invalidation timeout: 10000 msec (default), Action: Tear (default)
    AutoRoute: disabled  LockDown: disabled   Policy class: not set
    Forward class: 0 (default)
    Forwarding-Adjacency: disabled
    Autoroute Destinations: 1
    Loadshare:          0 equal loadshares
    Auto-bw: disabled
    Fast Reroute: Disabled, Protection Desired: None
    Path Protection: Not Enabled
    BFD Fast Detection: Disabled
    Reoptimization after affinity failure: Enabled
    Soft Preemption: Disabled
  History:
    Tunnel has been up for: 07:45:13 (since Sun May 23 08:57:51 UTC 2021)
    Current LSP:
      Uptime: 07:45:13 (since Sun May 23 08:57:51 UTC 2021)

  Path info (PCE computed path):
  Hop0: 10.0.0.3
  Hop1: 10.0.0.7
  Hop2: 10.0.0.11
  Hop3: 11.0.0.4
Displayed 1 (of 5) heads, 0 (of 0) midpoints, 0 (of 2) tails
Displayed 1 up, 0 down, 0 recovering, 0 recovered heads</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>The same tunnel creation has been applied from PE101 back towards PE1 from PE101.<br>Lets take a quick look at the tunnel configuration from PE101:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_PE101#show run interface tunnel-te11
Sun May 23 20:36:42.456 UTC
interface tunnel-te11
 ipv4 unnumbered Loopback0
 autoroute destination 172.16.0.11
 destination 172.16.0.11
 path-selection
  metric igp
 !
 path-option 1 dynamic pce address ipv4 172.16.0.202
!</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>And finally, let's validate our MPLS te tunnel has a valid LSP path from PE101 to PE1</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_PE101#traceroute mpls traffic-eng tunnel-te 11
Sun May 23 20:44:30.904 UTC

Tracing MPLS TE Label Switched Path on tunnel-te11, timeout is 2 seconds

Codes: '!' - success, 'Q' - request not sent, '.' - timeout,
  'L' - labeled output interface, 'B' - unlabeled output interface, 
  'D' - DS Map mismatch, 'F' - no FEC mapping, 'f' - FEC mismatch,
  'M' - malformed request, 'm' - unsupported tlvs, 'N' - no rx label, 
  'P' - no rx intf label prot, 'p' - premature termination of LSP, 
  'R' - transit router, 'I' - unknown upstream index,
  'X' - unknown return code, 'x' - return code 0

Type escape sequence to abort.

  0 11.0.0.4 MRU 1500 [Labels: 24033 Exp: 0]
L 1 11.0.0.5 MRU 1500 [Labels: 24020 Exp: 0] 0 ms
. 2 *
. 3 *
! 4 10.0.0.2 30 ms
RP/0/0/CPU0:AS65000_PE101#</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:heading -->
<h2>MPLS LSP From XTC with Segment Routing as Transport</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>This scenario is almost identical, but we take full advantage of Segment-Routing as the transport. We have already configured our MPLS Traffic-Engineering to contact the PCE server for Path-Computation and everything has been verified. Now, while creating our Tunnel Interfaces, our Path-Options will be Dynamic from PCE but with Segment Routing. Lets take a look at what a tunnel will look like from PE1 to PE4 within the same IS-IS Domain:</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_PE1#show run interface tunnel-te10044
Sun May 23 20:45:28.282 UTC
interface tunnel-te10044
 ipv4 unnumbered Loopback0
 destination 172.16.0.44
 path-selection
  metric igp
 !
 path-option 1 dynamic pce address ipv4 172.16.0.202 segment-routing
!</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Great, our tunnel is configured and operationally up. Now, let's review the Tunnel details and review the Path Option using Segment-Routing and the PCE Computed path by the XTC.</p>
<!-- /wp:paragraph -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">RP/0/0/CPU0:AS65000_PE1#show mpls traffic-eng tunnels 10044
Sun May 23 20:46:25.638 UTC


Name: tunnel-te10044  Destination: 172.16.0.44  Ifhandle:0x1d0 
  Signalled-Name: AS65000_PE1_t10044
  Status:
    Admin:    up Oper:   up   Path:  valid   Signalling: connected

    path option 1, (Segment-Routing) type dynamic pce 172.16.0.202 (Basis for Setup)
        Reroute pending (Path-option inuse by the current LSP has been modified)
      Bandwidth:        0 kbps (CT0) Priority:  7  7 Affinity: 0x0/0xffff
      Metric Type: IGP (interface)
      Path Selection:
        Tiebreaker: Min-fill (default)
        Protection: any (default)
      Hop-limit: disabled
      Cost-limit: disabled
      Path-invalidation timeout: 10000 msec (default), Action: Tear (default)
    Last PCALC Error [Reopt]: Sun May 23 08:42:33 2021
      Info: failed to find path
    G-PID: 0x0800 (derived from egress interface properties)
    Bandwidth Requested: 0 kbps  CT0
    Creation Time: Sun May 23 08:38:54 2021 (12:07:31 ago)
  Config Parameters:
    Bandwidth:        0 kbps (CT0) Priority:  7  7 Affinity: 0x0/0xffff
    Metric Type: IGP (interface)
    Path Selection:
      Tiebreaker: Min-fill (default)
      Protection: any (default)
    Hop-limit: disabled
    Cost-limit: disabled
    Path-invalidation timeout: 10000 msec (default), Action: Tear (default)
    AutoRoute: disabled  LockDown: disabled   Policy class: not set
    Forward class: 0 (default)
    Forwarding-Adjacency: disabled
    Autoroute Destinations: 0
    Loadshare:          0 equal loadshares
    Auto-bw: disabled
    Path Protection: Not Enabled
    BFD Fast Detection: Disabled
    Reoptimization after affinity failure: Enabled
    SRLG discovery: Disabled
  History:
    Tunnel has been up for: 12:05:04 (since Sun May 23 08:41:21 UTC 2021)
    Current LSP:
      Uptime: 12:05:04 (since Sun May 23 08:41:21 UTC 2021)
    Reopt. LSP:
      Last Failure:
        LSP not signalled, has no S2Ls
        Date/Time: Sun May 23 20:46:21 UTC 2021 [00:00:04 ago]

  Path info (PCE computed path):
  Hop0: 10.0.0.3
  Hop1: 10.0.0.7
  Hop2: 10.0.0.11
Displayed 1 (of 5) heads, 0 (of 0) midpoints, 0 (of 3) tails
Displayed 1 up, 0 down, 0 recovering, 0 recovered heads
RP/0/0/CPU0:AS65000_PE1#</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p>Looks like everything is working! We could now deploy VPN services across this multi-domain network, as we have fully established a bi-directional LSP path from IS-IS Domain CORE and IS-IS Domain 100.</p>
<!-- /wp:paragraph -->

<!-- wp:heading {"level":1} -->
<h1>Troubleshooting commands</h1>
<!-- /wp:heading -->

<!-- wp:list -->
<ul><li>show mpls traffic-eng pce peer<ul><li>Validate the session establishment with the XR Traffic Controller.</li></ul></li><li>show mpls traffic-eng tunnels {tunnel_name}<ul><li>View MPLS tunnel information in detail, such as PCE computated path.</li></ul></li><li>traceroute mpls traffic-eng tunnel-te {tunel id}<ul><li>MPLS traceroute</li></ul></li></ul>
<!-- /wp:list -->

<!-- wp:heading -->
<h2>Summary</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>The power of the XR Controller to allow you dynamically create IP/MPLS or Segment-Routing Traffic Engineered tunnels is incredible. We have only scratched the surface, but this is enough to understand the concept of what XTC is providing for a large SP Network. There are some use-cases that have been shared by networks who are using this feature in production and it looks very promising. I can think of a specific merger in my career that we could have benefited greatly from this. As XTC has been fully implemented to be a feature of the IOSXR Family, it's going to become incredibly easy to adopt in production networks. One thing to note is that BGP-LS is playing a KEY role in the success of XTC. Hopefully this has covered enough grounds for the SPAUTO exam and look forward to taking the exam and being prepared in this topic!</p>
<!-- /wp:paragraph -->

<!-- wp:heading -->
<h2>What's Next?!</h2>
<!-- /wp:heading -->

<!-- wp:paragraph -->
<p>For my next blog, I will be using a similar use-case with XTC, but also automagically deploy a L3VPN or L2VPN with the help of an NSO instance! This will showcase how incredibly useful NSO can be when paired with XTC from the perspective of a Large Network Operator. Stay Tuned!</p>
<!-- /wp:paragraph -->]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>250</wp:post_id>
  <wp:post_date>2021-05-23 14:19:18</wp:post_date>
  <wp:post_date_gmt>2021-05-23 21:19:18</wp:post_date_gmt>
  <wp:post_modified>2021-05-23 14:29:52</wp:post_modified>
  <wp:post_modified_gmt>2021-05-23 21:29:52</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name>implementing-xr-traffic-controller-xtc-in-ip-mpls-amp-segment-routing-service-provider-networks</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>1</wp:is_sticky>
  <category domain="post_tag" nicename="sdn"><![CDATA[SDN]]></category>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>timeline_notification</wp:meta_key>
    <wp:meta_value><![CDATA[1621804761]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>jetpack_anchor_podcast</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>jetpack_anchor_episode</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>jetpack_anchor_spotify_show</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wpas_is_tweetstorm</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_last_editor_used_jetpack</wp:meta_key>
    <wp:meta_value><![CDATA[block-editor]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_thumbnail_id</wp:meta_key>
    <wp:meta_value><![CDATA[260]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wpas_skip_25086273</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_responsive_height</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_publicize_job_id</wp:meta_key>
    <wp:meta_value><![CDATA[58731670052]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_attr</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_dimensions</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_coblocks_accordion_ie_support</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>spay_email</wp:meta_key>
    <wp:meta_value><![CDATA[]]></wp:meta_value>
  </wp:postmeta>
  <wp:comment>
    <wp:comment_id>39</wp:comment_id>
    <wp:comment_author><![CDATA[Implementing XR Traffic Controller (XTC) in IP/MPLS &amp; Segment Routing Service-Provider Networks. - permit-any-any.com]]></wp:comment_author>
    <wp:comment_author_email/>
    <wp:comment_author_url>https://permit-any-any.com/implementing-xr-traffic-controller-xtc-in-ip-mpls-segment-routing-service-provider-networks/</wp:comment_author_url>
    <wp:comment_author_IP>162.241.24.11</wp:comment_author_IP>
    <wp:comment_date>2022-02-14 08:24:51</wp:comment_date>
    <wp:comment_date_gmt>2022-02-14 15:24:51</wp:comment_date_gmt>
    <wp:comment_content><![CDATA[[&#8230;]  Are Microservices Better Than Monoliths?  Postman Environment Variables  My Journey to Getting AWS Certified Advanced Networking – Specialty Certified [&#8230;]]]></wp:comment_content>
    <wp:comment_approved>0</wp:comment_approved>
    <wp:comment_type>pingback</wp:comment_type>
    <wp:comment_parent>0</wp:comment_parent>
    <wp:comment_user_id>0</wp:comment_user_id>
    <wp:commentmeta>
      <wp:meta_key>akismet_result</wp:meta_key>
      <wp:meta_value><![CDATA[false]]></wp:meta_value>
    </wp:commentmeta>
    <wp:commentmeta>
      <wp:meta_key>akismet_history</wp:meta_key>
      <wp:meta_value><![CDATA[a:2:{s:4:"time";d:1644852291.860307;s:5:"event";s:9:"check-ham";}]]></wp:meta_value>
    </wp:commentmeta>
    <wp:commentmeta>
      <wp:meta_key>akismet_history</wp:meta_key>
      <wp:meta_value><![CDATA[a:2:{s:4:"time";d:1644856041.464798;s:5:"event";s:9:"check-ham";}]]></wp:meta_value>
    </wp:commentmeta>
  </wp:comment>
</item>
<item>
  <title><![CDATA[mpls_sdn_era_topology]]></title>
  <link>https://adminsave.wordpress.com/2021/05/23/implementing-xr-traffic-controller-xtc-in-ip-mpls-amp-segment-routing-service-provider-networks/mpls_sdn_era_topology/</link>
  <pubDate>Sun, 23 May 2021 21:09:41 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">http://adminsave.files.wordpress.com/2021/05/mpls_sdn_era_topology.png</guid>
  <description/>
  <content:encoded><![CDATA[]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>260</wp:post_id>
  <wp:post_date>2021-05-23 14:09:41</wp:post_date>
  <wp:post_date_gmt>2021-05-23 21:09:41</wp:post_date_gmt>
  <wp:post_modified>2021-05-23 14:09:41</wp:post_modified>
  <wp:post_modified_gmt>2021-05-23 21:09:41</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>mpls_sdn_era_topology</wp:post_name>
  <wp:status>inherit</wp:status>
  <wp:post_parent>250</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>attachment</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:attachment_url>https://adminsave.files.wordpress.com/2021/05/mpls_sdn_era_topology.png</wp:attachment_url>
  <wp:postmeta>
    <wp:meta_key>_wp_attached_file</wp:meta_key>
    <wp:meta_value><![CDATA[/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2021/05/mpls_sdn_era_topology.png]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_wp_attachment_metadata</wp:meta_key>
    <wp:meta_value><![CDATA[a:6:{s:5:"width";i:3636;s:6:"height";i:2292;s:4:"file";s:98:"/home/wpcom/public_html/wp-content/blogs.dir/5a2/142705762/files/2021/05/mpls_sdn_era_topology.png";s:5:"sizes";a:0:{}s:10:"image_meta";a:12:{s:8:"aperture";s:1:"0";s:6:"credit";s:0:"";s:6:"camera";s:0:"";s:7:"caption";s:0:"";s:17:"created_timestamp";s:1:"0";s:9:"copyright";s:0:"";s:12:"focal_length";s:1:"0";s:3:"iso";s:1:"0";s:13:"shutter_speed";s:1:"0";s:5:"title";s:0:"";s:11:"orientation";s:1:"0";s:8:"keywords";a:0:{}}s:8:"filesize";i:1155218;}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Don - 2021-05-28 05:04:30]]></title>
  <link>https://adminsave.wordpress.com/?post_type=feedback&amp;p=265</link>
  <pubDate>Fri, 28 May 2021 12:04:30 +0000</pubDate>
  <dc:creator/>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?post_type=feedback&amp;p=265</guid>
  <description/>
  <content:encoded><![CDATA[I cannot find the ansible playbooks from your youtube videos on SROS, do you have them on github somehwere? Thanks!
<!--more-->
AUTHOR: Don
AUTHOR EMAIL: certsdb@gmail.com
AUTHOR URL: 
SUBJECT: [Adminsave] Contact
IP: 141.193.16.159
Array
(
    [1_Name] =&gt; Don
    [2_Email] =&gt; certsdb@gmail.com
    [3_Comment] =&gt; I cannot find the ansible playbooks from your youtube videos on SROS, do you have them on github somehwere? Thanks!
    [email_marketing_consent] =&gt; 
    [entry_title] =&gt; Contact
    [entry_permalink] =&gt; https://adminsave.wordpress.com/contact/
    [feedback_id] =&gt; 733c5498b33b7acd09b3b53a56a79ad3
)
]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>265</wp:post_id>
  <wp:post_date>2021-05-28 05:04:30</wp:post_date>
  <wp:post_date_gmt>2021-05-28 12:04:30</wp:post_date_gmt>
  <wp:post_modified>2021-05-28 05:04:30</wp:post_modified>
  <wp:post_modified_gmt>2021-05-28 12:04:30</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>733c5498b33b7acd09b3b53a56a79ad3</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>2</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>feedback</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_feedback_extra_fields</wp:meta_key>
    <wp:meta_value><![CDATA[a:0:{}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_feedback_email</wp:meta_key>
    <wp:meta_value><![CDATA[a:2:{s:2:"to";a:1:{i:0;s:27:"teenoko <teenoko@gmail.com>";}s:7:"message";s:492:"<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>

<b>Name:</b> Don<br /><br /><b>Email:</b> certsdb@gmail.com<br /><br /><b>Comment:</b> I cannot find the ansible playbooks from your youtube videos on SROS, do you have them on github somehwere? Thanks!<br /><br /><br /><hr />Time: May 28, 2021 at 5:04 am<br />IP Address: 141.193.16.159<br />Contact Form URL: https://adminsave.wordpress.com/contact/<br /><p>Sent by an unverified visitor to your site.</p>

</body>
</html>";}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Custom Styles]]></title>
  <link>https://adminsave.wordpress.com/2021/12/03/wp-global-styles-pub%2fwilson/</link>
  <pubDate>Fri, 03 Dec 2021 15:05:01 +0000</pubDate>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=272</guid>
  <description/>
  <content:encoded><![CDATA[{"version":2,"isGlobalStylesUserThemeJSON":true}]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>272</wp:post_id>
  <wp:post_date>2021-12-03 08:05:01</wp:post_date>
  <wp:post_date_gmt>2021-12-03 15:05:01</wp:post_date_gmt>
  <wp:post_modified>2021-12-03 08:05:01</wp:post_modified>
  <wp:post_modified_gmt>2021-12-03 15:05:01</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>wp-global-styles-pub%2fwilson</wp:post_name>
  <wp:status>publish</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>wp_global_styles</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="wp_theme" nicename="pub-wilson"><![CDATA[pub/wilson]]></category>
  <wp:postmeta>
    <wp:meta_key>_publicize_pending</wp:meta_key>
    <wp:meta_value><![CDATA[1]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[How I containerized a large network lab topology using ContainerLab.]]></title>
  <link>https://adminsave.wordpress.com/?p=273</link>
  <pubDate/>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=273</guid>
  <description/>
  <content:encoded><![CDATA[<!-- wp:paragraph -->
<p>I will start this blog by saying, just because you can ... doesn't mean you should. However, if you have the time, energy and want to learn...do whatever the heck you want! </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>This blog post will go over how I took an incredibly large lab topology and converted it to a fully containerized lab using the new <a rel="noreferrer noopener" href="https://containerlab.srlinux.dev/" target="_blank">ContainerLab</a> that came out from team <a rel="noreferrer noopener" href="#Nokia" target="_blank">#Nokia-SRL</a> (Thanks Roman <a href="http://www.github.com/hellt">@netdevpos</a> and team).  Lets get started!</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I will not go into detail about how to install containerlab, as the documentation is incredible and if I can follow it - so can you. Head over to <a href="https://containerlab.srlinux.dev/install/">Installing ContainerLab</a> and get started. I will say, I recommend to do this on a Linux machine. However, if you are wanting to run devices that are not just SR-Linux such as <a href="https://github.com/vrnetlab/vrnetlab">vrnetlab</a> based nodes that you custom build usng the same images you may be using with EVE-NG or GNS3, then I suggest you keep to linux. Why? Because Docker Desktop VM does not support virtualization.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>I started this process by building a docker image for ios-xrv. At first, I made a mistake by using the vrnetlab repository to build my image. When I tried to deploy a containerlab using the upstream vrnetlab projet I kept seeing my labs not deploying. After inspecting the docker logs of the image, there was a simple clue that made me realize I should be using the forked vrnetlab project under hellt/vrnetlab. This fork has been optimized to build docker images with Ubuntu 20.04 and several other pieces as well. For example, the errors I was seeing in the docker logs were from argparse not recognizing arguments being used in the 'launch.py' file. This is made me go looking and realized I was building my image incorrectly. After I built the new ios-xrv image from hellt/vrnetlab, I was up and running xrv dockerized images in ContainerLab in no time.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>How to build a vrnetlab docker image from a qcow / vmdk image file:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>First, clone down the vrnetlab fork</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>git clone https://github.com/hellt/vrnetlab.git</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, place your qcow2/vmdk file in the correct directory that matches to what node image you are attempting to build. For example, I purchased Cisco VIRL quite some ago and had the following image laying around in some deep nested folder directory in my dropbox:</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>iosxrv-k9-demo-6.1.3.qcow2</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, if you have a qcow2 image just like I did, we will need to convert it to a vmdk file. We will accomplish this by using the qemu-utils library. You can simply apt-get install this if you are on a debian based env.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>sudo apt-get install qemu-utils</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, from within the folder directory in vrnetlab/xrv run with the qcow2 image in this directory, you can do the following to convert it</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>qemu-img convert -f qcow2 -O vmdk -o subformat=streamOptimized iosxrv-k9-demo-6.1.3.qcow2 iosxrv-k9-demo.vmdk-6.1.3</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Now, you will have a vmdk image in this directory and can begin to create the docker image. Simply run </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p><code>make docker-image</code></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>Final result of this directory will appear as so</p>
<!-- /wp:paragraph -->

<!-- wp:code -->
<pre class="wp-block-code"><code>➜  xrv git:(master) ✗ tree
.
├── docker
│   ├── Dockerfile
│   ├── healthcheck.py
│   ├── iosxrv-k9-demo.vmdk-6.1.3
│   ├── launch.py
│   └── vrnetlab.py
├── iosxrv-k9-demo.vmdk-6.1.3
├── Makefile
└── README.md</code></pre>
<!-- /wp:code -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">Now you can retag this image and upload it to your Docker Container Registry</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">docker tag vrnetlab/vr-xrv:6.1.3 h4ndzdatm0ld/vr-xrv:6.1.3</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:syntaxhighlighter/code -->
<pre class="wp-block-syntaxhighlighter-code">Alrighty! We can now start creating the topology file in YAML format.</pre>
<!-- /wp:syntaxhighlighter/code -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>273</wp:post_id>
  <wp:post_date>2021-12-03 14:18:43</wp:post_date>
  <wp:post_date_gmt>0000-00-00 00:00:00</wp:post_date_gmt>
  <wp:post_modified>2021-12-03 14:18:43</wp:post_modified>
  <wp:post_modified_gmt>2021-12-03 21:18:43</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name/>
  <wp:status>pending</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>1</wp:is_sticky>
  <category domain="post_format" nicename="post-format-image"><![CDATA[Image]]></category>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_last_editor_used_jetpack</wp:meta_key>
    <wp:meta_value><![CDATA[block-editor]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Integration Testing with Github Actions and ContainerLab!]]></title>
  <link>https://adminsave.wordpress.com/?p=291</link>
  <pubDate/>
  <dc:creator>adminsave</dc:creator>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?p=291</guid>
  <description/>
  <content:encoded><![CDATA[<!-- wp:paragraph -->
<p>The last several months, I've had a small pet project of creating a NETCONF plugin for Nornir. If you are not familiar with <a rel="noreferrer noopener" href="https://github.com/nornir-automation/nornir" target="_blank">Nornir</a>, It's a Network Automation Framework..much like Ansible. I started this project as a way to learn the ins and outs of Nornir a little bit deeper and contribute back to the community. Fast forward to present time and I've been trying to find a way to do integration testing in my pipelines. The problem? I can't do integration testing against live devices (that I do not have) or lab devices for that matter without having an always-on sandbox with publicly reachable addresses. Oh, that's a good talking point! Should I just test against the always-on Cisco Sandbox? Well, I have been doing that, locally, but it's just not reliable as it's not under my control what the status of those devices is. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The goal of this post is to give a high level walk through of how I am going to incorporate <a href="https://containerlab.srlinux.dev/" target="_blank" rel="noreferrer noopener">ContainerLab</a> as part of my CI with Github Actions using a self-hosted job runner. Lets get started.</p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p></p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>The reason for having a self hosted runner is that the environments that are used with Github actions do not provide the ability to run nested virtualization. The particular devices I am using inside of ContainerLab require this (Nokia SROS and Cisco IOSXR). This isn't too much of a  problem as Github makes it very easy to use your own virtual machine as a job runner. I happen to have an old Dell server running in my home network and I have the resources to keep a self-hosted runner on at all times with plenty of memory to spare. </p>
<!-- /wp:paragraph -->

<!-- wp:paragraph -->
<p>To learn more about self-hosted runners, checkout the <a rel="noreferrer noopener" href="https://docs.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners" target="_blank">documentation from Github</a>. We will skip the installation procedure, as it's really not that interesting. It's basically CURL down some installation bash script and run the script. The script will keep basically be always on and listening for Jobs from Github. The awesome part of this all, is that my Virtual Machine which is now a Github CI runner doesn't need a publicly reachable address either. The particular runner I am hosting for this project is at the repository level. This means that none of my other Github projects that are running Github actions have access to the runner and will use the native runners provider by Github. </p>
<!-- /wp:paragraph -->]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>291</wp:post_id>
  <wp:post_date>2022-02-12 15:09:16</wp:post_date>
  <wp:post_date_gmt>0000-00-00 00:00:00</wp:post_date_gmt>
  <wp:post_modified>2022-02-12 15:09:16</wp:post_modified>
  <wp:post_modified_gmt>2022-02-12 22:09:16</wp:post_modified_gmt>
  <wp:comment_status>open</wp:comment_status>
  <wp:ping_status>open</wp:ping_status>
  <wp:post_name/>
  <wp:status>draft</wp:status>
  <wp:post_parent>0</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>post</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <category domain="category" nicename="uncategorized"><![CDATA[Uncategorized]]></category>
  <wp:postmeta>
    <wp:meta_key>_last_editor_used_jetpack</wp:meta_key>
    <wp:meta_value><![CDATA[block-editor]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Ranker SEO - 2022-05-18 07:43:42]]></title>
  <link>https://adminsave.wordpress.com/?post_type=feedback&amp;p=303</link>
  <pubDate>Wed, 18 May 2022 14:43:42 +0000</pubDate>
  <dc:creator/>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?post_type=feedback&amp;p=303</guid>
  <description/>
  <content:encoded><![CDATA[Hello, 

Greetings from Ranker SEO.

Are you looking for a genuine SEO service to rank your website top on Google? Are you cheated by fake SEO companies? 

You have found an affordable legitimate SEO agency to rank your website.

We have ranked 100s of websites such as blogs, shopify stores, ecommerce websites, adult websites, saas websites, etc. You can reach more customers by utilizing our backlinks.

For real proof, you can visit our website and check out. Contact us for more details.

Our Skype ID: support@ranker.one
Our Website: https://www.ranker.one

Thanks &amp; Regards
Ranker SEO

If you don't like to receive our messages, you can unsubscribe by click here https://www.ranker.one/unsubscribe/?site=wordpress.com
<!--more-->
AUTHOR: Ranker SEO
AUTHOR EMAIL: furnell.andrea@hotmail.com
AUTHOR URL: 
SUBJECT: [Adminsave] Contact
IP: 80.71.150.45
Array
(
    [1_Name] =&gt; Ranker SEO
    [2_Email] =&gt; furnell.andrea@hotmail.com
    [3_Comment] =&gt; Hello, 

Greetings from Ranker SEO.

Are you looking for a genuine SEO service to rank your website top on Google? Are you cheated by fake SEO companies? 

You have found an affordable legitimate SEO agency to rank your website.

We have ranked 100s of websites such as blogs, shopify stores, ecommerce websites, adult websites, saas websites, etc. You can reach more customers by utilizing our backlinks.

For real proof, you can visit our website and check out. Contact us for more details.

Our Skype ID: support@ranker.one
Our Website: https://www.ranker.one

Thanks &amp; Regards
Ranker SEO

If you don't like to receive our messages, you can unsubscribe by click here https://www.ranker.one/unsubscribe/?site=wordpress.com
    [email_marketing_consent] =&gt; 
    [entry_title] =&gt; Contact
    [entry_permalink] =&gt; https://adminsave.wordpress.com/contact/
    [feedback_id] =&gt; 5c2271c979d01a24c826b601ad718783
)
]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>303</wp:post_id>
  <wp:post_date>2022-05-18 07:43:42</wp:post_date>
  <wp:post_date_gmt>2022-05-18 14:43:42</wp:post_date_gmt>
  <wp:post_modified>2022-05-18 07:43:42</wp:post_modified>
  <wp:post_modified_gmt>2022-05-18 14:43:42</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>5c2271c979d01a24c826b601ad718783</wp:post_name>
  <wp:status>spam</wp:status>
  <wp:post_parent>2</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>feedback</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_feedback_email</wp:meta_key>
    <wp:meta_value><![CDATA[a:2:{s:2:"to";a:1:{i:0;s:27:"teenoko <teenoko@gmail.com>";}s:7:"message";s:1245:"<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>

<b>Name:</b> Ranker SEO<br /><br /><b>Email:</b> furnell.andrea@hotmail.com<br /><br /><b>Comment:</b> Hello, <br />
<br />
Greetings from Ranker SEO.<br />
<br />
Are you looking for a genuine SEO service to rank your website top on Google? Are you cheated by fake SEO companies? <br />
<br />
You have found an affordable legitimate SEO agency to rank your website.<br />
<br />
We have ranked 100s of websites such as blogs, shopify stores, ecommerce websites, adult websites, saas websites, etc. You can reach more customers by utilizing our backlinks.<br />
<br />
For real proof, you can visit our website and check out. Contact us for more details.<br />
<br />
Our Skype ID: support@ranker.one<br />
Our Website: https://www.ranker.one<br />
<br />
Thanks &amp; Regards<br />
Ranker SEO<br />
<br />
If you don't like to receive our messages, you can unsubscribe by click here https://www.ranker.one/unsubscribe/?site=wordpress.com<br /><br /><br /><hr />Time: May 18, 2022 at 7:43 am<br />IP Address: 80.71.150.45<br />Contact Form URL: https://adminsave.wordpress.com/contact/<br /><p>Sent by an unverified visitor to your site.</p>

</body>
</html>";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_feedback_extra_fields</wp:meta_key>
    <wp:meta_value><![CDATA[a:0:{}]]></wp:meta_value>
  </wp:postmeta>
</item>
<item>
  <title><![CDATA[Dane Bynum - 2022-05-24 11:19:31]]></title>
  <link>https://adminsave.wordpress.com/?post_type=feedback&amp;p=304</link>
  <pubDate>Tue, 24 May 2022 18:19:31 +0000</pubDate>
  <dc:creator/>
  <guid isPermaLink="false">https://adminsave.wordpress.com/?post_type=feedback&amp;p=304</guid>
  <description/>
  <content:encoded><![CDATA[Hi there,

Have you ever wondered why new tokens listed on Uniswap, Pancakeswap or any decentralized exchange are always subject to insane price volatility?

Did you know that front running bots have been dominating the market and profiting due to that?

Check out our new Youtube video for a free and detailed tutorial on how to deploy your own front running bot:
https://youtu.be/SQHFveYdjV8

Kind Regards,
Dane
<!--more-->
AUTHOR: Dane Bynum
AUTHOR EMAIL: bynum.dane@gmail.com
AUTHOR URL: 
SUBJECT: [Adminsave] Contact
IP: 198.23.217.89
Array
(
    [1_Name] =&gt; Dane Bynum
    [2_Email] =&gt; bynum.dane@gmail.com
    [3_Comment] =&gt; Hi there,

Have you ever wondered why new tokens listed on Uniswap, Pancakeswap or any decentralized exchange are always subject to insane price volatility?

Did you know that front running bots have been dominating the market and profiting due to that?

Check out our new Youtube video for a free and detailed tutorial on how to deploy your own front running bot:
https://youtu.be/SQHFveYdjV8

Kind Regards,
Dane
    [email_marketing_consent] =&gt; 
    [entry_title] =&gt; Contact
    [entry_permalink] =&gt; https://adminsave.wordpress.com/contact/
    [feedback_id] =&gt; 3f30da724cd3de133431f4c26afa30d3
)
]]></content:encoded>
  <excerpt:encoded><![CDATA[]]></excerpt:encoded>
  <wp:post_id>304</wp:post_id>
  <wp:post_date>2022-05-24 11:19:31</wp:post_date>
  <wp:post_date_gmt>2022-05-24 18:19:31</wp:post_date_gmt>
  <wp:post_modified>2022-05-24 11:19:31</wp:post_modified>
  <wp:post_modified_gmt>2022-05-24 18:19:31</wp:post_modified_gmt>
  <wp:comment_status>closed</wp:comment_status>
  <wp:ping_status>closed</wp:ping_status>
  <wp:post_name>3f30da724cd3de133431f4c26afa30d3</wp:post_name>
  <wp:status>spam</wp:status>
  <wp:post_parent>2</wp:post_parent>
  <wp:menu_order>0</wp:menu_order>
  <wp:post_type>feedback</wp:post_type>
  <wp:post_password/>
  <wp:is_sticky>0</wp:is_sticky>
  <wp:postmeta>
    <wp:meta_key>_feedback_email</wp:meta_key>
    <wp:meta_value><![CDATA[a:2:{s:2:"to";a:1:{i:0;s:27:"teenoko <teenoko@gmail.com>";}s:7:"message";s:870:"<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>

<b>Name:</b> Dane Bynum<br /><br /><b>Email:</b> bynum.dane@gmail.com<br /><br /><b>Comment:</b> Hi there,<br />
<br />
Have you ever wondered why new tokens listed on Uniswap, Pancakeswap or any decentralized exchange are always subject to insane price volatility?<br />
<br />
Did you know that front running bots have been dominating the market and profiting due to that?<br />
<br />
Check out our new Youtube video for a free and detailed tutorial on how to deploy your own front running bot:<br />
https://youtu.be/SQHFveYdjV8<br />
<br />
Kind Regards,<br />
Dane<br /><br /><br /><hr />Time: May 24, 2022 at 11:19 am<br />IP Address: 198.23.217.89<br />Contact Form URL: https://adminsave.wordpress.com/contact/<br /><p>Sent by an unverified visitor to your site.</p>

</body>
</html>";}]]></wp:meta_value>
  </wp:postmeta>
  <wp:postmeta>
    <wp:meta_key>_feedback_extra_fields</wp:meta_key>
    <wp:meta_value><![CDATA[a:0:{}]]></wp:meta_value>
  </wp:postmeta>
</item>
  </channel>
</rss>
